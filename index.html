<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSA - Community Sports & Arts | Elementary School Programs</title>
    <meta name="description" content="Professional sports and music programs for elementary schools. Expert instruction in athletics, dance, choir, and percussion.">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<script>
(function() {
    'use strict';
    
    // Immediate scroll to top - prevents scroll restoration
    window.scrollTo(0, 0);
    
    // Safely set scrollTop properties
    if (document.documentElement) {
        document.documentElement.scrollTop = 0;
    }
    
    // Wait for body to exist before setting its scrollTop
    function setBodyScrollTop() {
        if (document.body) {
            document.body.scrollTop = 0;
        } else {
            // If body doesn't exist yet, wait a bit and try again
            setTimeout(setBodyScrollTop, 10);
        }
    }
    
    setBodyScrollTop();
    
    // Handle browser back/forward and reload
    window.addEventListener('pageshow', function(event) {
        window.scrollTo(0, 0);
        if (document.documentElement) {
            document.documentElement.scrollTop = 0;
        }
        if (document.body) {
            document.body.scrollTop = 0;
        }
    });
    
    // Override scroll restoration
    if ('scrollRestoration' in history) {
        history.scrollRestoration = 'manual';
    }
    
})();
</script>
    <!-- Styles -->
    <link rel="stylesheet" href="./styles.css">
</head>
<body>
   <!-- Loading Screen -->
<div class="loader" id="loader">
    <div class="loader-hero-logo" id="loaderHeroLogo">
        <!-- Multi-Color Progress Ring with Overflow Effects -->
        <div class="progress-container">
            <svg class="progress-ring" width="360" height="360" viewBox="0 0 360 360">
                <defs>
                    <linearGradient id="exactColors" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#B0202A"/>
                        <stop offset="20%" style="stop-color:#813F96"/>
                        <stop offset="40%" style="stop-color:#3BB44B"/>
                        <stop offset="60%" style="stop-color:#FFB70B"/>
                        <stop offset="80%" style="stop-color:#C9592B"/>
                        <stop offset="100%" style="stop-color:#0C78B9"/>
                    </linearGradient>
                    <filter id="overflowGlow" x="-50%" y="-50%" width="200%" height="200%">
                        <feGaussianBlur stdDeviation="8" result="coloredBlur"/>
                        <feGaussianBlur stdDeviation="15" result="bigBlur"/>
                        <feGaussianBlur stdDeviation="25" result="hugeBlur"/>
                        <feMerge>
                            <feMergeNode in="hugeBlur"/>
                            <feMergeNode in="bigBlur"/>
                            <feMergeNode in="coloredBlur"/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                    <filter id="whiteEmissive" x="-100%" y="-100%" width="300%" height="300%">
                        <feGaussianBlur stdDeviation="12" result="whiteBlur1"/>
                        <feGaussianBlur stdDeviation="25" result="whiteBlur2"/>
                        <feGaussianBlur stdDeviation="40" result="whiteBlur3"/>
                        <feMerge>
                            <feMergeNode in="whiteBlur3"/>
                            <feMergeNode in="whiteBlur2"/>
                            <feMergeNode in="whiteBlur1"/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                </defs>
                <circle class="progress-track" 
                        cx="180" cy="180" r="150"
                        fill="none"
                        stroke="rgba(255,255,255,0.05)"
                        stroke-width="2"/>
                <circle class="progress-bar" 
                        cx="180" cy="180" r="150"
                        fill="none"
                        stroke="url(#exactColors)"
                        stroke-width="5"
                        stroke-linecap="round"
                        filter="url(#overflowGlow)"/>
            </svg>
        </div>
        
        <!-- Logo Container -->
        <div class="logo-container">
            <img src="public/images/logo.png" alt="CSA Logo" class="loader-logo-image">
            <div class="loader-logo-fallback">CSA</div>
        </div>
        
        <!-- Company Name Text -->
        <div class="company-name-text">CSA Entertainment</div>
    </div>
</div>
    <!-- Header -->
<header class="header" id="header">
    <nav class="nav">        
        <ul class="nav-menu" id="navMenu">
    <li class="nav-item">
        <a href="#home" class="nav-link">Home</a>
    </li>
    <li class="nav-item">
        <a href="#programs" class="nav-link">Programs</a>
    </li>
    <li class="nav-item">
        <a href="#about" class="nav-link">About</a>
    </li>
    <li class="nav-item">
        <a href="#gallery" class="nav-link">Gallery</a>
    </li>
    <li class="nav-item">
        <a href="#testimonials" class="nav-link">Testimonials</a>
    </li>
    <li class="nav-item">
        <a href="#contact" class="nav-link">Contact</a>
    </li>
</ul>
        
        <div class="nav-right">
            <div class="nav-auth-section">
                <!-- Authentication buttons -->
                <div class="auth-buttons" id="authButtons">
                    <button class="btn btn-auth" id="loginBtn">Login</button>
                </div>
                <div class="user-info hidden" id="userInfo">
                    <span class="user-name" id="userName"></span>
                    <button class="btn btn-secondary" id="logoutBtn">Logout</button>
                </div>
            </div>
            
            <button class="nav-toggle" id="navToggle">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>
        </div>
    </nav>
</header>

<section class="hero" id="home">
    <div class="hero-background">
        <div class="video-container" id="videoContainer">
            <!-- Videos will be dynamically loaded here -->
        </div>
        <div class="hero-overlay"></div>
    </div>
    
    <div class="hero-content">
        <div class="hero-logo">
            <img src="public/images/logo.png" alt="CSA Logo" class="hero-logo-image" 
                 onload="this.style.display='block'; this.classList.add('loaded');"
                 onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';"
                 style="display: block;">
            <div class="hero-logo-fallback" style="display: none;">CSA</div>
        </div>
        
        <div class="hero-text-container">
            <h1 class="hero-title">CSA Entertainment</h1>
            <p class="hero-subtitle">Serving Fresno, Kermen, Kings Canyon, Selma, Unified School Districts</p>
        </div>
        
        <div class="hero-actions">
            <a href="#programs" class="btn btn-primary">Programs</a>
            <a href="#contact" class="btn btn-secondary">Contact Us</a>
        </div>
    </div>
    
    <!-- Optional: Video indicators -->
    <div class="video-controls" id="videoControls">
        <!-- Indicators will be dynamically created -->
    </div>
    
    <div class="scroll-indicator">
        <div class="scroll-arrow"></div>
    </div>
</section>

   <!-- Programs Section with Filtering -->
<section class="programs" id="programs">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">Our Programs</h2>
            <p class="section-subtitle">Comprehensive curricula designed specifically for elementary schools</p>
        </div>
        
        <!-- Program Filters -->
        <div class="program-filters">
            <!-- Category Tabs -->
            <div class="filter-section">
                <div class="category-tabs">
                    <button class="category-tab active" data-category="all">All Programs</button>
                    <button class="category-tab" data-category="afterschool">After School</button>
                    <button class="category-tab" data-category="winter-camps">Winter Camps</button>
                    <button class="category-tab" data-category="summer-camps">Summer Camps</button>
                    <button class="category-tab" data-category="concerts">Concerts</button>
                </div>
            </div>

            <!-- Specialization Filter -->
            <div class="filter-section">
                <div class="specialization-pills">
                    <button class="spec-pill active" data-subcategory="all">All Types</button>
                    <button class="spec-pill" data-subcategory="guitar-strings">Electric/Acoustic & Bass Guitar</button>
                    <button class="spec-pill" data-subcategory="percussion">Percussion</button>
                    <button class="spec-pill" data-subcategory="vocal">Vocal</button>
                    <button class="spec-pill" data-subcategory="dance">Dance</button>
                    <button class="spec-pill" data-subcategory="sports">Sports</button>
                    <button class="spec-pill" data-subcategory="podcasting">Podcasting</button>
                    <button class="spec-pill" data-subcategory="dj-production">DJ & Production</button>
                    <button class="spec-pill" data-subcategory="keyboard">Keyboard & Piano</button>
                </div>
            </div>

            <!-- Results Info -->
            <div class="filter-results">
                Showing <span id="programCount">11</span> programs
                <button class="clear-all" id="clearFilters" style="display: none;">Clear Filters</button>
            </div>
        </div>
        
        <div class="programs-grid">
            <div class="program-card" data-category="afterschool,winter-camps,summer-camps" data-subcategory="sports">
                <div class="program-image">
                    <img src="public/images/programs/1.jpg" alt="Sports Program" loading="lazy">
                    <div class="program-overlay">
                        <div class="program-icon">‚öΩ</div>
                    </div>
                </div>
                <div class="program-content">
                    <h3 class="program-title">Sports Programs</h3>
                    <p class="program-description">Comprehensive athletic development focusing on fundamental movement skills, teamwork, and physical fitness for all ability levels.</p>
                    <ul class="program-features">
                        <li>Age-appropriate skill development</li>
                        <li>Team building activities</li>
                        <li>Fitness and coordination</li>
                        <li>Inclusive participation</li>
                    </ul>
                </div>
            </div>
            
            <div class="program-card" data-category="afterschool,winter-camps,summer-camps" data-subcategory="guitar-strings">
                <div class="program-image">
                    <img src="public/images/programs/1.jpg" alt="Acoustic Guitar Program" loading="lazy">
                    <div class="program-overlay">
                        <div class="program-icon">üé∏</div>
                    </div>
                </div>
                <div class="program-content">
                    <h3 class="program-title">Acoustic Guitar</h3>
                    <p class="program-description">Traditional acoustic guitar instruction focusing on fingerpicking, strumming patterns, and folk/classical techniques.</p>
                    <ul class="program-features">
                        <li>Fingerpicking techniques</li>
                        <li>Chord progressions</li>
                        <li>Strumming patterns</li>
                        <li>Folk and classical styles</li>
                    </ul>
                </div>
            </div>
            
            <div class="program-card" data-category="afterschool,winter-camps,summer-camps" data-subcategory="guitar-strings">
                <div class="program-image">
                    <img src="public/images/programs/2.jpg" alt="Electric Guitar Program" loading="lazy">
                    <div class="program-overlay">
                        <div class="program-icon">‚ö°</div>
                    </div>
                </div>
                <div class="program-content">
                    <h3 class="program-title">Electric Guitar</h3>
                    <p class="program-description">Electric guitar fundamentals including amplifier use, effects, and modern playing techniques for rock and contemporary music.</p>
                    <ul class="program-features">
                        <li>Power chords and riffs</li>
                        <li>Amplifier techniques</li>
                        <li>Lead guitar basics</li>
                        <li>Contemporary styles</li>
                    </ul>
                </div>
            </div>
            
            <div class="program-card" data-category="afterschool,winter-camps,summer-camps,concerts" data-subcategory="dance">
                <div class="program-image">
                    <img src="public/images/programs/2.jpg" alt="Dance Program" loading="lazy">
                    <div class="program-overlay">
                        <div class="program-icon">üíÉ</div>
                    </div>
                </div>
                <div class="program-content">
                    <h3 class="program-title">Dance Programs</h3>
                    <p class="program-description">Creative movement and dance instruction that develops coordination, rhythm, self-expression, and cultural awareness.</p>
                    <ul class="program-features">
                        <li>Multiple dance styles</li>
                        <li>Creative expression</li>
                        <li>Coordination development</li>
                        <li>Performance opportunities</li>
                    </ul>
                </div>
            </div>
            
            <div class="program-card" data-category="afterschool,winter-camps,summer-camps,concerts" data-subcategory="vocal">
                <div class="program-image">
                    <img src="public/images/programs/1.jpg" alt="Choir Program" loading="lazy">
                    <div class="program-overlay">
                        <div class="program-icon">üéµ</div>
                    </div>
                </div>
                <div class="program-content">
                    <h3 class="program-title">Choir Programs</h3>
                    <p class="program-description">Professional vocal instruction that builds confidence, musical literacy, and ensemble skills through engaging repertoire.</p>
                    <ul class="program-features">
                        <li>Vocal technique training</li>
                        <li>Music theory basics</li>
                        <li>Ensemble singing</li>
                        <li>Concert performances</li>
                    </ul>
                </div>
            </div>
            
            <div class="program-card" data-category="afterschool,winter-camps,summer-camps,concerts" data-subcategory="percussion">
                <div class="program-image">
                    <img src="public/images/programs/2.jpg" alt="Percussion Program" loading="lazy">
                    <div class="program-overlay">
                        <div class="program-icon">ü•Å</div>
                    </div>
                </div>
                <div class="program-content">
                    <h3 class="program-title">Percussion Programs</h3>
                    <p class="program-description">Dynamic rhythm instruction using professional instruments to develop timing, coordination, and ensemble skills.</p>
                    <ul class="program-features">
                        <li>Rhythm and timing</li>
                        <li>Instrument technique</li>
                        <li>Ensemble performance</li>
                        <li>Cultural exploration</li>
                    </ul>
                </div>
            </div>
            
            <div class="program-card" data-category="afterschool,winter-camps,summer-camps" data-subcategory="dj-production">
                <div class="program-image">
                    <img src="public/images/programs/2.jpg" alt="DJ Introduction Program" loading="lazy">
                    <div class="program-overlay">
                        <div class="program-icon">üéß</div>
                    </div>
                </div>
                <div class="program-content">
                    <h3 class="program-title">DJ Introduction</h3>
                    <p class="program-description">Introduction to modern music production and DJ skills, teaching beat matching, mixing techniques, and digital music technology.</p>
                    <ul class="program-features">
                        <li>Beat matching basics</li>
                        <li>Digital music software</li>
                        <li>Mixing techniques</li>
                        <li>Music appreciation</li>
                    </ul>
                </div>
            </div>
            
            <div class="program-card" data-category="afterschool,winter-camps,summer-camps" data-subcategory="guitar-strings">
                <div class="program-image">
                    <img src="public/images/programs/1.jpg" alt="Bass Guitar Program" loading="lazy">
                    <div class="program-overlay">
                        <div class="program-icon">üé∏</div>
                    </div>
                </div>
                <div class="program-content">
                    <h3 class="program-title">Bass Guitar</h3>
                    <p class="program-description">Foundation bass guitar skills focusing on rhythm, groove, and the essential role of bass in ensemble playing.</p>
                    <ul class="program-features">
                        <li>Rhythm and timing</li>
                        <li>Groove fundamentals</li>
                        <li>Ensemble playing</li>
                        <li>Music theory basics</li>
                    </ul>
                </div>
            </div>
            
            <div class="program-card" data-category="afterschool,winter-camps,summer-camps" data-subcategory="keyboard">
                <div class="program-image">
                    <img src="public/images/programs/2.jpg" alt="Keyboard Program" loading="lazy">
                    <div class="program-overlay">
                        <div class="program-icon">üéπ</div>
                    </div>
                </div>
                <div class="program-content">
                    <h3 class="program-title">Keyboard & Piano</h3>
                    <p class="program-description">Foundation piano and keyboard skills development, including proper technique, music theory, and creative composition.</p>
                    <ul class="program-features">
                        <li>Proper hand positioning</li>
                        <li>Scale and chord work</li>
                        <li>Music composition</li>
                        <li>Performance preparation</li>
                    </ul>
                </div>
            </div>

            <!-- New Podcasting Program -->
            <div class="program-card" data-category="afterschool,winter-camps,summer-camps" data-subcategory="podcasting">
                <div class="program-image">
                    <img src="public/images/programs/1.jpg" alt="Podcasting Program" loading="lazy">
                    <div class="program-overlay">
                        <div class="program-icon">üéôÔ∏è</div>
                    </div>
                </div>
                <div class="program-content">
                    <h3 class="program-title">Podcasting & Media</h3>
                    <p class="program-description">Learn the art of storytelling through digital media, developing communication skills, audio production, and content creation.</p>
                    <ul class="program-features">
                        <li>Storytelling techniques</li>
                        <li>Audio recording & editing</li>
                        <li>Interview skills</li>
                        <li>Digital publishing</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</section>
  <!-- About/Stats Section -->
<section class="about" id="about">
    <div class="container">
        <div class="section-header">
            <h2>Why Schools Choose CSA</h2>
            <p class="section-subtitle">For over a decade, we've partnered with elementary schools to deliver exceptional sports and music programs with expert instructors and proven results.</p>
        </div>
        
        <div class="about-content">
            <div class="about-text">
                <div class="about-features">
                    <div class="feature-item">
                        <div class="feature-icon">‚úì</div>
                        <div class="feature-text">
                            <h4>Expert Instructors</h4>
                            <p>Certified professionals with music and education experience</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">‚úì</div>
                        <div class="feature-text">
                            <h4>Proven Curriculum</h4>
                            <p>Evidence-based programs aligned with educational standards</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">‚úì</div>
                        <div class="feature-text">
                            <h4>Full Support</h4>
                            <p>Complete implementation and ongoing program management</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-number" data-count="6452">0</div>
                    <div class="stat-label">Students Served</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" data-count="14">0</div>
                    <div class="stat-label">District Partners</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" data-count="6">0</div>
                    <div class="stat-label">Years Operated</div>
                </div>

                <div class="stat-item">
                    <div class="stat-number" data-count="150">0</div>
                    <div class="stat-label">Camp Days</div>
                </div>
            </div>
        </div>
    </div>
</section>
    <!-- Gallery Section -->
    <section class="gallery" id="gallery">
    <div class="container">
        <div class="section-header">
            <h2>Photo Gallery</h2>
            <p class="section-subtitle">Capturing the magical moments and milestones of our young performers as they shine on stage and grow in confidence.</p>
        </div>
        
        <!-- Authentication Required Message -->
        <div class="auth-required" id="authRequired">
            <div class="auth-card">
                <div class="auth-icon">üîí</div>
                <h3>Authenticad Parent Login</h3>
                <p>Your school will provide you with login credentials to see your little one ROCKING THE STAGE !</p>
                <button class="btn btn-primary" id="galleryLoginBtn">Sign In to View Gallery</button>
            </div>
        </div>
            
            <!-- Gallery Content (Hidden by default) -->
            <div class="gallery-content hidden" id="galleryContent">
                <!-- Gallery Filters -->
                <div class="gallery-filters">
                    <div class="filter-group">
                        <label for="programFilter">Program:</label>
                        <select id="programFilter" class="filter-select">
                            <option value="all">All Programs</option>
                            <option value="sports">Sports</option>
                            <option value="dance">Dance</option>
                            <option value="choir">Choir</option>
                            <option value="percussion">Percussion</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="locationFilter">Location:</label>
                        <select id="locationFilter" class="filter-select">
                            <option value="all">All Locations</option>
                            <option value="oakwood">Oakwood Elementary</option>
                            <option value="riverside">Riverside School</option>
                            <option value="maple-grove">Maple Grove Academy</option>
                            <option value="sunset">Sunset Elementary</option>
                            <option value="cedar-hills">Cedar Hills School</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="dateFilter">Date:</label>
                        <select id="dateFilter" class="filter-select">
                            <option value="all">All Dates</option>
                            <option value="2024-fall">Fall 2024</option>
                            <option value="2024-summer">Summer 2024</option>
                            <option value="2024-spring">Spring 2024</option>
                            <option value="2023-fall">Fall 2023</option>
                        </select>
                    </div>
                    
                    <button class="filter-reset" id="filterReset">Reset Filters</button>
                </div>
                
                <!-- Gallery Grid -->
                <div class="gallery-grid" id="galleryGrid">
                    <!-- Sports Program Photos -->
                    <div class="gallery-item" data-program="sports" data-location="oakwood" data-date="2024-fall">
                        <img src="public/images/gallery/5.jpg" alt="Sports Program at Oakwood Elementary" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h4>Sports Program</h4>
                                <p>Oakwood Elementary ‚Ä¢ Fall 2024</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="gallery-item" data-program="sports" data-location="riverside" data-date="2024-summer">
                        <img src="public/images/gallery/6.jpg" alt="Sports Program at Riverside School" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h4>Sports Program</h4>
                                <p>Riverside School ‚Ä¢ Summer 2024</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="gallery-item" data-program="sports" data-location="maple-grove" data-date="2024-spring">
                        <img src="public/images/gallery/sports-maple-spring2024-1.jpg" alt="Sports Program at Maple Grove" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h4>Sports Program</h4>
                                <p>Maple Grove Academy ‚Ä¢ Spring 2024</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Dance Program Photos -->
                    <div class="gallery-item" data-program="dance" data-location="sunset" data-date="2024-fall">
                        <img src="public/images/gallery/dance-sunset-fall2024-1.jpg" alt="Dance Program at Sunset Elementary" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h4>Dance Program</h4>
                                <p>Sunset Elementary ‚Ä¢ Fall 2024</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="gallery-item" data-program="dance" data-location="cedar-hills" data-date="2024-summer">
                        <img src="public/images/gallery/dance-cedar-summer2024-1.jpg" alt="Dance Program at Cedar Hills" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h4>Dance Program</h4>
                                <p>Cedar Hills School ‚Ä¢ Summer 2024</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="gallery-item" data-program="dance" data-location="oakwood" data-date="2024-spring">
                        <img src="public/images/gallery/dance-oakwood-spring2024-1.jpg" alt="Dance Program at Oakwood Elementary" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h4>Dance Program</h4>
                                <p>Oakwood Elementary ‚Ä¢ Spring 2024</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Choir Program Photos -->
                    <div class="gallery-item" data-program="choir" data-location="riverside" data-date="2024-fall">
                        <img src="public/images/gallery/choir-riverside-fall2024-1.jpg" alt="Choir Program at Riverside School" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h4>Choir Program</h4>
                                <p>Riverside School ‚Ä¢ Fall 2024</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="gallery-item" data-program="choir" data-location="maple-grove" data-date="2024-summer">
                        <img src="public/images/gallery/choir-maple-summer2024-1.jpg" alt="Choir Program at Maple Grove" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h4>Choir Program</h4>
                                <p>Maple Grove Academy ‚Ä¢ Summer 2024</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="gallery-item" data-program="choir" data-location="sunset" data-date="2023-fall">
                        <img src="public/images/gallery/choir-sunset-fall2023-1.jpg" alt="Choir Program at Sunset Elementary" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h4>Choir Program</h4>
                                <p>Sunset Elementary ‚Ä¢ Fall 2023</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Percussion Program Photos -->
                    <div class="gallery-item" data-program="percussion" data-location="cedar-hills" data-date="2024-fall">
                        <img src="public/images/gallery/percussion-cedar-fall2024-1.jpg" alt="Percussion Program at Cedar Hills" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h4>Percussion Program</h4>
                                <p>Cedar Hills School ‚Ä¢ Fall 2024</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="gallery-item" data-program="percussion" data-location="oakwood" data-date="2024-summer">
                        <img src="public/images/gallery/percussion-oakwood-summer2024-1.jpg" alt="Percussion Program at Oakwood Elementary" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h4>Percussion Program</h4>
                                <p>Oakwood Elementary ‚Ä¢ Summer 2024</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="gallery-item" data-program="percussion" data-location="riverside" data-date="2024-spring">
                        <img src="public/images/gallery/percussion-riverside-spring2024-1.jpg" alt="Percussion Program at Riverside School" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h4>Percussion Program</h4>
                                <p>Riverside School ‚Ä¢ Spring 2024</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Mixed Program Photos -->
                    <div class="gallery-item" data-program="sports" data-location="sunset" data-date="2024-summer">
                        <img src="public/images/gallery/sports-sunset-summer2024-2.jpg" alt="Sports Program at Sunset Elementary" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h4>Sports Program</h4>
                                <p>Sunset Elementary ‚Ä¢ Summer 2024</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="gallery-item" data-program="dance" data-location="riverside" data-date="2023-fall">
                        <img src="public/images/gallery/dance-riverside-fall2023-1.jpg" alt="Dance Program at Riverside School" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h4>Dance Program</h4>
                                <p>Riverside School ‚Ä¢ Fall 2023</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="gallery-item" data-program="choir" data-location="cedar-hills" data-date="2024-spring">
                        <img src="public/images/gallery/choir-cedar-spring2024-1.jpg" alt="Choir Program at Cedar Hills" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h4>Choir Program</h4>
                                <p>Cedar Hills School ‚Ä¢ Spring 2024</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="gallery-item" data-program="percussion" data-location="maple-grove" data-date="2023-fall">
                        <img src="public/images/gallery/percussion-maple-fall2023-1.jpg" alt="Percussion Program at Maple Grove" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h4>Percussion Program</h4>
                                <p>Maple Grove Academy ‚Ä¢ Fall 2023</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Gallery Stats -->
                <div class="gallery-stats">
                    <div class="stats-item">
                        <span class="stats-number" id="totalPhotos">16</span>
                        <span class="stats-label">Total Photos</span>
                    </div>
                    <div class="stats-item">
                        <span class="stats-number" id="filteredPhotos">16</span>
                        <span class="stats-label">Showing</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Login Modal -->
    <div class="modal-overlay" id="loginModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Sign In to CSA Gallery</h3>
                <button class="modal-close" id="modalClose">&times;</button>
            </div>
            <div class="modal-body">
                <form class="login-form" id="loginForm">
                    <div class="form-group">
                        <label for="loginEmail">Email Address</label>
                        <input type="email" id="loginEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Password</label>
                        <input type="password" id="loginPassword" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full" id="loginSubmit">Sign In</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div class="modal-overlay" id="registerModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Create CSA Account</h3>
                <button class="modal-close" id="registerModalClose">&times;</button>
            </div>
            <div class="modal-body">
                <form class="register-form" id="registerForm">
                    <div class="form-group">
                        <label for="registerName">Full Name</label>
                        <input type="text" id="registerName" required>
                    </div>
                    <div class="form-group">
                        <label for="registerEmail">Email Address</label>
                        <input type="email" id="registerEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="registerPassword">Password</label>
                        <input type="password" id="registerPassword" required minlength="6">
                    </div>
                    <div class="form-group">
                        <label for="confirmPassword">Confirm Password</label>
                        <input type="password" id="confirmPassword" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">Create Account</button>
                </form>
                
                <div class="auth-links">
                    <p>Already have an account? <a href="#" id="showLogin">Sign in here</a></p>
                </div>
            </div>
        </div>
    </div>



    <!-- Testimonials Section -->
    <section class="testimonials" id="testimonials">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">What Educators Say</h2>
                <p class="section-subtitle">Hear from school leaders who have transformed their programs with CSA</p>
            </div>
            
            <div class="testimonials-grid">
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        <p class="testimonial-text">
                            "CSA's programs have completely transformed our approach to PE and music education. Student engagement is at an all-time high, and we've seen measurable improvements in both academic performance and school culture."
                        </p>
                    </div>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <img src="public/images/testimonials/testimonial-1.jpg" alt="Sarah Martinez" loading="lazy">
                        </div>
                        <div class="author-info">
                            <h4 class="author-name">Sarah Martinez</h4>
                            <p class="author-title">Principal, Oakwood Elementary</p>
                        </div>
                    </div>
                </div>
                
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        <p class="testimonial-text">
                            "The quality of instruction and curriculum is exceptional. Our teachers appreciate the professional development opportunities, and parents consistently praise the program's impact on their children."
                        </p>
                    </div>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <img src="public/images/testimonials/testimonial-1.jpg" alt="Michael Chen" loading="lazy">
                        </div>
                        <div class="author-info">
                            <h4 class="author-name">Michael Chen</h4>
                            <p class="author-title">PE Coordinator, Riverside District</p>
                        </div>
                    </div>
                </div>
                
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        <p class="testimonial-text">
                            "Implementation was seamless, and the ongoing support is outstanding. CSA makes it easy for administrators to provide high-quality programs without the typical headaches of program management."
                        </p>
                    </div>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <img src="public/images/testimonials/testimonial-1.jpg" alt="Jennifer Walsh" loading="lazy">
                        </div>
                        <div class="author-info">
                            <h4 class="author-name">Jennifer Walsh</h4>
                            <p class="author-title">Assistant Principal, Maple Grove</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section class="contact" id="contact">
        <div class="container">
            <div class="contact-content">
                <div class="contact-info">
                   <div class="section-header">
    <h2>Ready to Get Started?</h2>
    <p class="section-subtitle">
        Join the growing community of schools providing exceptional sports and music programs. Contact us to learn how CSA can enhance your educational offerings.
    </p>
</div>
                    
                    <div class="contact-details">
                        <div class="contact-item">
                            <div class="contact-icon">üìû</div>
                            <div class="contact-text">
                                <h4>Phone</h4>
                                <p>(555) 123-4567</p>
                            </div>
                        </div>
                        <div class="contact-item">
                            <div class="contact-icon">‚úâÔ∏è</div>
                            <div class="contact-text">
                                <h4>Email</h4>
                                <p>info@csaprograms.com</p>
                            </div>
                        </div>
                        <div class="contact-item">
                            <div class="contact-icon">üåç</div>
                            <div class="contact-text">
                                <h4>Service Area</h4>
                                <p>Nationwide Elementary Schools</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="contact-form-container">
                    <form class="contact-form" id="contactForm">
                        <div class="form-header">
                            <h3>Request Information</h3>
                            <p>Tell us about your school's needs</p>
                        </div>
                        
                        <div class="educator-check">
                            <label for="educatorRole">Are you an educator or administrator?</label>
                            <select id="educatorRole" name="educatorRole" required>
                                <option value="">Please select</option>
                                <option value="yes">Yes, I work in education</option>
                                <option value="no">No, I do not work in education</option>
                            </select>
                        </div>
                        
                        <div class="form-fields" id="formFields">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="firstName">First Name *</label>
                                    <input type="text" id="firstName" name="firstName" required>
                                </div>
                                <div class="form-group">
                                    <label for="lastName">Last Name *</label>
                                    <input type="text" id="lastName" name="lastName" required>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="email">Email Address *</label>
                                    <input type="email" id="email" name="email" required>
                                </div>
                                <div class="form-group">
                                    <label for="phone">Phone Number</label>
                                    <input type="tel" id="phone" name="phone">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="school">School/District Name *</label>
                                    <input type="text" id="school" name="school" required>
                                </div>
                                <div class="form-group">
                                    <label for="position">Your Position *</label>
                                    <select id="position" name="position" required>
                                        <option value="">Select position</option>
                                        <option value="principal">Principal</option>
                                        <option value="assistant-principal">Assistant Principal</option>
                                        <option value="pe-coordinator">PE Coordinator</option>
                                        <option value="music-coordinator">Music Coordinator</option>
                                        <option value="program-director">Program Director</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="programs">Programs of Interest</label>
                                <select id="programs" name="programs">
                                    <option value="">Select programs</option>
                                    <option value="sports">Sports Programs</option>
                                    <option value="dance">Dance Programs</option>
                                    <option value="choir">Choir Programs</option>
                                    <option value="percussion">Percussion Programs</option>
                                    <option value="multiple">Multiple Programs</option>
                                    <option value="all">All Programs</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="message">Message</label>
                                <textarea id="message" name="message" rows="4" placeholder="Tell us about your school's goals and how we can help..."></textarea>
                            </div>
                            
                            <button type="submit" class="btn btn-primary btn-full">Send Message</button>
                        </div>
                        
                        <div class="non-educator-message" id="nonEducatorMessage">
                            <div class="message-content">
                                <h4>Thank You for Your Interest!</h4>
                                <p>Our programs are designed specifically for elementary schools and educational institutions. If you're a parent interested in these programs, please contact your child's school administration to inquire about partnering with CSA.</p>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
   <div class="logo">
       <img src="public/images/logo.png" alt="CSA Logo" class="logo-image">
   </div>
</div>
                
                <div class="footer-section">
                    <h4>Programs</h4>
                    <ul class="footer-links">
                        <li><a href="#programs">Sports Programs</a></li>
                        <li><a href="#programs">Dance Programs</a></li>
                        <li><a href="#programs">Choir Programs</a></li>
                        <li><a href="#programs">Percussion Programs</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>For Schools</h4>
                    <ul class="footer-links">
                        <li><a href="#about">Why Choose CSA</a></li>
                        <li><a href="#testimonials">Success Stories</a></li>
                        <li><a href="#contact">Get Started</a></li>
                        <li><a href="#contact">Schedule Demo</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
    <h4>Contact Info</h4>
    <ul class="footer-links">
        <li><a href="tel:+1234567890">+1 (234) 567-8900</a></li>
        <li><a href="mailto:contact@yourcompany.com">contact@CSA.com</a></li>
    </ul>
</div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 Community Sports & Arts. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Notification -->
    <div class="notification" id="notification">
        <div class="notification-content">
            <span class="notification-text" id="notificationText"></span>
            <button class="notification-close" id="notificationClose">&times;</button>
        </div>
    </div>

    <!-- Scripts -->
<!-- Loader Script -->
<script>
// ULTRA-OPTIMIZED BUTTERY SMOOTH LOADER - MAXIMUM PERFORMANCE WITH PERFECT POSITIONING
(function() {
    'use strict';
    
    let progressValue = 0;
    let targetProgress = 0;
    let animationId;
    let hasStarted = false;
    let isComplete = false;
    let originalScrollPosition = 0;
    
    // High-performance variables
    let lastFrameTime = 0;
    let progressBar, progressRing, companyText, progressContainer;
    const circumference = 2 * Math.PI * 150;
    
    // Ultra-fast scroll prevention
    function preventScrolling() {
        originalScrollPosition = window.pageYOffset || document.documentElement.scrollTop;
        
        // Safely add classes and styles
        if (document.documentElement) {
            document.documentElement.classList.add('loading-active');
        }
        if (document.body) {
            document.body.classList.add('loading-active');
            document.body.style.top = `-${originalScrollPosition}px`;
        }
        
        if ('scrollRestoration' in history) {
            history.scrollRestoration = 'manual';
        }
        
        document.addEventListener('wheel', preventScroll, { passive: false });
        document.addEventListener('touchmove', preventScroll, { passive: false });
        document.addEventListener('keydown', preventScrollKeys, { passive: false });
    }
    
    function allowScrolling() {
        if (document.documentElement) {
            document.documentElement.classList.remove('loading-active');
        }
        if (document.body) {
            document.body.classList.remove('loading-active');
            document.body.style.top = '';
        }
        
        window.scrollTo(0, originalScrollPosition);
        
        if ('scrollRestoration' in history) {
            history.scrollRestoration = 'auto';
        }
        
        document.removeEventListener('wheel', preventScroll);
        document.removeEventListener('touchmove', preventScroll);
        document.removeEventListener('keydown', preventScrollKeys);
    }
    
    function preventScroll(e) {
        e.preventDefault();
        e.stopPropagation();
        return false;
    }
    
    function preventScrollKeys(e) {
        const scrollKeys = [32, 33, 34, 35, 36, 37, 38, 39, 40];
        if (scrollKeys.includes(e.keyCode)) {
            e.preventDefault();
            e.stopPropagation();
            return false;
        }
    }
    
    // PRECISE HERO POSITIONING
    function getHeroPosition() {
        const actualHeroLogo = document.querySelector('.hero-logo');
        if (actualHeroLogo) {
            const rect = actualHeroLogo.getBoundingClientRect();
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            return {
                top: rect.top + scrollTop + (rect.height / 2),
                left: rect.left + (rect.width / 2)
            };
        }
        return {
            top: window.innerHeight / 2,
            left: window.innerWidth / 2
        };
    }
    
    // LIGHTNING-FAST progress animation with 60fps smoothness
    function updateProgressInstant(newTarget) {
        targetProgress = newTarget;
        
        if (!animationId) {
            animationId = requestAnimationFrame(ultraSmoothProgress);
        }
    }
    
    function ultraSmoothProgress(currentTime) {
        if (currentTime - lastFrameTime < 16.67) { // 60fps cap
            animationId = requestAnimationFrame(ultraSmoothProgress);
            return;
        }
        lastFrameTime = currentTime;
        
        // ULTRA-FAST interpolation - catches up in 8 frames max
        const diff = targetProgress - progressValue;
        const speed = Math.abs(diff) > 20 ? 0.25 : 0.15; // Faster for big jumps
        
        progressValue += diff * speed;
        
        // Lightning-fast progress bar update
        if (progressBar) {
            const offset = circumference - (progressValue / 100) * circumference;
            progressBar.style.strokeDashoffset = offset;
        }
        
        // Continue animation if not at target
        if (Math.abs(diff) > 0.1) {
            animationId = requestAnimationFrame(ultraSmoothProgress);
        } else {
            progressValue = targetProgress;
            animationId = null;
            
            // Trigger emissive instantly at 100%
            if (targetProgress >= 100) {
                triggerEmissiveInstant();
            }
        }
    }
    
    // Create dynamic lightning success effect
    function createSuccessLightning() {
        const lightning = document.createElement('div');
        lightning.className = 'success-lightning';
        lightning.innerHTML = `
            <div class="lightning-flash"></div>
            <div class="lightning-particles"></div>
            <div class="success-pulse"></div>
        `;
        if (progressContainer) {
            progressContainer.appendChild(lightning);
            setTimeout(() => lightning.classList.add('active'), 50);
        }
        return lightning;
    }
    
    // INSTANT emissive state activation with success effects
    function triggerEmissiveInstant() {
        if (!progressBar || !progressContainer) return;
        
        // Immediate emissive activation
        progressBar.classList.add('emissive', 'success-mode');
        progressContainer.classList.add('emissive', 'success-active');
        
        // Add success ring animation
        if (progressRing) {
            progressRing.classList.remove('animating');
            progressRing.classList.add('success-complete');
        }
        
        // Create lightning effect
        const lightning = createSuccessLightning();
        
        // Fast text reveal - starts immediately
        if (companyText) {
            companyText.style.animation = 'ultraFastReveal 600ms cubic-bezier(0.19, 1, 0.22, 1) forwards';
            companyText.style.opacity = '1';
            
            // Quick glow activation
            setTimeout(() => {
                companyText.classList.add('glow-active');
            }, 200);
        }
        
        // Fast exit sequence - much shorter duration
        setTimeout(() => {
            startFastExit();
            // Clean up lightning effect
            if (lightning && lightning.parentNode) {
                lightning.parentNode.removeChild(lightning);
            }
        }, 1500); // Reduced from 2800ms
    }
    
    // LIGHTNING-FAST exit sequence with perfect positioning
    function startFastExit() {
        // Instant text fade
        if (companyText) {
            companyText.classList.remove('glow-active');
            companyText.style.animation = 'ultraFastExit 400ms cubic-bezier(0.19, 1, 0.22, 1) forwards';
        }
        
        // Instant progress fade
        setTimeout(() => {
            if (progressBar && progressContainer) {
                progressBar.style.transition = 'opacity 300ms cubic-bezier(0.19, 1, 0.22, 1)';
                progressContainer.style.transition = 'opacity 300ms cubic-bezier(0.19, 1, 0.22, 1)';
                progressBar.style.opacity = '0';
                progressContainer.style.opacity = '0';
            }
        }, 100);
        
        // Fast completion
        setTimeout(() => {
            completeLoadingInstant();
        }, 300);
    }
    
    // INSTANT completion with precise hero positioning
    function completeLoadingInstant() {
        if (isComplete) return;
        isComplete = true;
        
        const loader = document.getElementById('loader');
        const loaderHeroLogo = document.getElementById('loaderHeroLogo');
        
        // PERFECT POSITIONING - Get hero position and apply precise scaling
        if (loaderHeroLogo) {
            const heroPos = getHeroPosition();
            
            // Apply the perfect positioning and scaling
            loaderHeroLogo.style.top = heroPos.top + 'px';
            loaderHeroLogo.style.left = heroPos.left + 'px';
            loaderHeroLogo.style.transform = 'translate(-50%, -50%) scale(1.03)';
            loaderHeroLogo.style.transition = 'all 300ms cubic-bezier(0.19, 1, 0.22, 1)';
            loaderHeroLogo.classList.add('success-transition');
            loaderHeroLogo.classList.add('move-to-position');
        }
        
        // Instant final fade
        setTimeout(() => {
            if (loader) {
                loader.style.transition = 'opacity 600ms cubic-bezier(0.19, 1, 0.22, 1)';
                loader.classList.add('fade-out');
                
                setTimeout(() => {
                    if (loader && loader.parentNode) {
                        loader.parentNode.removeChild(loader);
                    }
                    allowScrolling();
                }, 600);
            }
        }, 150);
    }
    
    // OPTIMIZED initialization - cache elements immediately
    function initializeUltraFast() {
        preventScrolling();
        
        // Cache all elements for performance
        progressBar = document.querySelector('.progress-bar');
        progressRing = document.querySelector('.progress-ring');
        companyText = document.querySelector('.company-name-text');
        progressContainer = document.querySelector('.progress-container');
        const loaderHeroLogo = document.getElementById('loaderHeroLogo');
        
        // Setup progress bar for maximum performance
        if (progressBar) {
            progressBar.style.strokeDasharray = circumference;
            progressBar.style.strokeDashoffset = circumference;
            progressBar.style.willChange = 'stroke-dashoffset';
        }
        
        // Instant logo appearance
        if (loaderHeroLogo) {
            setTimeout(() => {
                loaderHeroLogo.style.transition = 'all 400ms cubic-bezier(0.19, 1, 0.22, 1)';
                loaderHeroLogo.classList.add('animate-in');
            }, 100);
        }
        
        // Start progress ring animation immediately
        if (progressRing) {
            hasStarted = true;
            progressRing.classList.add('animating');
            
            // Add vibrant mode for color cycling
            if (progressBar) {
                progressBar.classList.add('vibrant-mode');
            }
        }
        
        // Show company text during progress - faster timing
        setTimeout(() => {
            if (companyText) {
                companyText.style.animation = 'dramaticReveal 1.8s ease-out forwards';
            }
        }, 300);
        
        // AGGRESSIVE loading sequence - much faster progression
        const fastSteps = [
            { progress: 25, delay: 200 },
            { progress: 50, delay: 400 },
            { progress: 75, delay: 600 },
            { progress: 95, delay: 800 },
            { progress: 100, delay: 1000 }
        ];
        
        fastSteps.forEach(step => {
            setTimeout(() => {
                updateProgressInstant(step.progress);
            }, step.delay);
        });
    }
    
    // Wait for body to exist before initializing
    function waitForBodyAndInit() {
        if (document.body) {
            initializeUltraFast();
        } else {
            setTimeout(waitForBodyAndInit, 10);
        }
    }
    
    // Initialize when ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', waitForBodyAndInit);
    } else {
        waitForBodyAndInit();
    }
    
    // Emergency bailout
    setTimeout(() => {
        if (!isComplete) {
            completeLoadingInstant();
        }
    }, 4000);
    
    // Handle visibility
    document.addEventListener('visibilitychange', () => {
        if (document.hidden && !isComplete) {
            setTimeout(completeLoadingInstant, 50);
        }
    });
    
})();
</script>

<!-- Main Script (keep as module) -->
<!-- Main Script (inlined) -->
<script type="module">
// main.js - Simplified Firebase Authentication (Login Only)
import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js';
import { 
    getAuth, 
    onAuthStateChanged, 
    signInWithEmailAndPassword, 
    signOut
} from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js';

// Firebase Configuration
const firebaseConfig = {
    apiKey: import.meta.env.VITE_FIREBASE_API_KEY,
    authDomain: import.meta.env.VITE_FIREBASE_AUTH_DOMAIN,
    projectId: import.meta.env.VITE_FIREBASE_PROJECT_ID,
    storageBucket: import.meta.env.VITE_FIREBASE_STORAGE_BUCKET,
    messagingSenderId: import.meta.env.VITE_FIREBASE_MESSAGING_SENDER_ID,
    appId: import.meta.env.VITE_FIREBASE_APP_ID
};

// Validate configuration
if (!firebaseConfig.apiKey || firebaseConfig.apiKey === 'undefined') {
    alert('Firebase not configured. Please check your environment variables.');
}

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

// Global state
let currentUser = null;
let allGalleryItems = [];

// ==================== AUTHENTICATION FUNCTIONS ====================

// Auth state observer
onAuthStateChanged(auth, (user) => {
    currentUser = user;
    updateUIForAuthState(user);
    
    if (user) {
        showNotification(`Welcome, ${user.displayName || user.email.split('@')[0]}`);
        showGalleryContent();
    } else {
        hideGalleryContent();
    }
});

// Update UI based on auth state
function updateUIForAuthState(user) {
    const authButtons = document.getElementById('authButtons');
    const userInfo = document.getElementById('userInfo');
    const userName = document.getElementById('userName');
    
    if (user) {
        authButtons?.classList.add('hidden');
        userInfo?.classList.remove('hidden');
        if (userName) userName.textContent = user.displayName || user.email.split('@')[0];
    } else {
        authButtons?.classList.remove('hidden');
        userInfo?.classList.add('hidden');
    }
}

// Sign in with email and password
async function signInWithEmail(email, password) {
    const userCredential = await signInWithEmailAndPassword(auth, email, password);
    closeModal('loginModal');
    return userCredential.user;
}

// Sign out
async function signOutUser() {
    await signOut(auth);
    showNotification('Signed out successfully');
}

// Logo loading fix
document.addEventListener('DOMContentLoaded', () => {
    const heroLogoImg = document.querySelector('.hero-logo-image');
    
    if (heroLogoImg) {
        const testImage = new Image();
        testImage.onload = function() {
            heroLogoImg.classList.add('loaded');
        };
        testImage.onerror = function() {
            // Image failed - fallback will show automatically
        };
        testImage.src = heroLogoImg.src;
    }
});

// ==================== MODAL FUNCTIONS ====================

function showModal(modalId) {
    const modal = document.getElementById(modalId);
    if (modal) {
        modal.classList.add('active');
        document.body.style.overflow = 'hidden';
    }
}

function closeModal(modalId) {
    const modal = document.getElementById(modalId);
    if (modal) {
        modal.classList.remove('active');
        document.body.style.overflow = '';
        
        // Reset forms and styling
        modal.querySelectorAll('form').forEach(form => form.reset());
        modal.querySelectorAll('input').forEach(input => {
            input.style.borderColor = '#e0e0e0';
        });
    }
}

// ==================== ERROR HANDLING ====================

function handleAuthError(error) {
    const errorMessages = {
        'auth/user-not-found': 'No account found with this email',
        'auth/wrong-password': 'Incorrect password',
        'auth/invalid-email': 'Invalid email address',
        'auth/network-request-failed': 'Network error - check your connection',
        'auth/too-many-requests': 'Too many failed attempts. Please try again later.',
        'auth/user-disabled': 'This account has been disabled'
    };
    
    const message = errorMessages[error.code] || error.message || 'Authentication error occurred';
    showNotification(message, 'error');
}

// ==================== NOTIFICATION SYSTEM ====================

function showNotification(message, type = 'success') {
    const notification = document.getElementById('notification');
    const notificationText = document.getElementById('notificationText');
    
    if (notificationText) notificationText.textContent = message;
    if (notification) {
        notification.className = `notification ${type}`;
        notification.classList.add('show');
        
        setTimeout(() => notification.classList.remove('show'), 5000);
    }
}

// ==================== GALLERY FUNCTIONS ====================

function showGalleryContent() {
    const authRequired = document.getElementById('authRequired');
    const galleryContent = document.getElementById('galleryContent');
    
    if (authRequired) authRequired.style.display = 'none';
    if (galleryContent) {
        galleryContent.classList.remove('hidden');
        setTimeout(initializeGallery, 100);
    }
}

function hideGalleryContent() {
    const authRequired = document.getElementById('authRequired');
    const galleryContent = document.getElementById('galleryContent');
    
    if (authRequired) authRequired.style.display = 'block';
    if (galleryContent) galleryContent.classList.add('hidden');
}

function initializeGallery() {
    allGalleryItems = Array.from(document.querySelectorAll('.gallery-item'));
    updatePhotoCount();
    
    // Add filter event listeners
    ['programFilter', 'locationFilter', 'dateFilter'].forEach(filterId => {
        const filter = document.getElementById(filterId);
        if (filter) filter.addEventListener('change', filterGallery);
    });
    
    const resetBtn = document.getElementById('filterReset');
    if (resetBtn) resetBtn.addEventListener('click', resetFilters);
}

function filterGallery() {
    const filters = {
        program: document.getElementById('programFilter')?.value || 'all',
        location: document.getElementById('locationFilter')?.value || 'all',
        date: document.getElementById('dateFilter')?.value || 'all'
    };
    
    let visibleCount = 0;
    
    allGalleryItems.forEach(item => {
        const matches = Object.entries(filters).every(([key, value]) => 
            value === 'all' || item.dataset[key] === value
        );
        
        if (matches) {
            item.classList.remove('hidden');
            visibleCount++;
        } else {
            item.classList.add('hidden');
        }
    });
    
    const filteredPhotos = document.getElementById('filteredPhotos');
    if (filteredPhotos) filteredPhotos.textContent = visibleCount;
}

function resetFilters() {
    ['programFilter', 'locationFilter', 'dateFilter'].forEach(filterId => {
        const filter = document.getElementById(filterId);
        if (filter) filter.value = 'all';
    });
    
    allGalleryItems.forEach(item => item.classList.remove('hidden'));
    updatePhotoCount();
}

function updatePhotoCount() {
    const total = allGalleryItems.length;
    const visible = allGalleryItems.filter(item => !item.classList.contains('hidden')).length;
    
    const totalEl = document.getElementById('totalPhotos');
    const visibleEl = document.getElementById('filteredPhotos');
    
    if (totalEl) totalEl.textContent = total;
    if (visibleEl) visibleEl.textContent = visible;
}

// ==================== NAVIGATION & UI ====================

// Header scroll effect
let lastScrollY = window.scrollY;

// Function to check if device is mobile
function isMobile() {
    return window.innerWidth <= 768; // Adjust breakpoint as needed
}

window.addEventListener('scroll', () => {
    const currentScrollY = window.scrollY;
    const header = document.getElementById('header');
    
    if (!header) return;
    
    // Always apply scrolled class for styling (works on all devices)
    if (currentScrollY > 50) {
        header.classList.add('scrolled');
    } else {
        header.classList.remove('scrolled');
    }
    
    // Only apply hide/show transform on mobile devices
    if (isMobile()) {
        if (currentScrollY > lastScrollY && currentScrollY > 100) {
            header.style.transform = 'translateY(-100%)';
        } else {
            header.style.transform = 'translateY(0)';
        }
    } else {
        // Ensure header is always visible on desktop
        header.style.transform = 'translateY(0)';
    }
    
    lastScrollY = currentScrollY;
});

// Reset header position on window resize to handle orientation changes
window.addEventListener('resize', () => {
    const header = document.getElementById('header');
    if (!header) return;
    
    if (!isMobile()) {
        header.style.transform = 'translateY(0)';
    }
});

// Mobile navigation
function setupMobileNav() {
    const navToggle = document.getElementById('navToggle');
    const navMenu = document.getElementById('navMenu');
    
    if (!navToggle || !navMenu) return;
    
    navToggle.addEventListener('click', () => {
        navToggle.classList.toggle('active');
        navMenu.classList.toggle('active');
        document.body.style.overflow = navMenu.classList.contains('active') ? 'hidden' : '';
    });
    
    navMenu.addEventListener('click', (e) => {
        if (e.target.classList.contains('nav-link')) {
            navToggle.classList.remove('active');
            navMenu.classList.remove('active');
            document.body.style.overflow = '';
        }
    });
}

// Smooth scrolling
function setupSmoothScrolling() {
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', (e) => {
            e.preventDefault();
            const target = document.querySelector(anchor.getAttribute('href'));
            
            if (target) {
                const header = document.getElementById('header');
                const offset = header ? header.offsetHeight : 0;
                
                window.scrollTo({
                    top: target.offsetTop - offset,
                    behavior: 'smooth'
                });
            }
        });
    });
}

// Program cards
function setupProgramCards() {
    document.querySelectorAll('.program-card').forEach(card => {
        card.addEventListener('click', () => {
            const program = card.dataset.program;
            
            if (currentUser) {
                const filter = document.getElementById('programFilter');
                if (filter) {
                    filter.value = program || 'all';
                    filterGallery();
                    document.getElementById('gallery')?.scrollIntoView({ behavior: 'smooth' });
                }
            } else {
                showModal('loginModal');
                showNotification('Please sign in to view gallery', 'error');
            }
        });
    });
}



// ==================== EVENT LISTENERS ====================

document.addEventListener('DOMContentLoaded', () => {
    // Initialize UI components
    setupMobileNav();
    setupSmoothScrolling();
    setupProgramCards();
        
    // Auth buttons
    const loginBtn = document.getElementById('loginBtn');
    const galleryLoginBtn = document.getElementById('galleryLoginBtn');
    const logoutBtn = document.getElementById('logoutBtn');
    
    if (loginBtn) {
        loginBtn.addEventListener('click', () => {
            showModal('loginModal');
        });
    }
    
    if (galleryLoginBtn) {
        galleryLoginBtn.addEventListener('click', () => showModal('loginModal'));
    }
    
    if (logoutBtn) {
        logoutBtn.addEventListener('click', signOutUser);
    }
    
    // Modal controls
    document.querySelectorAll('.modal-close').forEach(btn => {
        btn.addEventListener('click', (e) => {
            const modal = e.target.closest('.modal-overlay');
            if (modal) closeModal(modal.id);
        });
    });
    
    document.querySelectorAll('.modal-overlay').forEach(overlay => {
        overlay.addEventListener('click', (e) => {
            if (e.target === overlay) closeModal(overlay.id);
        });
    });
    
    // Login form
    const loginForm = document.getElementById('loginForm');
    if (loginForm) {
        loginForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;
            const submitBtn = document.getElementById('loginSubmit');
            
            if (!email || !password) {
                showNotification('Please fill in all fields', 'error');
                return;
            }
            
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'Signing In...';
            submitBtn.disabled = true;
            
            try {
                await signInWithEmail(email, password);
                showNotification('Successfully signed in!');
            } catch (error) {
                handleAuthError(error);
            } finally {
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
            }
        });
    }
    
    // Notification close
    const notificationClose = document.getElementById('notificationClose');
    if (notificationClose) {
        notificationClose.addEventListener('click', () => {
            document.getElementById('notification')?.classList.remove('show');
        });
    }
    
    // Keyboard shortcuts
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
            // Close all modals
            document.querySelectorAll('.modal-overlay.active').forEach(modal => {
                closeModal(modal.id);
            });
            
            // Close notification
            document.getElementById('notification')?.classList.remove('show');
        }
    });
});

// Manual trigger for testing
window.manualStartCounters = function() {
    document.querySelectorAll('.stat-number[data-count]').forEach((element, index) => {
        const target = parseInt(element.dataset.count);
        setTimeout(() => {
            startCounter(element, target);
        }, index * 200);
    });
};
</script>

<!-- Parallax Script -->
<script>
// parallax.js
// Updated parallax.js - Compatible with Video Cycling
// Replace your existing parallax.js content with this

(function() {
    'use strict';
    
    let stickyApplied = false;
    let isNavigatingHome = false;
    
    function startParallax() {
        console.log('Starting parallax animation...');
        
        const hero = document.getElementById('home');
        const programs = document.getElementById('programs');
        
        if (!hero) {
            console.error('Hero section with ID "home" not found');
            return;
        }
        
        if (!programs) {
            console.error('Programs section with ID "programs" not found');
            return;
        }
        
        console.log('Elements found, setting up parallax...');
        
        // Set initial hero positioning
        hero.style.position = 'sticky';
        hero.style.top = '0';
        hero.style.zIndex = '1';
        stickyApplied = true;
        
        // Ensure programs section overlays properly
        programs.style.position = 'relative';
        programs.style.zIndex = '10';
        programs.style.backgroundColor = '#f8f9fa';
        programs.style.borderRadius = '24px 24px 0 0';
        programs.style.boxShadow = '0 -20px 40px rgba(0, 0, 0, 0.1)';
        
        // Ensure all sections after programs are visible
        const sectionsAfterPrograms = ['gallery', 'about', 'testimonials', 'contact'];
        sectionsAfterPrograms.forEach(sectionId => {
            const section = document.getElementById(sectionId);
            if (section) {
                section.style.position = 'relative';
                section.style.zIndex = '10';
            }
        });
        
        const footer = document.querySelector('.footer');
        if (footer) {
            footer.style.position = 'relative';
            footer.style.zIndex = '10';
        }
        
        function resetHeroToNormal() {
            hero.style.position = 'relative';
            hero.style.top = '';
            hero.style.zIndex = '';
            stickyApplied = false;
            
            // Reset all parallax effects
            const elementsToReset = [
                hero.querySelector('.hero-content'),
                hero.querySelector('.video-container'), // Updated: target video-container instead of individual videos
                hero.querySelector('.hero-logo'),
                hero.querySelector('.hero-actions'),
                hero.querySelector('.hero-text-container'),
                hero.querySelector('.scroll-indicator'),
                hero.querySelector('.hero-overlay')
            ];
            
            elementsToReset.forEach(element => {
                if (element) {
                    element.style.opacity = '';
                    element.style.transform = '';
                    element.style.filter = '';
                    element.style.backgroundColor = '';
                    element.style.transition = '';
                }
            });
        }
        
        function applyParallax() {
            const scrollY = window.pageYOffset || (document.documentElement ? document.documentElement.scrollTop : 0);
            const windowHeight = window.innerHeight;
            
            // Don't do anything if we're navigating home
            if (isNavigatingHome) {
                return;
            }
            
            // Only reset to relative when at the very top
            if (scrollY <= 2 && stickyApplied) {
                hero.style.position = 'relative';
                hero.style.top = '';
                stickyApplied = false;
                console.log('At top - reset to relative positioning');
                return;
            }
            
            // Apply sticky positioning when scrolling
            if (scrollY > 2 && !stickyApplied) {
                hero.style.position = 'sticky';
                hero.style.top = '0';
                hero.style.zIndex = '1';
                stickyApplied = true;
                console.log('Sticky positioning applied at scroll:', scrollY);
            }
            
            // Apply parallax effects only if sticky is active and we have some scroll
            if (stickyApplied && scrollY > 10) {
                const startTrigger = windowHeight * 0.1;
                const endTrigger = windowHeight * 1.2;
                const progress = Math.max(0, Math.min(1, (scrollY - startTrigger) / (endTrigger - startTrigger)));
                const easedProgress = easeOutCubic(progress);
                
                if (progress > 0) {
                    // Get hero elements
                    const heroContent = hero.querySelector('.hero-content');
                    const videoContainer = hero.querySelector('.video-container'); // Updated: target container
                    const heroLogo = hero.querySelector('.hero-logo');
                    const heroActions = hero.querySelector('.hero-actions');
                    const heroTextContainer = hero.querySelector('.hero-text-container');
                    const scrollIndicator = hero.querySelector('.scroll-indicator');
                    const heroOverlay = hero.querySelector('.hero-overlay');
                    
                    if (heroContent) {
                        const scale = 1 - (easedProgress * 0.02);
                        heroContent.style.transform = `scale(${scale})`;
                        heroContent.style.transition = 'none';
                    }
                    
                    // Updated: Apply effects to video container instead of individual videos
                    if (videoContainer) {
                        const scale = 1 + (easedProgress * 0.03);
                        const opacity = 1 - (easedProgress * 0.3);
                        videoContainer.style.transform = `scale(${scale})`;
                        videoContainer.style.opacity = opacity;
                        videoContainer.style.transition = 'none';
                    }
                    
                    if (heroLogo) {
                        const opacity = 1 - easedProgress;
                        const scale = 1 - (easedProgress * 0.03);
                        heroLogo.style.opacity = opacity;
                        heroLogo.style.transform = `scale(${scale})`;
                        heroLogo.style.transition = 'none';
                    }
                    
                    if (heroActions) {
                        const opacity = 1 - easedProgress;
                        const scale = 1 - (easedProgress * 0.02);
                        heroActions.style.opacity = opacity;
                        heroActions.style.transform = `scale(${scale})`;
                        heroActions.style.transition = 'none';
                    }
                    
                    if (heroTextContainer) {
    const scale = 1 - (easedProgress * 0.02); // Slightly more pronounced scaling
    const opacity = 1 - (easedProgress * 0.8); // Fade out effect
    heroTextContainer.style.transform = `scale(${scale})`;
    heroTextContainer.style.opacity = Math.max(0, opacity);
    heroTextContainer.style.transition = 'none';
}
                    
                    if (scrollIndicator) {
                        const opacity = 1 - (easedProgress * 1.5);
                        const scale = 1 - (easedProgress * 0.05);
                        scrollIndicator.style.opacity = Math.max(0, opacity);
                        scrollIndicator.style.transform = `translateX(-50%) scale(${scale})`;
                        scrollIndicator.style.transition = 'none';
                    }
                    
                    if (heroOverlay) {
                        const overlayOpacity = 0.5 + (easedProgress * 0.3);
                        heroOverlay.style.backgroundColor = `rgba(0, 0, 0, ${overlayOpacity})`;
                        heroOverlay.style.transition = 'none';
                    }
                }
            }
        }
        
        function easeOutCubic(t) {
            return 1 - Math.pow(1 - t, 3);
        }
        
        let ticking = false;
        
        function onScroll() {
            if (!ticking) {
                requestAnimationFrame(() => {
                    applyParallax();
                    ticking = false;
                });
                ticking = true;
            }
        }
        
        window.addEventListener('scroll', onScroll, { passive: true });
        
        // Handle Home navigation specially
        document.addEventListener('click', (e) => {
            const navLink = e.target.closest('a[href^="#"]');
            if (navLink) {
                const targetId = navLink.getAttribute('href');
                
                if (targetId === '#home') {
                    console.log('Home navigation clicked');
                    isNavigatingHome = true;
                    
                    // Immediately reset everything
                    resetHeroToNormal();
                    
                    // Override the smooth scroll behavior for home
                    e.preventDefault();
                    
                    // Scroll to top immediately
                    window.scrollTo({
                        top: 0,
                        behavior: 'smooth'
                    });
                    
                    // Re-enable parallax after scroll completes
                    setTimeout(() => {
                        isNavigatingHome = false;
                        console.log('Home navigation complete - parallax re-enabled');
                        // Force immediate check
                        applyParallax();
                    }, 1000);
                }
            }
        });
        
        // Initial call
        applyParallax();
        
        console.log('Parallax animation setup complete');
    }
    
    // Wait for elements to exist before initializing
    function waitForElementsAndInit() {
        const hero = document.getElementById('home');
        const programs = document.getElementById('programs');
        
        if (hero && programs) {
            startParallax();
        } else {
            setTimeout(waitForElementsAndInit, 100);
        }
    }
    
    // Initialize when DOM is ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', waitForElementsAndInit);
    } else {
        waitForElementsAndInit();
    }
    
    // Backup initialization
    setTimeout(waitForElementsAndInit, 1000);
    
})();
</script>
<!-- Contact Form Script (add this after the parallax script) -->
<script>
// Contact Form Functionality
document.addEventListener('DOMContentLoaded', () => {
    const educatorRole = document.getElementById('educatorRole');
    const formFields = document.getElementById('formFields');
    const nonEducatorMessage = document.getElementById('nonEducatorMessage');
    const contactForm = document.getElementById('contactForm');

    // Educator role selection
    if (educatorRole) {
        educatorRole.addEventListener('change', (e) => {
            const value = e.target.value;
            
            if (value === 'yes') {
                if (formFields) formFields.classList.add('active');
                if (nonEducatorMessage) nonEducatorMessage.classList.remove('active');
            } else if (value === 'no') {
                if (formFields) formFields.classList.remove('active');
                if (nonEducatorMessage) nonEducatorMessage.classList.add('active');
            } else {
                if (formFields) formFields.classList.remove('active');
                if (nonEducatorMessage) nonEducatorMessage.classList.remove('active');
            }
        });
    }

    // Form validation
    function validateForm() {
        const requiredFields = [
            'firstName',
            'lastName', 
            'email',
            'school',
            'position'
        ];
        
        let isValid = true;
        const errors = [];
        
        // Check if educator role is selected
        if (!educatorRole || educatorRole.value !== 'yes') {
            showNotification('Please confirm you are an educator to access the form.', 'error');
            return false;
        }
        
        // Validate required fields
        requiredFields.forEach(fieldName => {
            const field = document.getElementById(fieldName);
            if (field) {
                const value = field.value.trim();
                
                if (!value) {
                    field.style.borderColor = '#f44336';
                    errors.push(`${field.previousElementSibling.textContent.replace(' *', '')} is required`);
                    isValid = false;
                } else {
                    field.style.borderColor = '#e0e0e0';
                }
            }
        });
        
        // Validate email format
        const emailField = document.getElementById('email');
        if (emailField) {
            const emailValue = emailField.value.trim();
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            
            if (emailValue && !emailRegex.test(emailValue)) {
                emailField.style.borderColor = '#f44336';
                errors.push('Please enter a valid email address');
                isValid = false;
            }
        }
        
        // Show validation errors
        if (!isValid) {
            showNotification(errors[0], 'error');
        }
        
        return isValid;
    }

    // Form submission
    if (contactForm) {
        contactForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            if (!validateForm()) {
                return;
            }
            
            // Get form data
            const formData = new FormData(contactForm);
            const data = Object.fromEntries(formData.entries());
            
            // Show loading state
            const submitBtn = contactForm.querySelector('button[type="submit"]');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'Sending...';
            submitBtn.disabled = true;
            
            try {
                // Simulate form submission (replace with actual API call)
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // Show success message
                showNotification('Thank you! We\'ll contact you within 24 hours to discuss your school\'s needs.');
                
                // Reset form
                contactForm.reset();
                if (formFields) formFields.classList.remove('active');
                if (nonEducatorMessage) nonEducatorMessage.classList.remove('active');
                
                // Clear any error styling
                document.querySelectorAll('input, select, textarea').forEach(field => {
                    field.style.borderColor = '#e0e0e0';
                });
                
            } catch (error) {
                showNotification('There was an error sending your message. Please try again.', 'error');
            } finally {
                // Reset button state
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
            }
        });
    }

    // Real-time form field validation
    document.querySelectorAll('input, select, textarea').forEach(field => {
        field.addEventListener('blur', () => {
            if (field.hasAttribute('required') && !field.value.trim()) {
                field.style.borderColor = '#f44336';
            } else if (field.type === 'email' && field.value.trim()) {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                field.style.borderColor = emailRegex.test(field.value.trim()) ? '#e0e0e0' : '#f44336';
            } else {
                field.style.borderColor = '#e0e0e0';
            }
        });
        
        field.addEventListener('input', () => {
            if (field.style.borderColor === 'rgb(244, 67, 54)') {
                field.style.borderColor = '#e0e0e0';
            }
        });
    });

    // Set initial states
    if (formFields) formFields.classList.remove('active');
    if (nonEducatorMessage) nonEducatorMessage.classList.remove('active');
});

// Notification function (if not already defined)
if (typeof showNotification === 'undefined') {
    function showNotification(message, type = 'success') {
        const notification = document.getElementById('notification');
        const notificationText = document.getElementById('notificationText');
        
        if (notificationText) notificationText.textContent = message;
        if (notification) {
            notification.className = `notification ${type}`;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 5000);
        }
    }
}
// Professional Active Section Tracking
(function() {
    'use strict';
    
    let isInitialized = false;
    let currentSection = null;
    
    function initSectionTracking() {
        if (isInitialized) return;
        
        const navLinks = document.querySelectorAll('.nav-link[href^="#"]');
        const sections = document.querySelectorAll('section[id]');
        
        if (!navLinks.length || !sections.length) {
            setTimeout(initSectionTracking, 200);
            return;
        }
        
        isInitialized = true;
        
        function setActiveSection(sectionId) {
            if (currentSection === sectionId) return;
            
            navLinks.forEach(link => link.classList.remove('active'));
            
            const activeLink = document.querySelector(`.nav-link[href="#${sectionId}"]`);
            if (activeLink) {
                activeLink.classList.add('active');
                currentSection = sectionId;
            }
        }
        
        function getCurrentSection() {
            const scrollPos = window.pageYOffset + 100;
            
            if (scrollPos < 200) return 'home';
            
            for (let i = sections.length - 1; i >= 0; i--) {
                const section = sections[i];
                if (section.offsetTop <= scrollPos) {
                    return section.id;
                }
            }
            return 'home';
        }
        
        let scrollTimer;
        function handleScroll() {
            if (scrollTimer) clearTimeout(scrollTimer);
            scrollTimer = setTimeout(() => {
                const activeSection = getCurrentSection();
                setActiveSection(activeSection);
            }, 10);
        }
        
        navLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                const href = this.getAttribute('href');
                if (!href.startsWith('#')) return;
                
                e.preventDefault();
                const targetId = href.substring(1);
                const targetSection = document.getElementById(targetId);
                
                if (targetSection) {
                    setActiveSection(targetId);
                    
                    // Close mobile menu
                    const navMenu = document.getElementById('navMenu');
                    const navToggle = document.getElementById('navToggle');
                    if (navMenu && navMenu.classList.contains('active')) {
                        navMenu.classList.remove('active');
                        if (navToggle) navToggle.classList.remove('active');
                        document.body.style.overflow = '';
                    }
                    
                    const header = document.getElementById('header');
                    const offset = header ? header.offsetHeight + 20 : 80;
                    const targetTop = targetId === 'home' ? 0 : targetSection.offsetTop - offset;
                    
                    window.scrollTo({
                        top: Math.max(0, targetTop),
                        behavior: 'smooth'
                    });
                }
            });
        });
        
        window.addEventListener('scroll', handleScroll, { passive: true });
        
        // Initial setup
        setTimeout(() => {
            const initialSection = getCurrentSection();
            setActiveSection(initialSection);
        }, 100);
    }
    
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initSectionTracking);
    } else {
        initSectionTracking();
    }
    
    setTimeout(initSectionTracking, 500);
})();
</script>
<script>
// MOBILE VIDEO CYCLING FIX - Replace the video cycling script in your index.html

// MOBILE-OPTIMIZED VIDEO CONTROLLER - Fixes Last Video Crash
(function() {
    'use strict';
    
    const CONFIG = {
        videoFiles: [
            'public/videos/herobackground.mp4',
            'public/videos/video2.mp4',
            'public/videos/video3.mp4',
            'public/videos/video4.mp4',
            'public/videos/video5.mp4',
            'public/videos/video6.mp4',
            'public/videos/video7.mp4'
        ],
        videoDuration: 8000,
        fadeTransitionTime: 1200,
        autoPlay: true,
        preloadNext: true
    };
    
    let currentVideoIndex = 0;
    let videos = [];
    let videoContainer = null;
    let videoControls = null;
    let indicators = [];
    let autoPlayTimer = null;
    let isPaused = false;
    let validVideos = [];
    let isInitialized = false;
    let switchQueue = [];
    let isProcessingSwitch = false;
    let isMobileDevice = false;
    let videoLoadStates = new Map(); // Track video loading states
    
    function isMobile() {
        isMobileDevice = window.innerWidth <= 768 || /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        return isMobileDevice;
    }
    
    function initVideoCycling() {
        if (isInitialized) return;
        
        videoContainer = document.getElementById('videoContainer');
        videoControls = document.getElementById('videoControls');
        
        if (!videoContainer) return;
        
        isMobile(); // Set mobile detection
        
        testVideoFiles().then(() => {
            if (validVideos.length === 0) {
                createFallbackVideo();
                return;
            }
            
            videoContainer.innerHTML = '';
            createVideoElements();
            
            if (validVideos.length > 1) {
                createIndicators();
                setupEventListeners();
                startVideoCycle();
            } else {
                if (videoControls) videoControls.style.display = 'none';
            }
            
            isInitialized = true;
        });
    }
    
    async function testVideoFiles() {
        validVideos = [];
        
        for (const videoFile of CONFIG.videoFiles) {
            const isValid = await testVideoFile(videoFile);
            if (isValid) {
                validVideos.push(videoFile);
                console.log(`‚úì Video loaded: ${videoFile}`);
            } else {
                console.log(`‚úó Video failed: ${videoFile}`);
            }
        }
        
        console.log(`Total valid videos: ${validVideos.length}`);
    }
    
    function testVideoFile(url) {
        return new Promise((resolve) => {
            const video = document.createElement('video');
            video.preload = 'metadata';
            video.muted = true;
            
            const timeout = setTimeout(() => {
                resolve(false);
            }, 3000);
            
            video.onloadedmetadata = () => {
                clearTimeout(timeout);
                resolve(true);
            };
            
            video.onerror = () => {
                clearTimeout(timeout);
                resolve(false);
            };
            
            video.src = url;
            video.load();
        });
    }
    
    function createFallbackVideo() {
        const video = document.createElement('video');
        video.className = 'hero-video active';
        video.autoplay = true;
        video.muted = true;
        video.loop = true;
        video.playsInline = true;
        
        applyVideoStyles(video, true);
        
        const source = document.createElement('source');
        source.src = 'videos/herobackground.mp4';
        source.type = 'video/mp4';
        
        video.appendChild(source);
        videoContainer.appendChild(video);
        
        if (videoControls) videoControls.style.display = 'none';
        video.play().catch(() => {});
    }
    
    function applyVideoStyles(video, isActive = false) {
        // MOBILE-SPECIFIC POSITIONING FIX
        if (isMobileDevice) {
            video.style.position = 'fixed';
            video.style.top = '0';
            video.style.left = '0';
            video.style.width = '100vw';
            video.style.height = '100vh';
            video.style.transform = 'none';
            video.style.zIndex = isActive ? '1' : '-1';
        } else {
            video.style.position = 'absolute';
            video.style.top = '50%';
            video.style.left = '50%';
            video.style.transform = 'translate3d(-50%, -50%, 0)';
            video.style.width = '100%';
            video.style.height = '100%';
            video.style.zIndex = '1';
        }
        
        video.style.objectFit = 'cover';
        video.style.opacity = isActive ? '1' : '0';
        video.style.transition = 'opacity 1.2s ease-in-out';
        video.style.willChange = 'opacity';
        video.style.backfaceVisibility = 'hidden';
        video.style.webkitBackfaceVisibility = 'hidden';
    }
    
    function createVideoElements() {
        videos = [];
        videoLoadStates.clear();
        
        validVideos.forEach((videoFile, index) => {
            const video = document.createElement('video');
            video.className = 'hero-video';
            video.muted = true;
            video.playsInline = true;
            video.preload = 'auto';
            video.loop = false;
            
            // MOBILE OPTIMIZATION: Set playback attributes
            if (isMobileDevice) {
                video.setAttribute('webkit-playsinline', 'true');
                video.setAttribute('playsinline', 'true');
                video.controls = false;
                video.disablePictureInPicture = true;
            }
            
            const isActive = index === 0;
            applyVideoStyles(video, isActive);
            
            if (isActive) {
                video.classList.add('active');
                video.autoplay = true;
            }
            
            const source = document.createElement('source');
            source.src = videoFile;
            source.type = 'video/mp4';
            
            video.appendChild(source);
            videoContainer.appendChild(video);
            videos.push(video);
            
            // Track video load state
            videoLoadStates.set(index, {
                loaded: false,
                playing: false,
                error: false
            });
            
            // ENHANCED VIDEO EVENT HANDLERS WITH MOBILE FIXES
            video.addEventListener('loadedmetadata', () => {
                console.log(`Video ${index} metadata loaded`);
                videoLoadStates.get(index).loaded = true;
                applyVideoStyles(video, video.classList.contains('active'));
            });
            
            video.addEventListener('canplay', () => {
                console.log(`Video ${index} can play`);
                if (video.classList.contains('active') && !videoLoadStates.get(index).playing) {
                    video.play().catch(handleVideoError);
                }
            });
            
            video.addEventListener('playing', () => {
                videoLoadStates.get(index).playing = true;
            });
            
            video.addEventListener('pause', () => {
                videoLoadStates.get(index).playing = false;
            });
            
            // CRITICAL FIX: Proper ended event handling
            video.addEventListener('ended', (e) => {
                e.preventDefault();
                e.stopPropagation();
                console.log(`Video ${index} ended`);
                
                if (video.classList.contains('active')) {
                    // MOBILE FIX: Reset video properly before replay
                    video.currentTime = 0;
                    
                    // Add small delay to prevent mobile issues
                    setTimeout(() => {
                        if (video.classList.contains('active')) {
                            video.play().catch(handleVideoError);
                        }
                    }, 100);
                }
            });
            
            // MOBILE-SPECIFIC ERROR HANDLING
            video.addEventListener('error', (e) => {
                console.error(`Video ${index} error:`, e);
                videoLoadStates.get(index).error = true;
                handleVideoError(e);
            });
            
            video.addEventListener('stalled', () => {
                console.warn(`Video ${index} stalled`);
                if (video.classList.contains('active')) {
                    setTimeout(() => {
                        if (video.readyState < 2) {
                            video.load();
                            video.play().catch(handleVideoError);
                        }
                    }, 1000);
                }
            });
            
            // MOBILE FIX: Handle video seeking issues
            video.addEventListener('seeked', () => {
                if (video.classList.contains('active') && video.paused) {
                    video.play().catch(handleVideoError);
                }
            });
            
            // Load video immediately
            video.load();
        });
        
        // Start first video with enhanced error handling
        if (videos[0]) {
            startFirstVideo();
        }
    }
    
    function startFirstVideo() {
        const firstVideo = videos[0];
        if (!firstVideo) return;
        
        const playPromise = firstVideo.play();
        if (playPromise !== undefined) {
            playPromise.catch((error) => {
                console.warn('First video autoplay failed:', error);
                // Mobile autoplay fallback
                const playOnInteraction = () => {
                    firstVideo.play().catch(handleVideoError);
                    document.removeEventListener('click', playOnInteraction);
                    document.removeEventListener('touchstart', playOnInteraction);
                    document.removeEventListener('keydown', playOnInteraction);
                };
                document.addEventListener('click', playOnInteraction);
                document.addEventListener('touchstart', playOnInteraction);
                document.addEventListener('keydown', playOnInteraction);
            });
        }
    }
    
    function handleVideoError(error) {
        console.error('Video error:', error);
        // Don't crash - just log and continue
        if (CONFIG.autoPlay && !isPaused) {
            setTimeout(() => {
                scheduleNextTransition();
            }, 2000);
        }
    }
    
    function createIndicators() {
        if (!videoControls || validVideos.length <= 1) return;
        
        videoControls.innerHTML = '';
        indicators = [];
        
        validVideos.forEach((_, index) => {
            const indicator = document.createElement('div');
            indicator.className = 'video-indicator';
            if (index === 0) indicator.classList.add('active');
            
            // MOBILE-OPTIMIZED CLICK HANDLER
            indicator.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                queueVideoSwitch(index);
            });
            
            // MOBILE-OPTIMIZED TOUCH HANDLER
            indicator.addEventListener('touchend', (e) => {
                e.preventDefault();
                e.stopPropagation();
                queueVideoSwitch(index);
            }, { passive: false });
            
            // Desktop hover effects
            if (!isMobileDevice) {
                indicator.addEventListener('mouseenter', () => {
                    if (index !== currentVideoIndex && !isProcessingSwitch) {
                        indicator.style.transform = 'scale(1.1)';
                        indicator.style.opacity = '0.8';
                    }
                });
                
                indicator.addEventListener('mouseleave', () => {
                    indicator.style.transform = 'scale(1)';
                    if (index !== currentVideoIndex) {
                        indicator.style.opacity = '0.6';
                    }
                });
            }
            
            videoControls.appendChild(indicator);
            indicators.push(indicator);
        });
    }
    
    function setupEventListeners() {
        // Keyboard controls with mobile check
        document.addEventListener('keydown', (e) => {
            if (e.target.tagName.toLowerCase() === 'input' || isMobileDevice) return;
            
            switch(e.key) {
                case 'ArrowRight':
                    e.preventDefault();
                    queueVideoSwitch(getNextIndex());
                    break;
                case 'ArrowLeft':
                    e.preventDefault();
                    queueVideoSwitch(getPreviousIndex());
                    break;
                case ' ':
                    e.preventDefault();
                    toggleAutoPlay();
                    break;
            }
        });
        
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                pauseAutoPlay();
            } else if (CONFIG.autoPlay) {
                resumeAutoPlay();
            }
        });
        
        // Handle resize and orientation changes
        window.addEventListener('resize', () => {
            const wasMobile = isMobileDevice;
            isMobile(); // Refresh mobile detection
            
            if (wasMobile !== isMobileDevice) {
                // Device type changed - reapply styles
                videos.forEach((video, index) => {
                    applyVideoStyles(video, index === currentVideoIndex);
                });
            }
        });
        
        window.addEventListener('orientationchange', () => {
            setTimeout(() => {
                videos.forEach((video, index) => {
                    applyVideoStyles(video, index === currentVideoIndex);
                });
            }, 100);
        });
        
        // Process switch queue continuously
        setInterval(processSwitchQueue, 16); // 60fps processing
    }
    
    // CRITICAL FIX: Safe index calculation with bounds checking
    function getNextIndex() {
        const nextIndex = currentVideoIndex + 1;
        return nextIndex >= validVideos.length ? 0 : nextIndex;
    }
    
    function getPreviousIndex() {
        const prevIndex = currentVideoIndex - 1;
        return prevIndex < 0 ? validVideos.length - 1 : prevIndex;
    }
    
    function startVideoCycle() {
        if (!CONFIG.autoPlay || validVideos.length <= 1) return;
        
        // Preload next video
        if (CONFIG.preloadNext && videos[1]) {
            videos[1].load();
            videos[1].currentTime = 0;
        }
        
        scheduleNextTransition();
    }
    
    function scheduleNextTransition() {
        if (isPaused) return;
        
        clearTimeout(autoPlayTimer);
        autoPlayTimer = setTimeout(() => {
            if (!isPaused) {
                queueVideoSwitch(getNextIndex()); // Use safe index calculation
            }
        }, CONFIG.videoDuration);
    }
    
    // QUEUE SYSTEM - Prevents all glitches by processing switches one at a time
    function queueVideoSwitch(newIndex) {
        // CRITICAL FIX: Validate index bounds
        if (newIndex === currentVideoIndex || newIndex >= validVideos.length || newIndex < 0) {
            console.warn(`Invalid video index: ${newIndex}, current: ${currentVideoIndex}, max: ${validVideos.length - 1}`);
            return;
        }
        
        // Always use the latest request (cancel previous queued switches)
        switchQueue = [newIndex];
    }
    
    function processSwitchQueue() {
        if (switchQueue.length === 0 || isProcessingSwitch) return;
        
        const targetIndex = switchQueue.pop(); // Get latest request
        switchQueue = []; // Clear queue
        
        executeVideoSwitch(targetIndex);
    }
    
    // MOBILE-OPTIMIZED VIDEO SWITCH
    function executeVideoSwitch(newIndex) {
        if (newIndex === currentVideoIndex || isProcessingSwitch) return;
        if (newIndex >= validVideos.length || newIndex < 0) {
            console.error(`Video switch failed: invalid index ${newIndex}`);
            return;
        }
        
        isProcessingSwitch = true;
        console.log(`Switching from video ${currentVideoIndex} to video ${newIndex}`);
        
        const currentVideo = videos[currentVideoIndex];
        const nextVideo = videos[newIndex];
        
        if (!currentVideo || !nextVideo) {
            console.error('Video elements not found for switch');
            isProcessingSwitch = false;
            return;
        }
        
        // Clear auto-play timer
        clearTimeout(autoPlayTimer);
        
        // Update indicators immediately for responsiveness
        updateIndicators(newIndex);
        
        // Ensure perfect positioning
        applyVideoStyles(nextVideo, false); // Start hidden
        applyVideoStyles(currentVideo, true); // Keep current visible
        
        // MOBILE FIX: Ensure video is properly reset
        nextVideo.currentTime = 0;
        
        // Start next video playing in background
        const playPromise = nextVideo.play();
        
        if (playPromise !== undefined) {
            playPromise.then(() => {
                // Begin smooth fade transition
                nextVideo.classList.add('active');
                nextVideo.style.opacity = '1';
                currentVideo.style.opacity = '0';
                
                // Complete transition after fade
                setTimeout(() => {
                    // Clean up previous video - MOBILE SAFE
                    currentVideo.classList.remove('active');
                    
                    // MOBILE FIX: Pause and reset safely
                    try {
                        currentVideo.pause();
                        currentVideo.currentTime = 0;
                    } catch (e) {
                        console.warn('Error resetting previous video:', e);
                    }
                    
                    // Ensure positioning is maintained
                    applyVideoStyles(currentVideo, false);
                    applyVideoStyles(nextVideo, true);
                    
                    // Update state
                    currentVideoIndex = newIndex;
                    isProcessingSwitch = false;
                    
                    console.log(`Video switch complete. New index: ${currentVideoIndex}`);
                    
                    // Preload next video
                    if (CONFIG.preloadNext) {
                        const nextIndex = getNextIndex(); // Use safe calculation
                        if (videos[nextIndex] && videos[nextIndex].readyState < 2) {
                            videos[nextIndex].load();
                            videos[nextIndex].currentTime = 0;
                        }
                    }
                    
                    // Schedule next auto-transition
                    if (CONFIG.autoPlay && !isPaused) {
                        scheduleNextTransition();
                    }
                    
                }, CONFIG.fadeTransitionTime);
                
            }).catch((error) => {
                console.error('Video play error during switch:', error);
                // MOBILE RECOVERY: Reset on error
                isProcessingSwitch = false;
                nextVideo.classList.remove('active');
                currentVideo.style.opacity = '1';
                
                // Try to recover by restarting current video
                try {
                    currentVideo.currentTime = 0;
                    currentVideo.play().catch(() => {});
                } catch (e) {
                    console.warn('Recovery attempt failed:', e);
                }
                
                if (CONFIG.autoPlay && !isPaused) {
                    scheduleNextTransition();
                }
            });
        } else {
            // Fallback if play() doesn't return a promise
            console.warn('Play promise not supported, using fallback');
            isProcessingSwitch = false;
        }
    }
    
    function updateIndicators(activeIndex) {
        indicators.forEach((indicator, index) => {
            if (index === activeIndex) {
                indicator.classList.add('active');
                indicator.style.opacity = '1';
                indicator.style.transform = 'scale(1)';
            } else {
                indicator.classList.remove('active');
                indicator.style.opacity = '0.6';
                indicator.style.transform = 'scale(1)';
            }
        });
    }
    
    function pauseAutoPlay() {
        isPaused = true;
        clearTimeout(autoPlayTimer);
    }
    
    function resumeAutoPlay() {
        if (CONFIG.autoPlay && validVideos.length > 1) {
            isPaused = false;
            scheduleNextTransition();
        }
    }
    
    function toggleAutoPlay() {
        CONFIG.autoPlay = !CONFIG.autoPlay;
        if (CONFIG.autoPlay) {
            resumeAutoPlay();
        } else {
            pauseAutoPlay();
        }
    }
    
    // MOBILE EMERGENCY RECOVERY
    function forceReset() {
        console.log('Force resetting video system');
        isProcessingSwitch = false;
        switchQueue = [];
        clearTimeout(autoPlayTimer);
        
        // Ensure currentVideoIndex is within bounds
        if (currentVideoIndex >= validVideos.length) {
            currentVideoIndex = 0;
        }
        
        videos.forEach((video, index) => {
            try {
                if (index === currentVideoIndex) {
                    video.classList.add('active');
                    video.style.opacity = '1';
                    applyVideoStyles(video, true);
                    video.currentTime = 0;
                    video.play().catch(() => {});
                } else {
                    video.classList.remove('active');
                    video.style.opacity = '0';
                    applyVideoStyles(video, false);
                    video.pause();
                    video.currentTime = 0;
                }
            } catch (e) {
                console.warn(`Error resetting video ${index}:`, e);
            }
        });
        
        updateIndicators(currentVideoIndex);
        
        if (CONFIG.autoPlay && !isPaused) {
            scheduleNextTransition();
        }
    }
    
    function init() {
        setTimeout(() => {
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initVideoCycling);
            } else {
                initVideoCycling();
            }
        }, 100);
    }
    
    // Public API
    window.VideoCycling = {
        next: () => queueVideoSwitch(getNextIndex()),
        previous: () => queueVideoSwitch(getPreviousIndex()),
        switchTo: queueVideoSwitch,
        pause: pauseAutoPlay,
        resume: resumeAutoPlay,
        toggle: toggleAutoPlay,
        reset: forceReset,
        getCurrentIndex: () => currentVideoIndex,
        isTransitioning: () => isProcessingSwitch,
        getVideoCount: () => validVideos.length
    };
    
    init();
    
})();
// Mobile Video Position Fix - Add this after your video cycling script
(function() {
    'use strict';
    
    function isMobile() {
        return window.innerWidth <= 768 || /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    }
    
    function fixMobileVideoPosition() {
        const videos = document.querySelectorAll('.hero-video');
        const hero = document.querySelector('.hero');
        
        if (isMobile()) {
            // Fix video positioning on mobile
            videos.forEach(video => {
                video.style.position = 'fixed';
                video.style.top = '0';
                video.style.left = '0';
                video.style.transform = 'none';
                video.style.width = '100vw';
                video.style.height = '100vh';
                video.style.zIndex = '-1';
                video.style.objectFit = 'cover';
            });
            
            // Ensure hero doesn't interfere
            if (hero) {
                hero.style.position = 'relative';
                hero.style.zIndex = '1';
            }
            
            // Force repaint to fix disappearing elements
            const contact = document.querySelector('.contact');
            const footer = document.querySelector('.footer');
            
            if (contact) {
                contact.style.transform = 'translateZ(0)';
                contact.style.isolation = 'isolate';
            }
            
            if (footer) {
                footer.style.transform = 'translateZ(0)';
                footer.style.isolation = 'isolate';
            }
            
        } else {
            // Desktop behavior - allow controlled bleed through
            videos.forEach(video => {
                video.style.position = 'absolute';
                video.style.top = '50%';
                video.style.left = '50%';
                video.style.transform = 'translate(-50%, -50%)';
                video.style.width = 'auto';
                video.style.height = 'auto';
                video.style.minWidth = '100%';
                video.style.minHeight = '100%';
                video.style.zIndex = '1';
            });
            
            if (hero) {
                hero.style.position = 'sticky';
                hero.style.zIndex = '1';
            }
        }
    }
    
    // Fix video positioning when videos are created
    function observeVideoChanges() {
        const videoContainer = document.getElementById('videoContainer');
        if (!videoContainer) return;
        
        const observer = new MutationObserver((mutations) => {
            mutations.forEach((mutation) => {
                if (mutation.type === 'childList') {
                    mutation.addedNodes.forEach((node) => {
                        if (node.nodeType === 1 && (node.tagName === 'VIDEO' || node.classList.contains('hero-video'))) {
                            setTimeout(fixMobileVideoPosition, 100);
                        }
                    });
                }
            });
        });
        
        observer.observe(videoContainer, {
            childList: true,
            subtree: true
        });
    }
    
    // Initialize fixes
    function initMobileFixes() {
        fixMobileVideoPosition();
        observeVideoChanges();
        
        // Fix on resize
        window.addEventListener('resize', () => {
            setTimeout(fixMobileVideoPosition, 100);
        });
        
        // Fix on orientation change
        window.addEventListener('orientationchange', () => {
            setTimeout(fixMobileVideoPosition, 500);
        });
        
        // Periodic fix for mobile issues
        if (isMobile()) {
            setInterval(() => {
                const contact = document.querySelector('.contact');
                const footer = document.querySelector('.footer');
                
                // Check if elements are disappearing and force visibility
                if (contact && contact.style.display === 'none') {
                    contact.style.display = 'block';
                    contact.style.visibility = 'visible';
                }
                
                if (footer && footer.style.display === 'none') {
                    footer.style.display = 'block';
                    footer.style.visibility = 'visible';
                }
            }, 1000);
        }
    }
    
    // Wait for video system to initialize
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(initMobileFixes, 500);
        });
    } else {
        setTimeout(initMobileFixes, 500);
    }
    
    // Backup initialization
    setTimeout(initMobileFixes, 2000);
    
})();
</script>
<!-- ULTIMATE SCROLL-TRIGGERED STATS COUNTER -->
<script>
(function() {
    'use strict';
    
    // Configuration
    const CONFIG = {
        visibilityThreshold: 0.4, // 40% of element must be visible
        scrollThrottle: 100,       // Check scroll every 100ms
        staggerDelay: 300,         // 300ms between each counter
        fallbackDelay: 6000        // Start anyway after 6 seconds
    };
    
    function startCounter(element, target, duration = null) {
        // Smart duration based on target value
        if (!duration) {
            if (target <= 10) duration = 1500;
            else if (target <= 100) duration = 2000;
            else if (target <= 1000) duration = 2500;
            else duration = 3000;
        }
        
        let current = 0;
        const startTime = Date.now();
        
        element.textContent = '0';
        element.style.opacity = '1'; // Ensure visibility
        
        function updateCounter() {
            const elapsed = Date.now() - startTime;
            const progress = Math.min(elapsed / duration, 1);
            
            // Smooth ease-out cubic curve
            const easeOutCubic = 1 - Math.pow(1 - progress, 3);
            
            current = Math.floor(target * easeOutCubic);
            element.textContent = current;
            
            if (progress < 1) {
                requestAnimationFrame(updateCounter);
            } else {
                element.textContent = target;
                console.log(`‚úì Counter completed: ${target}`);
            }
        }
        
        requestAnimationFrame(updateCounter);
    }
    
    function getElementVisibility(element) {
        const rect = element.getBoundingClientRect();
        const windowHeight = window.innerHeight || document.documentElement.clientHeight;
        
        // Calculate what percentage of the element is visible
        const elementHeight = rect.height;
        const visibleTop = Math.max(0, rect.top);
        const visibleBottom = Math.min(windowHeight, rect.bottom);
        const visibleHeight = Math.max(0, visibleBottom - visibleTop);
        
        return {
            ratio: elementHeight > 0 ? visibleHeight / elementHeight : 0,
            isVisible: visibleHeight > 0,
            rect: rect,
            elementHeight: elementHeight,
            visibleHeight: visibleHeight
        };
    }
    
    function findStatsSection() {
        // Try multiple selectors to find the stats section
        const selectors = [
            '.stats-grid',
            '.about .stats-grid', 
            '.about',
            '[class*="stat"]',
            '.stat-item:first-child'
        ];
        
        for (const selector of selectors) {
            const element = document.querySelector(selector);
            if (element) {
                console.log(`Stats section found using selector: ${selector}`);
                return element;
            }
        }
        
        console.warn('Stats section not found with any selector');
        return null;
    }
    
    function initStatsCounters() {
        const statNumbers = document.querySelectorAll('.stat-number[data-count]');
        const statsSection = findStatsSection();
        
        console.log('=== STATS COUNTER INITIALIZATION ===');
        console.log(`Found ${statNumbers.length} stat numbers`);
        console.log('Stats section found:', !!statsSection);
        
        if (statNumbers.length === 0) {
            console.error('‚ùå No stat numbers found with data-count attribute');
            return;
        }
        
        if (!statsSection) {
            console.error('‚ùå Stats section not found');
            return;
        }
        
        // Log all stat numbers for debugging
        statNumbers.forEach((el, i) => {
            const target = parseInt(el.dataset.count);
            console.log(`  Stat ${i}: target=${target}, current="${el.textContent}"`);
        });
        
        let hasAnimated = false;
        
        function checkScrollPosition() {
            if (hasAnimated) return;
            
            const visibility = getElementVisibility(statsSection);
            
            // Debug logging
            console.log(`üìä Scroll check: visible=${visibility.ratio.toFixed(2)} (${Math.round(visibility.ratio * 100)}%)`);
            
            if (visibility.ratio >= CONFIG.visibilityThreshold) {
                hasAnimated = true;
                console.log('üéØ TRIGGERING STATS ANIMATION!');
                console.log(`Stats section is ${Math.round(visibility.ratio * 100)}% visible (threshold: ${CONFIG.visibilityThreshold * 100}%)`);
                
                // Start animations with staggered timing
                statNumbers.forEach((element, index) => {
                    const target = parseInt(element.dataset.count);
                    
                    if (isNaN(target)) {
                        console.warn(`‚ö†Ô∏è Invalid data-count: "${element.dataset.count}"`);
                        return;
                    }
                    
                    setTimeout(() => {
                        console.log(`üöÄ Starting counter ${index}: 0 ‚Üí ${target}`);
                        startCounter(element, target);
                    }, index * CONFIG.staggerDelay);
                });
                
                // Remove scroll listener to prevent re-triggering
                window.removeEventListener('scroll', throttledScrollCheck);
                console.log('Scroll listener removed');
                
            } else {
                // Show position info for debugging
                const rect = statsSection.getBoundingClientRect();
                console.log(`Position: top=${Math.round(rect.top)}, bottom=${Math.round(rect.bottom)}, height=${Math.round(rect.height)}`);
            }
        }
        
        // Throttled scroll handler
        let scrollTimeout;
        function throttledScrollCheck() {
            if (scrollTimeout) clearTimeout(scrollTimeout);
            scrollTimeout = setTimeout(checkScrollPosition, CONFIG.scrollThrottle);
        }
        
        // Add scroll listener
        window.addEventListener('scroll', throttledScrollCheck, { passive: true });
        console.log('Scroll listener added');
        
        // Check immediately in case already in view
        setTimeout(() => {
            console.log('Initial visibility check...');
            checkScrollPosition();
        }, 500);
        
        // Fallback trigger
        setTimeout(() => {
            if (!hasAnimated) {
                console.log('‚è∞ FALLBACK TRIGGER: Starting animation after timeout');
                hasAnimated = true;
                
                statNumbers.forEach((element, index) => {
                    const target = parseInt(element.dataset.count);
                    if (!isNaN(target)) {
                        setTimeout(() => {
                            startCounter(element, target);
                        }, index * CONFIG.staggerDelay);
                    }
                });
            }
        }, CONFIG.fallbackDelay);
        
        console.log(`Fallback timer set for ${CONFIG.fallbackDelay}ms`);
    }
    
    // Initialize
    function init() {
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initStatsCounters);
        } else {
            setTimeout(initStatsCounters, 100);
        }
        
        // Backup initialization
        window.addEventListener('load', () => {
            setTimeout(initStatsCounters, 300);
        });
    }
    
    // Testing and debugging functions
    window.statsDebug = {
        // Manually trigger all counters
        start: function() {
            console.log('üîß Manual trigger activated');
            const statNumbers = document.querySelectorAll('.stat-number[data-count]');
            statNumbers.forEach((element, index) => {
                const target = parseInt(element.dataset.count);
                if (!isNaN(target)) {
                    setTimeout(() => {
                        startCounter(element, target);
                    }, index * 300);
                }
            });
        },
        
        // Check current visibility
        checkVisibility: function() {
            const statsSection = findStatsSection();
            if (statsSection) {
                const visibility = getElementVisibility(statsSection);
                console.log('=== VISIBILITY CHECK ===');
                console.log(`Visibility ratio: ${Math.round(visibility.ratio * 100)}%`);
                console.log(`Threshold needed: ${CONFIG.visibilityThreshold * 100}%`);
                console.log(`Will trigger: ${visibility.ratio >= CONFIG.visibilityThreshold}`);
                console.log('Element rect:', visibility.rect);
            }
        },
        
        // Monitor scroll in real-time
        monitor: function() {
            let count = 0;
            const interval = setInterval(() => {
                this.checkVisibility();
                count++;
                if (count >= 20) { // Stop after 20 checks
                    clearInterval(interval);
                    console.log('Monitoring stopped');
                }
            }, 1000);
            console.log('Started scroll monitoring (20 seconds)');
        },
        
        // Reset all counters to 0
        reset: function() {
            document.querySelectorAll('.stat-number[data-count]').forEach(el => {
                el.textContent = '0';
            });
            console.log('All counters reset to 0');
        }
    };
    
    init();
    
})();
</script>
<script src="./script.js"></script>
</body>
</html>