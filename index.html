<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSA - Community Sports & Arts | Elementary School Programs</title>
    <meta name="description" content="Professional sports and music programs for elementary schools. Expert instruction in athletics, dance, choir, and percussion.">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<script>
(function() {
    'use strict';
    
    // Immediate scroll to top - prevents scroll restoration
    window.scrollTo(0, 0);
    
    // Safely set scrollTop properties
    if (document.documentElement) {
        document.documentElement.scrollTop = 0;
    }
    
    // Wait for body to exist before setting its scrollTop
    function setBodyScrollTop() {
        if (document.body) {
            document.body.scrollTop = 0;
        } else {
            // If body doesn't exist yet, wait a bit and try again
            setTimeout(setBodyScrollTop, 10);
        }
    }
    
    setBodyScrollTop();
    
    // Handle browser back/forward and reload
    window.addEventListener('pageshow', function(event) {
        window.scrollTo(0, 0);
        if (document.documentElement) {
            document.documentElement.scrollTop = 0;
        }
        if (document.body) {
            document.body.scrollTop = 0;
        }
    });
    
    // Override scroll restoration
    if ('scrollRestoration' in history) {
        history.scrollRestoration = 'manual';
    }
    
})();
</script>
    <!-- Styles -->
    <link rel="stylesheet" href="./styles.css">
</head>
<body>
   <!-- Loading Screen -->
<div class="loader" id="loader">
    <div class="loader-hero-logo" id="loaderHeroLogo">
        <!-- Multi-Color Progress Ring with Overflow Effects -->
        <div class="progress-container">
            <svg class="progress-ring" width="360" height="360" viewBox="0 0 360 360">
                <defs>
                    <linearGradient id="exactColors" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#B0202A"/>
                        <stop offset="20%" style="stop-color:#813F96"/>
                        <stop offset="40%" style="stop-color:#3BB44B"/>
                        <stop offset="60%" style="stop-color:#FFB70B"/>
                        <stop offset="80%" style="stop-color:#C9592B"/>
                        <stop offset="100%" style="stop-color:#0C78B9"/>
                    </linearGradient>
                    <filter id="overflowGlow" x="-50%" y="-50%" width="200%" height="200%">
                        <feGaussianBlur stdDeviation="8" result="coloredBlur"/>
                        <feGaussianBlur stdDeviation="15" result="bigBlur"/>
                        <feGaussianBlur stdDeviation="25" result="hugeBlur"/>
                        <feMerge>
                            <feMergeNode in="hugeBlur"/>
                            <feMergeNode in="bigBlur"/>
                            <feMergeNode in="coloredBlur"/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                    <filter id="whiteEmissive" x="-100%" y="-100%" width="300%" height="300%">
                        <feGaussianBlur stdDeviation="12" result="whiteBlur1"/>
                        <feGaussianBlur stdDeviation="25" result="whiteBlur2"/>
                        <feGaussianBlur stdDeviation="40" result="whiteBlur3"/>
                        <feMerge>
                            <feMergeNode in="whiteBlur3"/>
                            <feMergeNode in="whiteBlur2"/>
                            <feMergeNode in="whiteBlur1"/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                </defs>
                <circle class="progress-track" 
                        cx="180" cy="180" r="150"
                        fill="none"
                        stroke="rgba(255,255,255,0.05)"
                        stroke-width="2"/>
                <circle class="progress-bar" 
                        cx="180" cy="180" r="150"
                        fill="none"
                        stroke="url(#exactColors)"
                        stroke-width="5"
                        stroke-linecap="round"
                        filter="url(#overflowGlow)"/>
            </svg>
        </div>
        
        <!-- Logo Container -->
        <div class="logo-container">
            <img src="./images/logo.png" alt="CSA Logo" class="loader-logo-image">
            <div class="loader-logo-fallback">CSA</div>
        </div>
        
        <!-- Company Name Text -->
        <div class="company-name-text">CSA Entertainment</div>
    </div>
</div>
    <!-- Header -->
<header class="header" id="header">
    <nav class="nav">        
        <ul class="nav-menu" id="navMenu">
    <li class="nav-item">
        <a href="#home" class="nav-link">Home</a>
    </li>
    <li class="nav-item">
        <a href="#programs" class="nav-link">Programs</a>
    </li>
    <li class="nav-item">
        <a href="#about" class="nav-link">About</a>
    </li>
    <li class="nav-item">
        <a href="#gallery" class="nav-link">Gallery</a>
    </li>
    <li class="nav-item">
        <a href="#testimonials" class="nav-link">Testimonials</a>
    </li>
    <li class="nav-item">
        <a href="#contact" class="nav-link">Contact</a>
    </li>
    <li class="nav-item">
    <a href="#careers" class="nav-link" id="careersBtn">Careers</a>
</li>
</ul>
        
        <div class="nav-right">
            <div class="nav-auth-section">
                <!-- Authentication buttons -->
                <div class="auth-buttons" id="authButtons">
                    <button class="btn btn-auth" id="loginBtn">Login</button>
                </div>
                <div class="user-info hidden" id="userInfo">
                    <span class="user-name" id="userName"></span>
                    <button class="btn btn-secondary" id="logoutBtn">Logout</button>
                </div>
            </div>
            
            <button class="nav-toggle" id="navToggle">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>
        </div>
    </nav>
</header>

<section class="hero" id="home">
    <div class="hero-background">
        <div class="video-container" id="videoContainer">
            <!-- Videos will be dynamically loaded here -->
        </div>
        <div class="hero-overlay"></div>
    </div>
    
    <div class="hero-content">
        <div class="hero-logo">
            <img src="./images/logo.png" alt="CSA Logo" class="loader-logo-image"
                 onload="this.style.display='block'; this.classList.add('loaded');"
                 onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';"
                 style="display: block;">
            <div class="hero-logo-fallback" style="display: none;">CSA</div>
        </div>
        
        <div class="hero-text-container">
            <h1 class="hero-title">CSA Entertainment</h1>
            <p class="hero-subtitle">Serving Fresno, Kermen, Kings Canyon, Selma, Unified School Districts</p>
        </div>
        
        <div class="hero-actions">
            <a href="#programs" class="btn btn-primary">Programs</a>
            <a href="#contact" class="btn btn-secondary">Contact Us</a>
        </div>
    </div>
    
    <!-- Optional: Video indicators -->
    <div class="video-controls" id="videoControls">
        <!-- Indicators will be dynamically created -->
    </div>
    
    <div class="scroll-indicator">
    <div class="scroll-arrow-wrapper">
        <div class="scroll-arrow"></div>
    </div>
</div>
</section>

  <!-- Programs Section with Filtering -->
<section class="programs" id="programs">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">Our Programs</h2>
            <p class="section-subtitle">Comprehensive curricula designed specifically for elementary schools</p>
        </div>
        
        <!-- Program Filters -->
        <div class="program-filters">
            <!-- Category Tabs -->
            <div class="filter-section">
                <div class="category-tabs">
                    <button class="category-tab active" data-category="all">All Programs</button>
                    <button class="category-tab" data-category="afterschool">After School</button>
                    <button class="category-tab" data-category="winter-camps">Winter Camps</button>
                    <button class="category-tab" data-category="summer-camps">Summer Camps</button>
                    <button class="category-tab" data-category="concerts">Concerts</button>
                </div>
            </div>

            <!-- Specialization Filter -->
            <div class="filter-section">
                <div class="specialization-pills">
                    <button class="spec-pill active" data-subcategory="all">All Types</button>
                    <button class="spec-pill" data-subcategory="guitar-strings">Guitar Programs</button>
                    <button class="spec-pill" data-subcategory="percussion">Percussion</button>
                    <button class="spec-pill" data-subcategory="vocal">Vocal</button>
                    <button class="spec-pill" data-subcategory="dance">Dance</button>
                    <button class="spec-pill" data-subcategory="sports">Sports</button>
                    <button class="spec-pill" data-subcategory="podcasting">Podcasting</button>
                    <button class="spec-pill" data-subcategory="dj-production">DJ & Production</button>
                    <button class="spec-pill" data-subcategory="keyboard">Keyboard & Piano</button>
                </div>
            </div>
<!-- Results Info with Professional Scroll Controls -->
<div class="filter-results">
    <div class="results-container">
        <div class="results-info">
            <span id="programCount">9</span> result(s)
        </div>
        <button class="clear-all" id="clearFilters" style="display: none;">Clear Filters</button>
    </div>
    
    <div class="scroll-controls" id="scrollControls">
        <button class="scroll-btn left" id="scrollLeft" title="Scroll Left">
            <img src="./images/icons/leftarrow.png" alt="Left Arrow" class="scroll-arrow">
        </button>
        <button class="scroll-btn right" id="scrollRight" title="Scroll Right">
            <img src="./images/icons/rightarrow.png" alt="Right Arrow" class="scroll-arrow">
        </button>
    </div>
</div>
        <div class="programs-grid" id="programsGrid">
            <div class="program-card" data-category="afterschool,winter-camps,summer-camps" data-subcategory="sports">
                <div class="program-image">
                    <img src="./images/programs/1.jpg" alt="Sports Program" loading="lazy">
                    <div class="program-overlay">
                        <div class="program-icon">‚öΩ</div>
                    </div>
                </div>
                <div class="program-content">
                    <h3 class="program-title">Sports Programs</h3>
                    <p class="program-description">Comprehensive athletic development focusing on fundamental movement skills, teamwork, and physical fitness for all ability levels.</p>
                    <ul class="program-features">
                        <li>Age-appropriate skill development</li>
                        <li>Team building activities</li>
                        <li>Fitness and coordination</li>
                        <li>Inclusive participation</li>
                    </ul>
                </div>
            </div>
            
            <div class="program-card" data-category="afterschool,winter-camps,summer-camps" data-subcategory="guitar-strings">
                <div class="program-image">
                    <img src="./images/programs/1.jpg" alt="Guitar Programs" loading="lazy">
                    <div class="program-overlay">
                        <div class="program-icon">üé∏</div>
                    </div>
                </div>
                <div class="program-content">
                    <h3 class="program-title">Guitar Programs</h3>
                    <p class="program-description">Comprehensive guitar instruction covering acoustic, electric, and bass guitar, from foundational techniques to advanced performance skills across all styles.</p>
                    <ul class="program-features">
                        <li>Acoustic: Fingerpicking & strumming techniques</li>
                        <li>Electric: Power chords, riffs & amplifier techniques</li>
                        <li>Bass: Rhythm, groove & ensemble playing</li>
                        <li>Music theory & performance preparation</li>
                    </ul>
                </div>
            </div>
            
            <div class="program-card" data-category="afterschool,winter-camps,summer-camps,concerts" data-subcategory="dance">
                <div class="program-image">
                    <img src="./images/programs/2.jpg" alt="Dance Program" loading="lazy">
                    <div class="program-overlay">
                        <div class="program-icon">üíÉ</div>
                    </div>
                </div>
                <div class="program-content">
                    <h3 class="program-title">Dance Programs</h3>
                    <p class="program-description">Creative movement and dance instruction that develops coordination, rhythm, self-expression, and cultural awareness.</p>
                    <ul class="program-features">
                        <li>Multiple dance styles</li>
                        <li>Creative expression</li>
                        <li>Coordination development</li>
                        <li>Performance opportunities</li>
                    </ul>
                </div>
            </div>
            
            <div class="program-card" data-category="afterschool,winter-camps,summer-camps,concerts" data-subcategory="vocal">
                <div class="program-image">
                    <img src="./images/programs/1.jpg" alt="Choir Program" loading="lazy">
                    <div class="program-overlay">
                        <div class="program-icon">üéµ</div>
                    </div>
                </div>
                <div class="program-content">
                    <h3 class="program-title">Choir Programs</h3>
                    <p class="program-description">Professional vocal instruction that builds confidence, musical literacy, and ensemble skills through engaging repertoire.</p>
                    <ul class="program-features">
                        <li>Vocal technique training</li>
                        <li>Music theory basics</li>
                        <li>Ensemble singing</li>
                        <li>Concert performances</li>
                    </ul>
                </div>
            </div>
            
            <div class="program-card" data-category="afterschool,winter-camps,summer-camps,concerts" data-subcategory="percussion">
                <div class="program-image">
                    <img src="./images/programs/2.jpg" alt="Percussion Program" loading="lazy">
                    <div class="program-overlay">
                        <div class="program-icon">ü•Å</div>
                    </div>
                </div>
                <div class="program-content">
                    <h3 class="program-title">Percussion Programs</h3>
                    <p class="program-description">Dynamic rhythm instruction using professional instruments to develop timing, coordination, and ensemble skills.</p>
                    <ul class="program-features">
                        <li>Rhythm and timing</li>
                        <li>Instrument technique</li>
                        <li>Ensemble performance</li>
                        <li>Cultural exploration</li>
                    </ul>
                </div>
            </div>
            
            <div class="program-card" data-category="afterschool,winter-camps,summer-camps" data-subcategory="dj-production">
                <div class="program-image">
                    <img src="./images/programs/2.jpg" alt="DJ Introduction Program" loading="lazy">
                    <div class="program-overlay">
                        <div class="program-icon">üéß</div>
                    </div>
                </div>
                <div class="program-content">
                    <h3 class="program-title">DJ Introduction</h3>
                    <p class="program-description">Introduction to modern music production and DJ skills, teaching beat matching, mixing techniques, and digital music technology.</p>
                    <ul class="program-features">
                        <li>Beat matching basics</li>
                        <li>Digital music software</li>
                        <li>Mixing techniques</li>
                        <li>Music appreciation</li>
                    </ul>
                </div>
            </div>
            
            <div class="program-card" data-category="afterschool,winter-camps,summer-camps" data-subcategory="keyboard">
                <div class="program-image">
                    <img src="./images/programs/2.jpg" alt="Keyboard Program" loading="lazy">
                    <div class="program-overlay">
                        <div class="program-icon">üéπ</div>
                    </div>
                </div>
                <div class="program-content">
                    <h3 class="program-title">Keyboard & Piano</h3>
                    <p class="program-description">Foundation piano and keyboard skills development, including proper technique, music theory, and creative composition.</p>
                    <ul class="program-features">
                        <li>Proper hand positioning</li>
                        <li>Scale and chord work</li>
                        <li>Music composition</li>
                        <li>Performance preparation</li>
                    </ul>
                </div>
            </div>

            <!-- New Podcasting Program -->
            <div class="program-card" data-category="afterschool,winter-camps,summer-camps" data-subcategory="podcasting">
                <div class="program-image">
                    <img src="./images/programs/1.jpg" alt="Podcasting Program" loading="lazy">
                    <div class="program-overlay">
                        <div class="program-icon">üéôÔ∏è</div>
                    </div>
                </div>
                <div class="program-content">
                    <h3 class="program-title">Podcasting & Media</h3>
                    <p class="program-description">Learn the art of storytelling through digital media, developing communication skills, audio production, and content creation.</p>
                    <ul class="program-features">
                        <li>Storytelling techniques</li>
                        <li>Audio recording & editing</li>
                        <li>Interview skills</li>
                        <li>Digital publishing</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</section>
  <!-- About/Stats Section -->
<section class="about" id="about">
    <div class="container">
        <div class="section-header">
            <h2>The CSA Way!</h2>
            <p class="section-subtitle">We've taken the initiative to empower the youth through music & sports. Partnered with elementary schools to deliver exceptional sports and music programs with expert instructors and proven results.</p>
        </div>
        
        <div class="about-content">
            <div class="about-text">
                <div class="about-features">
                    <div class="feature-item">
                        <div class="feature-icon">‚úì</div>
                        <div class="feature-text">
                            <h4>Expert Instructors</h4>
                            <p>Certified professionals with music and education experience</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">‚úì</div>
                        <div class="feature-text">
                            <h4>Proven Curriculum</h4>
                            <p>Evidence-based programs aligned with educational standards</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">‚úì</div>
                        <div class="feature-text">
                            <h4>Full Support</h4>
                            <p>Complete implementation and ongoing program management</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-number" data-count="6452">0</div>
                    <div class="stat-label">Students Served</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" data-count="14">0</div>
                    <div class="stat-label">District Partners</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" data-count="6">0</div>
                    <div class="stat-label">Years Operated</div>
                </div>

                <div class="stat-item">
                    <div class="stat-number" data-count="150">0</div>
                    <div class="stat-label">Camp Days</div>
                </div>
            </div>
        </div>
    </div>
</section>
    <!-- Gallery Section -->
    <section class="gallery" id="gallery">
    <div class="container">
        <div class="section-header">
            <h2>Photo Gallery</h2>
            <p class="section-subtitle">Capturing the magical moments and milestones of our young performers as they shine on stage and grow in confidence.</p>
        </div>
        
        <!-- Authentication Required Message -->
        <div class="auth-required" id="authRequired">
            <div class="auth-card">
                <div class="auth-icon">üîí</div>
                <h3>Authenticad Parent Login</h3>
                <p>Your school will provide you with login credentials to see your little one ROCKING THE STAGE !</p>
                <button class="btn btn-primary" id="galleryLoginBtn">Sign In to View Gallery</button>
            </div>
        </div>
            
            <!-- Gallery Content (Hidden by default) -->
            <div class="gallery-content hidden" id="galleryContent">
                <!-- Gallery Filters -->
                <div class="gallery-filters">
                    <div class="filter-group">
                        <label for="programFilter">Program:</label>
                        <select id="programFilter" class="filter-select">
                            <option value="all">All Programs</option>
                            <option value="sports">Sports</option>
                            <option value="dance">Dance</option>
                            <option value="choir">Choir</option>
                            <option value="percussion">Percussion</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="locationFilter">Location:</label>
                        <select id="locationFilter" class="filter-select">
                            <option value="all">All Locations</option>
                            <option value="oakwood">Oakwood Elementary</option>
                            <option value="riverside">Riverside School</option>
                            <option value="maple-grove">Maple Grove Academy</option>
                            <option value="sunset">Sunset Elementary</option>
                            <option value="cedar-hills">Cedar Hills School</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="dateFilter">Date:</label>
                        <select id="dateFilter" class="filter-select">
                            <option value="all">All Dates</option>
                            <option value="2024-fall">Fall 2024</option>
                            <option value="2024-summer">Summer 2024</option>
                            <option value="2024-spring">Spring 2024</option>
                            <option value="2023-fall">Fall 2023</option>
                        </select>
                    </div>
                    
                    <button class="filter-reset" id="filterReset">Reset Filters</button>
                </div>
                
                <!-- Gallery Grid -->
                <div class="gallery-grid" id="galleryGrid">
                    <!-- Sports Program Photos -->
                    <div class="gallery-item" data-program="sports" data-location="oakwood" data-date="2024-fall">
                        <img src="./images/gallery/5.jpg" alt="Sports Program at Oakwood Elementary" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h4>Sports Program</h4>
                                <p>Oakwood Elementary ‚Ä¢ Fall 2024</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="gallery-item" data-program="sports" data-location="riverside" data-date="2024-summer">
                        <img src="./images/gallery/6.jpg" alt="Sports Program at Riverside School" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h4>Sports Program</h4>
                                <p>Riverside School ‚Ä¢ Summer 2024</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="gallery-item" data-program="sports" data-location="maple-grove" data-date="2024-spring">
                        <img src="./images/gallery/sports-maple-spring2024-1.jpg" alt="Sports Program at Maple Grove" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h4>Sports Program</h4>
                                <p>Maple Grove Academy ‚Ä¢ Spring 2024</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Dance Program Photos -->
                    <div class="gallery-item" data-program="dance" data-location="sunset" data-date="2024-fall">
                        <img src="./images/gallery/dance-sunset-fall2024-1.jpg" alt="Dance Program at Sunset Elementary" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h4>Dance Program</h4>
                                <p>Sunset Elementary ‚Ä¢ Fall 2024</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="gallery-item" data-program="dance" data-location="cedar-hills" data-date="2024-summer">
                        <img src="./images/gallery/dance-cedar-summer2024-1.jpg" alt="Dance Program at Cedar Hills" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h4>Dance Program</h4>
                                <p>Cedar Hills School ‚Ä¢ Summer 2024</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="gallery-item" data-program="dance" data-location="oakwood" data-date="2024-spring">
                        <img src="./images/gallery/dance-oakwood-spring2024-1.jpg" alt="Dance Program at Oakwood Elementary" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h4>Dance Program</h4>
                                <p>Oakwood Elementary ‚Ä¢ Spring 2024</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Choir Program Photos -->
                    <div class="gallery-item" data-program="choir" data-location="riverside" data-date="2024-fall">
                        <img src="./images/gallery/choir-riverside-fall2024-1.jpg" alt="Choir Program at Riverside School" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h4>Choir Program</h4>
                                <p>Riverside School ‚Ä¢ Fall 2024</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="gallery-item" data-program="choir" data-location="maple-grove" data-date="2024-summer">
                        <img src="./images/gallery/choir-maple-summer2024-1.jpg" alt="Choir Program at Maple Grove" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h4>Choir Program</h4>
                                <p>Maple Grove Academy ‚Ä¢ Summer 2024</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="gallery-item" data-program="choir" data-location="sunset" data-date="2023-fall">
                        <img src="./images/gallery/choir-sunset-fall2023-1.jpg" alt="Choir Program at Sunset Elementary" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h4>Choir Program</h4>
                                <p>Sunset Elementary ‚Ä¢ Fall 2023</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Percussion Program Photos -->
                    <div class="gallery-item" data-program="percussion" data-location="cedar-hills" data-date="2024-fall">
                        <img src="./images/gallery/percussion-cedar-fall2024-1.jpg" alt="Percussion Program at Cedar Hills" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h4>Percussion Program</h4>
                                <p>Cedar Hills School ‚Ä¢ Fall 2024</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="gallery-item" data-program="percussion" data-location="oakwood" data-date="2024-summer">
                        <img src="./images/gallery/percussion-oakwood-summer2024-1.jpg" alt="Percussion Program at Oakwood Elementary" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h4>Percussion Program</h4>
                                <p>Oakwood Elementary ‚Ä¢ Summer 2024</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="gallery-item" data-program="percussion" data-location="riverside" data-date="2024-spring">
                        <img src="./images/gallery/percussion-riverside-spring2024-1.jpg" alt="Percussion Program at Riverside School" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h4>Percussion Program</h4>
                                <p>Riverside School ‚Ä¢ Spring 2024</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Mixed Program Photos -->
                    <div class="gallery-item" data-program="sports" data-location="sunset" data-date="2024-summer">
                        <img src="./images/gallery/sports-sunset-summer2024-2.jpg" alt="Sports Program at Sunset Elementary" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h4>Sports Program</h4>
                                <p>Sunset Elementary ‚Ä¢ Summer 2024</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="gallery-item" data-program="dance" data-location="riverside" data-date="2023-fall">
                        <img src="./images/gallery/dance-riverside-fall2023-1.jpg" alt="Dance Program at Riverside School" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h4>Dance Program</h4>
                                <p>Riverside School ‚Ä¢ Fall 2023</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="gallery-item" data-program="choir" data-location="cedar-hills" data-date="2024-spring">
                        <img src="./images/gallery/choir-cedar-spring2024-1.jpg" alt="Choir Program at Cedar Hills" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h4>Choir Program</h4>
                                <p>Cedar Hills School ‚Ä¢ Spring 2024</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="gallery-item" data-program="percussion" data-location="maple-grove" data-date="2023-fall">
                        <img src="./images/gallery/percussion-maple-fall2023-1.jpg" alt="Percussion Program at Maple Grove" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-info">
                                <h4>Percussion Program</h4>
                                <p>Maple Grove Academy ‚Ä¢ Fall 2023</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Gallery Stats -->
                <div class="gallery-stats">
                    <div class="stats-item">
                        <span class="stats-number" id="totalPhotos">16</span>
                        <span class="stats-label">Total Photos</span>
                    </div>
                    <div class="stats-item">
                        <span class="stats-number" id="filteredPhotos">16</span>
                        <span class="stats-label">Showing</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Login Modal -->
    <div class="modal-overlay" id="loginModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Sign In to CSA Gallery</h3>
                <button class="modal-close" id="modalClose">&times;</button>
            </div>
            <div class="modal-body">
                <form class="login-form" id="loginForm">
                    <div class="form-group">
                        <label for="loginEmail">Email Address</label>
                        <input type="email" id="loginEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Password</label>
                        <input type="password" id="loginPassword" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full" id="loginSubmit">Sign In</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div class="modal-overlay" id="registerModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Create CSA Account</h3>
                <button class="modal-close" id="registerModalClose">&times;</button>
            </div>
            <div class="modal-body">
                <form class="register-form" id="registerForm">
                    <div class="form-group">
                        <label for="registerName">Full Name</label>
                        <input type="text" id="registerName" required>
                    </div>
                    <div class="form-group">
                        <label for="registerEmail">Email Address</label>
                        <input type="email" id="registerEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="registerPassword">Password</label>
                        <input type="password" id="registerPassword" required minlength="6">
                    </div>
                    <div class="form-group">
                        <label for="confirmPassword">Confirm Password</label>
                        <input type="password" id="confirmPassword" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">Create Account</button>
                </form>
                
                <div class="auth-links">
                    <p>Already have an account? <a href="#" id="showLogin">Sign in here</a></p>
                </div>
            </div>
        </div>
    </div>

<!-- Career Interest Form Modal -->
<div class="modal-overlay" id="careerModal">
    <div class="modal">
        <div class="modal-header">
            <h3>Career Interest Form</h3>
            <button class="modal-close" id="careerModalClose">&times;</button>
        </div>
        <div class="modal-body">
            <form class="career-form" id="careerForm">
                <div class="form-header">
                    <p>Join our team of passionate music and arts educators!</p>
                </div>
                
                <!-- Personal Information -->
                <div class="form-section">
                    <h4>Personal Information</h4>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="careerFirstName">First Name *</label>
                            <input type="text" id="careerFirstName" name="firstName" required>
                        </div>
                        <div class="form-group">
                            <label for="careerLastName">Last Name *</label>
                            <input type="text" id="careerLastName" name="lastName" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="careerEmail">Email Address *</label>
                            <input type="email" id="careerEmail" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="careerPhone">Phone Number *</label>
                            <input type="tel" id="careerPhone" name="phone" placeholder="(555) 123-4567" required>
                            <small style="color: #666; font-size: 12px; display: block; margin-top: 4px;">
                                Format: (555) 123-4567
                            </small>
                        </div>
                    </div>
                </div>
                
                <!-- Position Information -->
                <div class="form-section">
                    <h4>Position Information</h4>
                    
                    <div class="form-group">
                        <label for="positionInterest">Position of Interest *</label>
                        <select id="positionInterest" name="position" required>
                            <option value="">Select position</option>
                            <option value="Music Instructor">Music Instructor</option>
                            <option value="Sports Coach">Sports Coach</option>
                            <option value="Dance Instructor">Dance Instructor</option>
                            <option value="Percussion Instructor">Percussion Instructor</option>
                            <option value="Choir Director">Choir Director</option>
                            <option value="Program Coordinator">Program Coordinator</option>
                            <option value="Administrative Staff">Administrative Staff</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="availability">Availability *</label>
                        <select id="availability" name="availability" required>
                            <option value="">Select availability</option>
                            <option value="Full-Time">Full-Time</option>
                            <option value="Part-Time">Part-Time</option>
                            <option value="Contract/Seasonal">Contract/Seasonal</option>
                            <option value="Flexible">Flexible</option>
                        </select>
                    </div>
                </div>
                
                <!-- Qualifications -->
                <div class="form-section">
                    <h4>Qualifications</h4>
                    
                    <div class="form-group">
                        <label for="experience">Years of Experience *</label>
                        <select id="experience" name="experience" required>
                            <option value="">Select experience</option>
                            <option value="Less than 1 year">Less than 1 year</option>
                            <option value="1-3 years">1-3 years</option>
                            <option value="3-5 years">3-5 years</option>
                            <option value="5-10 years">5-10 years</option>
                            <option value="10+ years">10+ years</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="education">Education Level *</label>
                        <select id="education" name="education" required>
                            <option value="">Select education level</option>
                            <option value="High School Diploma">High School Diploma</option>
                            <option value="Associate Degree">Associate Degree</option>
                            <option value="Bachelor's Degree">Bachelor's Degree</option>
                            <option value="Master's Degree">Master's Degree</option>
                            <option value="Doctorate">Doctorate</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="certifications">Certifications (if any)</label>
                        <textarea id="certifications" name="certifications" rows="3" placeholder="List any relevant certifications or credentials..."></textarea>
                    </div>
                </div>
                
                <!-- Additional Information -->
                <div class="form-section">
                    <h4>Additional Information</h4>
                    
                    <div class="form-group">
                        <label for="coverLetter">Why do you want to join CSA? *</label>
                        <textarea id="coverLetter" name="coverLetter" rows="5" placeholder="Tell us about your passion for music/sports education and why you'd be a great fit for our team..." required></textarea>
                    </div>
                    
                    <!-- Resume Upload (OPTIONAL) -->
<div class="form-group">
    <label for="resumeFile">Resume Upload <span style="color: #999; font-weight: 400;">(Optional)</span></label>
    <div class="file-upload-container">
        <input 
            type="file" 
            id="resumeFile" 
            name="resumeFile"
            accept=".pdf,.doc,.docx"
            style="display: none;">
        
        <label for="resumeFile" class="file-upload-label">
            <div class="file-upload-icon">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                    <polyline points="17 8 12 3 7 8"></polyline>
                    <line x1="12" y1="3" x2="12" y2="15"></line>
                </svg>
            </div>
            <div class="file-upload-text">
                <p style="font-weight: 600; margin: 0 0 5px;">Click to upload or drag and drop</p>
                <p style="font-size: 13px; color: #999; margin: 0;">PDF, DOC, or DOCX (max 5MB) - Optional</p>
            </div>
        </label>
        
        <p id="fileName" class="file-name">No file selected</p>
    </div>
    
    <!-- Progress Bar -->
    <div id="uploadProgress" class="upload-progress hidden">
        <div class="progress-bar">
            <div id="progressFill" class="progress-fill"></div>
        </div>
        <p id="progressText" class="progress-text">0%</p>
    </div>
</div>
                </div>
                
                <button type="submit" class="btn btn-primary btn-full">Submit Application</button>
            </form>
        </div>
    </div>
</div>
<!-- Success Modal -->
<div id="successModal" class="modal-overlay">
    <div class="modal-container success-modal-container">
        <div class="success-modal-content">
            <!-- Success Icon -->
            <div class="success-icon-wrapper">
                <svg class="success-icon" viewBox="0 0 52 52">
                    <circle class="success-circle" cx="26" cy="26" r="25" fill="none"/>
                    <path class="success-check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
                </svg>
            </div>
            
            <!-- Success Message -->
            <h2 class="success-title">Application Submitted!</h2>
            
            <p class="success-message">
                Thank you for your interest in joining CSA Entertainment.
            </p>
            
            <!-- Application ID Box -->
            <div class="application-id-box">
                <p class="id-label">Your Application ID</p>
                <p id="applicationIdDisplay" class="application-id">ABC123XYZ456</p>
                <p class="id-instruction">Please save this ID for your records</p>
            </div>
            
            <!-- Next Steps -->
            <div class="next-steps">
                <p class="next-steps-title">What happens next?</p>
                <ul class="next-steps-list">
                    <li>Our team will review your application</li>
                    <li>We'll contact you within 1-2 weeks</li>
                    <li>Keep an eye on your email</li>
                </ul>
            </div>
            
            <!-- Close Button -->
            <button class="success-close-btn" id="successModalClose">
                Got it, thanks!
            </button>
        </div>
    </div>
</div>
    <!-- Testimonials Section -->
    <section class="testimonials" id="testimonials">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">What Educators Say</h2>
                <p class="section-subtitle">Hear from school leaders who have transformed their programs with CSA</p>
            </div>
            
            <div class="testimonials-grid">
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        <p class="testimonial-text">
                            "CSA's programs have completely transformed our approach to PE and music education. Student engagement is at an all-time high, and we've seen measurable improvements in both academic performance and school culture."
                        </p>
                    </div>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <img src="./images/testimonials/testimonial-1.jpg" alt="Sarah Martinez" loading="lazy">
                        </div>
                        <div class="author-info">
                            <h4 class="author-name">Sarah Martinez</h4>
                            <p class="author-title">Principal, Oakwood Elementary</p>
                        </div>
                    </div>
                </div>
                
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        <p class="testimonial-text">
                            "The quality of instruction and curriculum is exceptional. Our teachers appreciate the professional development opportunities, and parents consistently praise the program's impact on their children."
                        </p>
                    </div>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <img src="./images/testimonials/testimonial-1.jpg" alt="Michael Chen" loading="lazy">
                        </div>
                        <div class="author-info">
                            <h4 class="author-name">Michael Chen</h4>
                            <p class="author-title">PE Coordinator, Riverside District</p>
                        </div>
                    </div>
                </div>
                
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        <p class="testimonial-text">
                            "Implementation was seamless, and the ongoing support is outstanding. CSA makes it easy for administrators to provide high-quality programs without the typical headaches of program management."
                        </p>
                    </div>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <img src="./images/testimonials/testimonial-1.jpg" alt="Jennifer Walsh" loading="lazy">
                        </div>
                        <div class="author-info">
                            <h4 class="author-name">Jennifer Walsh</h4>
                            <p class="author-title">Assistant Principal, Maple Grove</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section class="contact" id="contact">
        <div class="container">
            <div class="contact-content">
                <div class="contact-info">
                   <div class="section-header">
    <h2>Ready to Get Started?</h2>
    <p class="section-subtitle">
        Join the growing community of schools providing exceptional sports and music programs. Contact us to learn how CSA can enhance your educational offerings.
    </p>
</div>
                    
                    <div class="contact-details">
                        <div class="contact-item">
                            <div class="contact-icon">üìû</div>
                            <div class="contact-text">
                                <h4>Phone</h4>
                                <p>(555) 123-4567</p>
                            </div>
                        </div>
                        <div class="contact-item">
                            <div class="contact-icon">‚úâÔ∏è</div>
                            <div class="contact-text">
                                <h4>Email</h4>
                                <p>info@csaprograms.com</p>
                            </div>
                        </div>
                        <div class="contact-item">
                            <div class="contact-icon">üåç</div>
                            <div class="contact-text">
                                <h4>Service Area</h4>
                                <p>Nationwide Elementary Schools</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="contact-form-container">
   <div class="contact-form-container">
    <form class="contact-form" id="contactForm">
        <div class="form-header">
            <h3>Request Information</h3>
            <p>Tell us about your needs</p>
        </div>
        
        <!-- Initial Role Selection -->
        <div class="educator-check">
            <label for="educatorRole">I am a:</label>
            <select id="educatorRole" name="educatorRole" required>
                <option value="">Please select</option>
                <option value="education-professional">Education Professional</option>
                <option value="parent">Parent/Guardian</option>
            </select>
        </div>
        
        <!-- ============================================ -->
        <!-- EDUCATION PROFESSIONAL FORM FIELDS -->
        <!-- ============================================ -->
        <div class="form-fields" id="educatorFormFields" style="display: none;">
            <div class="form-section-header">
                <h4>Education Professional Inquiry</h4>
                <p>Tell us about your school or district</p>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="eduFirstName">First Name *</label>
                    <input type="text" id="eduFirstName" name="firstName">
                </div>
                <div class="form-group">
                    <label for="eduLastName">Last Name *</label>
                    <input type="text" id="eduLastName" name="lastName">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="eduEmail">Work Email Address *</label>
                    <input type="email" id="eduEmail" name="email" placeholder="name@school.edu">
                </div>
                <div class="form-group">
                    <label for="eduPhone">Office Phone Number</label>
                    <input type="tel" id="eduPhone" name="phone">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="organizationName">School/District Name *</label>
                    <input type="text" id="organizationName" name="organization" placeholder="Enter school or district name">
                </div>
                <div class="form-group">
                    <label for="organizationType">Organization Type *</label>
                    <select id="organizationType" name="organizationType">
                        <option value="">Select type</option>
                        <option value="elementary-school">Elementary School</option>
                        <option value="middle-school">Middle School</option>
                        <option value="k8-school">K-8 School</option>
                        <option value="school-district">School District Office</option>
                        <option value="charter-school">Charter School</option>
                        <option value="private-school">Private School</option>
                        <option value="education-service-center">Education Service Center</option>
                        <option value="after-school-program">After School Program</option>
                        <option value="community-center">Community Center</option>
                        <option value="other">Other Educational Institution</option>
                    </select>
                </div>
            </div>
            
            <div class="form-group">
                <label for="eduPosition">Your Position/Title *</label>
                <select id="eduPosition" name="position">
                    <option value="">Select your position</option>
                    <optgroup label="District Administration">
                        <option value="superintendent">Superintendent</option>
                        <option value="assistant-superintendent">Assistant Superintendent</option>
                        <option value="district-director">District Program Director</option>
                        <option value="curriculum-director">Curriculum Director</option>
                        <option value="district-coordinator">District Coordinator</option>
                    </optgroup>
                    <optgroup label="School Administration">
                        <option value="principal">Principal</option>
                        <option value="assistant-principal">Assistant Principal</option>
                        <option value="dean">Dean</option>
                        <option value="program-director">Program Director</option>
                    </optgroup>
                    <optgroup label="Coordinators & Specialists">
                        <option value="pe-coordinator">PE Coordinator</option>
                        <option value="music-coordinator">Music Coordinator</option>
                        <option value="arts-coordinator">Arts Coordinator</option>
                        <option value="activities-coordinator">Activities Coordinator</option>
                        <option value="after-school-coordinator">After School Coordinator</option>
                        <option value="enrichment-coordinator">Enrichment Coordinator</option>
                        <option value="education-specialist">Education Specialist</option>
                    </optgroup>
                    <optgroup label="Teachers">
                        <option value="pe-teacher">PE Teacher</option>
                        <option value="music-teacher">Music Teacher</option>
                        <option value="art-teacher">Art Teacher</option>
                        <option value="classroom-teacher">Classroom Teacher</option>
                        <option value="department-head">Department Head</option>
                    </optgroup>
                    <optgroup label="Other Roles">
                        <option value="counselor">School Counselor</option>
                        <option value="board-member">School Board Member</option>
                        <option value="office-staff">Office Staff</option>
                        <option value="other">Other</option>
                    </optgroup>
                </select>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="studentCount">Approximate Student Population</label>
                    <select id="studentCount" name="studentCount">
                        <option value="">Select range</option>
                        <option value="under-100">Under 100 students</option>
                        <option value="100-300">100-300 students</option>
                        <option value="300-500">300-500 students</option>
                        <option value="500-800">500-800 students</option>
                        <option value="800-1000">800-1,000 students</option>
                        <option value="over-1000">Over 1,000 students</option>
                        <option value="district-wide">District-wide (multiple schools)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="gradeLevel">Grade Levels Served</label>
                    <select id="gradeLevel" name="gradeLevel">
                        <option value="">Select grades</option>
                        <option value="prek-k">Pre-K to Kindergarten</option>
                        <option value="k-2">K-2nd Grade</option>
                        <option value="3-5">3rd-5th Grade</option>
                        <option value="k-5">K-5th Grade (Elementary)</option>
                        <option value="k-6">K-6th Grade</option>
                        <option value="k-8">K-8th Grade</option>
                        <option value="6-8">6th-8th Grade (Middle)</option>
                        <option value="multiple">Multiple Schools/Grades</option>
                    </select>
                </div>
            </div>
            
            <div class="form-group">
    <label>Programs of Interest * <span class="label-hint">(Select all that apply)</span></label>
    <div class="checkbox-controls">
        <button type="button" class="checkbox-control-btn" onclick="selectAllPrograms('eduPrograms')">
            <span class="control-icon">‚úì</span> Select All
        </button>
        <button type="button" class="checkbox-control-btn clear" onclick="clearAllPrograms('eduPrograms')">
            <span class="control-icon">‚úï</span> Clear All
        </button>
    </div>
    <div class="checkbox-grid two-columns" id="eduProgramsGrid">
        <div class="checkbox-group-label">Music Programs</div>
        <label class="checkbox-item">
            <input type="checkbox" name="eduPrograms" value="choir">
            <span class="checkbox-label">üéµ Choir Programs</span>
        </label>
        <label class="checkbox-item">
            <input type="checkbox" name="eduPrograms" value="percussion">
            <span class="checkbox-label">ü•Å Percussion Programs</span>
        </label>
        <label class="checkbox-item">
            <input type="checkbox" name="eduPrograms" value="guitar">
            <span class="checkbox-label">üé∏ Guitar Programs</span>
        </label>
        <label class="checkbox-item">
            <input type="checkbox" name="eduPrograms" value="keyboard">
            <span class="checkbox-label">üéπ Keyboard & Piano</span>
        </label>
        <label class="checkbox-item">
            <input type="checkbox" name="eduPrograms" value="dj">
            <span class="checkbox-label">üéß DJ & Music Production</span>
        </label>
        
        <div class="checkbox-group-label">Arts & Movement</div>
        <label class="checkbox-item">
            <input type="checkbox" name="eduPrograms" value="dance">
            <span class="checkbox-label">üíÉ Dance Programs</span>
        </label>
        <label class="checkbox-item">
            <input type="checkbox" name="eduPrograms" value="sports">
            <span class="checkbox-label">‚öΩ Sports Programs</span>
        </label>
        
        <div class="checkbox-group-label">Media & Technology</div>
        <label class="checkbox-item">
            <input type="checkbox" name="eduPrograms" value="podcasting">
            <span class="checkbox-label">üéôÔ∏è Podcasting & Media</span>
        </label>
        
        <div class="checkbox-group-label">Program Types</div>
        <label class="checkbox-item">
            <input type="checkbox" name="eduPrograms" value="after-school">
            <span class="checkbox-label">üìö After School Programs</span>
        </label>
        <label class="checkbox-item">
            <input type="checkbox" name="eduPrograms" value="winter-camps">
            <span class="checkbox-label">‚ùÑÔ∏è Winter Camps</span>
        </label>
        <label class="checkbox-item">
            <input type="checkbox" name="eduPrograms" value="summer-camps">
            <span class="checkbox-label">‚òÄÔ∏è Summer Camps</span>
        </label>
        <label class="checkbox-item">
            <input type="checkbox" name="eduPrograms" value="concerts">
            <span class="checkbox-label">üé§ Concert Programs</span>
        </label>
        <label class="checkbox-item">
            <input type="checkbox" name="eduPrograms" value="assemblies">
            <span class="checkbox-label">üè´ School Assemblies</span>
        </label>
        
        <label class="checkbox-item consultation-option full-width">
            <input type="checkbox" name="eduPrograms" value="consultation">
            <span class="checkbox-label">üí¨ Program Consultation - Help me decide</span>
        </label>
    </div>
    <p class="field-error" id="eduProgramsError" style="display: none;">Please select at least one program</p>
</div>
            
            <div class="form-group">
                <label for="implementationTimeline">Implementation Timeline</label>
                <select id="implementationTimeline" name="timeline">
                    <option value="">When are you looking to start?</option>
                    <option value="immediately">As soon as possible</option>
                    <option value="this-semester">This semester</option>
                    <option value="next-semester">Next semester</option>
                    <option value="next-school-year">Next school year</option>
                    <option value="summer">Summer programs</option>
                    <option value="exploring">Just exploring options</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="eduMessage">Additional Information</label>
                <textarea id="eduMessage" name="message" rows="4" placeholder="Tell us about your school's goals, current programs, budget considerations, or any specific needs..."></textarea>
            </div>
            
            <div class="form-group">
                <label for="howHeard">How did you hear about CSA?</label>
                <select id="howHeard" name="howHeard">
                    <option value="">Please select</option>
                    <option value="colleague">Colleague/Another School</option>
                    <option value="district">District Recommendation</option>
                    <option value="conference">Conference/Event</option>
                    <option value="google">Google Search</option>
                    <option value="social-media">Social Media</option>
                    <option value="parent-referral">Parent Referral</option>
                    <option value="flyer">Flyer/Brochure</option>
                    <option value="other">Other</option>
                </select>
            </div>
            
            <button type="submit" class="btn btn-primary btn-full">Request Information</button>
        </div>
        
        <!-- ============================================ -->
        <!-- PARENT/GUARDIAN FORM FIELDS -->
        <!-- ============================================ -->
        <div class="form-fields" id="parentFormFields" style="display: none;">
            <div class="form-section-header">
                <h4>Parent/Guardian Inquiry</h4>
                <p>Help us connect you with your school</p>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="parentFirstName">Your First Name *</label>
                    <input type="text" id="parentFirstName" name="firstName">
                </div>
                <div class="form-group">
                    <label for="parentLastName">Your Last Name *</label>
                    <input type="text" id="parentLastName" name="lastName">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="parentEmail">Email Address *</label>
                    <input type="email" id="parentEmail" name="email">
                </div>
                <div class="form-group">
                    <label for="parentPhone">Phone Number</label>
                    <input type="tel" id="parentPhone" name="phone">
                </div>
            </div>
            
            <div class="form-group">
                <label for="childSchool">Your Child's School Name *</label>
                <input type="text" id="childSchool" name="childSchool" placeholder="Enter your child's school name">
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="childGrade">Your Child's Grade Level</label>
                    <select id="childGrade" name="childGrade">
                        <option value="">Select grade</option>
                        <option value="prek">Pre-K</option>
                        <option value="kindergarten">Kindergarten</option>
                        <option value="1st">1st Grade</option>
                        <option value="2nd">2nd Grade</option>
                        <option value="3rd">3rd Grade</option>
                        <option value="4th">4th Grade</option>
                        <option value="5th">5th Grade</option>
                        <option value="6th">6th Grade</option>
                        <option value="multiple">Multiple Children</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="schoolDistrict">School District</label>
                    <select id="schoolDistrict" name="schoolDistrict">
                        <option value="">Select district</option>
                        <option value="fresno-unified">Fresno Unified</option>
                        <option value="clovis-unified">Clovis Unified</option>
                        <option value="central-unified">Central Unified</option>
                        <option value="sanger-unified">Sanger Unified</option>
                        <option value="selma-unified">Selma Unified</option>
                        <option value="kings-canyon">Kings Canyon Unified</option>
                        <option value="kerman-unified">Kerman Unified</option>
                        <option value="other">Other District</option>
                    </select>
                </div>
            </div>
            
            <div class="form-group">
                <label for="parentRole">Your Involvement (Optional)</label>
                <select id="parentRole" name="parentRole">
                    <option value="">Select if applicable</option>
                    <option value="parent-only">Parent/Guardian</option>
                    <option value="pta-member">PTA/PTO Member</option>
                    <option value="pta-leader">PTA/PTO Board Member/Officer</option>
                    <option value="school-volunteer">School Volunteer</option>
                    <option value="booster-club">Booster Club Member</option>
                    <option value="site-council">School Site Council Member</option>
                    <option value="other">Other</option>
                </select>
            </div>
            
            <div class="form-group">
    <label>Programs Your Child Would Enjoy <span class="label-hint">(Select all that apply)</span></label>
    <div class="checkbox-controls">
        <button type="button" class="checkbox-control-btn" onclick="selectAllPrograms('parentPrograms')">
            <span class="control-icon">‚úì</span> Select All
        </button>
        <button type="button" class="checkbox-control-btn clear" onclick="clearAllPrograms('parentPrograms')">
            <span class="control-icon">‚úï</span> Clear All
        </button>
    </div>
    <div class="checkbox-grid two-columns" id="parentProgramsGrid">
        <div class="checkbox-group-label">Music</div>
        <label class="checkbox-item">
            <input type="checkbox" name="parentPrograms" value="choir">
            <span class="checkbox-label">üéµ Choir/Singing</span>
        </label>
        <label class="checkbox-item">
            <input type="checkbox" name="parentPrograms" value="percussion">
            <span class="checkbox-label">ü•Å Drums/Percussion</span>
        </label>
        <label class="checkbox-item">
            <input type="checkbox" name="parentPrograms" value="guitar">
            <span class="checkbox-label">üé∏ Guitar</span>
        </label>
        <label class="checkbox-item">
            <input type="checkbox" name="parentPrograms" value="keyboard">
            <span class="checkbox-label">üéπ Keyboard/Piano</span>
        </label>
        <label class="checkbox-item">
            <input type="checkbox" name="parentPrograms" value="dj">
            <span class="checkbox-label">üéß DJ & Music Production</span>
        </label>
        
        <div class="checkbox-group-label">Arts & Movement</div>
        <label class="checkbox-item">
            <input type="checkbox" name="parentPrograms" value="dance">
            <span class="checkbox-label">üíÉ Dance</span>
        </label>
        <label class="checkbox-item">
            <input type="checkbox" name="parentPrograms" value="sports">
            <span class="checkbox-label">‚öΩ Sports</span>
        </label>
        
        <div class="checkbox-group-label">Media</div>
        <label class="checkbox-item">
            <input type="checkbox" name="parentPrograms" value="podcasting">
            <span class="checkbox-label">üéôÔ∏è Podcasting & Media</span>
        </label>
        
        <div class="checkbox-group-label">Program Types</div>
        <label class="checkbox-item">
            <input type="checkbox" name="parentPrograms" value="after-school">
            <span class="checkbox-label">üìö After School Programs</span>
        </label>
        <label class="checkbox-item">
            <input type="checkbox" name="parentPrograms" value="summer-camps">
            <span class="checkbox-label">‚òÄÔ∏è Summer Camps</span>
        </label>
        <label class="checkbox-item">
            <input type="checkbox" name="parentPrograms" value="winter-camps">
            <span class="checkbox-label">‚ùÑÔ∏è Winter Camps</span>
        </label>
        
        <label class="checkbox-item not-sure-option full-width">
            <input type="checkbox" name="parentPrograms" value="not-sure" id="parentNotSure">
            <span class="checkbox-label">ü§î Not sure yet - tell me more!</span>
        </label>
    </div>
</div>
            
            <div class="form-group">
                <label for="inquiryType">How Can We Help You? *</label>
                <select id="inquiryType" name="inquiryType">
                    <option value="">Select your inquiry type</option>
                    <option value="check-availability">Check if CSA is available at my child's school</option>
                    <option value="request-school">Request CSA programs at my child's school</option>
                    <option value="enroll-child">Enroll my child in an existing program</option>
                    <option value="program-info">Get more information about programs</option>
                    <option value="summer-camps">Learn about summer camp options</option>
                    <option value="speak-to-rep">Speak with a CSA representative</option>
                    <option value="pta-partnership">Discuss PTA/School partnership</option>
                    <option value="other">Other inquiry</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="parentMessage">Your Message</label>
                <textarea id="parentMessage" name="message" rows="4" placeholder="Tell us more about what you're looking for, your child's interests, or any questions you have..."></textarea>
            </div>
            
            <div class="parent-note">
                <p><strong>üí° Note:</strong> CSA partners directly with schools and districts to provide programs. If CSA isn't currently at your child's school, we can help you connect with school administration to explore bringing our programs to your community!</p>
            </div>
            
            <button type="submit" class="btn btn-primary btn-full">Submit Inquiry</button>
        </div>
        
        <!-- Placeholder message before selection -->
        <div class="role-select-prompt" id="roleSelectPrompt">
            <div class="prompt-content">
                <div class="prompt-icon">üëÜ</div>
                <p>Please select your role above to continue</p>
            </div>
        </div>
    </form>
</div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
   <div class="logo">
       <img src="./images/logo.png" alt="CSA Logo" class="logo-image">
   </div>
</div>
                
                <div class="footer-section">
                    <h4>Programs</h4>
                    <ul class="footer-links">
                        <li><a href="#programs">Sports Programs</a></li>
                        <li><a href="#programs">Dance Programs</a></li>
                        <li><a href="#programs">Choir Programs</a></li>
                        <li><a href="#programs">Percussion Programs</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>For Schools</h4>
                    <ul class="footer-links">
                        <li><a href="#about">Why Choose CSA</a></li>
                        <li><a href="#testimonials">Success Stories</a></li>
                        <li><a href="#contact">Get Started</a></li>
                        <li><a href="#contact">Schedule Demo</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
    <h4>Contact Info</h4>
    <ul class="footer-links">
        <li><a href="tel:+1234567890">+1 (234) 567-8900</a></li>
        <li><a href="mailto:contact@yourcompany.com">contact@CSA.com</a></li>
    </ul>
</div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 Community Sports & Arts. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Notification -->
    <div class="notification" id="notification">
        <div class="notification-content">
            <span class="notification-text" id="notificationText"></span>
            <button class="notification-close" id="notificationClose">&times;</button>
        </div>
    </div>

    <!-- Scripts -->
<!-- Loader Script -->
<script>
// ULTRA-OPTIMIZED BUTTERY SMOOTH LOADER - MAXIMUM PERFORMANCE WITH PERFECT POSITIONING
(function() {
    'use strict';
    
    let progressValue = 0;
    let targetProgress = 0;
    let animationId;
    let hasStarted = false;
    let isComplete = false;
    let originalScrollPosition = 0;
    
    // High-performance variables
    let lastFrameTime = 0;
    let progressBar, progressRing, companyText, progressContainer;
    const circumference = 2 * Math.PI * 150;
    
    // Ultra-fast scroll prevention
    function preventScrolling() {
        originalScrollPosition = window.pageYOffset || document.documentElement.scrollTop;
        
        // Safely add classes and styles
        if (document.documentElement) {
            document.documentElement.classList.add('loading-active');
        }
        if (document.body) {
            document.body.classList.add('loading-active');
            document.body.style.top = `-${originalScrollPosition}px`;
        }
        
        if ('scrollRestoration' in history) {
            history.scrollRestoration = 'manual';
        }
        
        document.addEventListener('wheel', preventScroll, { passive: false });
        document.addEventListener('touchmove', preventScroll, { passive: false });
        document.addEventListener('keydown', preventScrollKeys, { passive: false });
    }
    
    function allowScrolling() {
        if (document.documentElement) {
            document.documentElement.classList.remove('loading-active');
        }
        if (document.body) {
            document.body.classList.remove('loading-active');
            document.body.style.top = '';
        }
        
        window.scrollTo(0, originalScrollPosition);
        
        if ('scrollRestoration' in history) {
            history.scrollRestoration = 'auto';
        }
        
        document.removeEventListener('wheel', preventScroll);
        document.removeEventListener('touchmove', preventScroll);
        document.removeEventListener('keydown', preventScrollKeys);
    }
    
    function preventScroll(e) {
        e.preventDefault();
        e.stopPropagation();
        return false;
    }
    
    function preventScrollKeys(e) {
        const scrollKeys = [32, 33, 34, 35, 36, 37, 38, 39, 40];
        if (scrollKeys.includes(e.keyCode)) {
            e.preventDefault();
            e.stopPropagation();
            return false;
        }
    }
    
    // PRECISE HERO POSITIONING
    function getHeroPosition() {
        const actualHeroLogo = document.querySelector('.hero-logo');
        if (actualHeroLogo) {
            const rect = actualHeroLogo.getBoundingClientRect();
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            return {
                top: rect.top + scrollTop + (rect.height / 2),
                left: rect.left + (rect.width / 2)
            };
        }
        return {
            top: window.innerHeight / 2,
            left: window.innerWidth / 2
        };
    }
    
    // LIGHTNING-FAST progress animation with 60fps smoothness
    function updateProgressInstant(newTarget) {
        targetProgress = newTarget;
        
        if (!animationId) {
            animationId = requestAnimationFrame(ultraSmoothProgress);
        }
    }
    
    function ultraSmoothProgress(currentTime) {
        if (currentTime - lastFrameTime < 16.67) { // 60fps cap
            animationId = requestAnimationFrame(ultraSmoothProgress);
            return;
        }
        lastFrameTime = currentTime;
        
        // ULTRA-FAST interpolation - catches up in 8 frames max
        const diff = targetProgress - progressValue;
        const speed = Math.abs(diff) > 20 ? 0.25 : 0.15; // Faster for big jumps
        
        progressValue += diff * speed;
        
        // Lightning-fast progress bar update
        if (progressBar) {
            const offset = circumference - (progressValue / 100) * circumference;
            progressBar.style.strokeDashoffset = offset;
        }
        
        // Continue animation if not at target
        if (Math.abs(diff) > 0.1) {
            animationId = requestAnimationFrame(ultraSmoothProgress);
        } else {
            progressValue = targetProgress;
            animationId = null;
            
            // Trigger emissive instantly at 100%
            if (targetProgress >= 100) {
                triggerEmissiveInstant();
            }
        }
    }
    
    // Create dynamic lightning success effect
    function createSuccessLightning() {
        const lightning = document.createElement('div');
        lightning.className = 'success-lightning';
        lightning.innerHTML = `
            <div class="lightning-flash"></div>
            <div class="lightning-particles"></div>
            <div class="success-pulse"></div>
        `;
        if (progressContainer) {
            progressContainer.appendChild(lightning);
            setTimeout(() => lightning.classList.add('active'), 50);
        }
        return lightning;
    }
    
    // INSTANT emissive state activation with success effects
    function triggerEmissiveInstant() {
        if (!progressBar || !progressContainer) return;
        
        // Immediate emissive activation
        progressBar.classList.add('emissive', 'success-mode');
        progressContainer.classList.add('emissive', 'success-active');
        
        // Add success ring animation
        if (progressRing) {
            progressRing.classList.remove('animating');
            progressRing.classList.add('success-complete');
        }
        
        // Create lightning effect
        const lightning = createSuccessLightning();
        
        // Fast text reveal - starts immediately
        if (companyText) {
            companyText.style.animation = 'ultraFastReveal 600ms cubic-bezier(0.19, 1, 0.22, 1) forwards';
            companyText.style.opacity = '1';
            
            // Quick glow activation
            setTimeout(() => {
                companyText.classList.add('glow-active');
            }, 200);
        }
        
        // Fast exit sequence - much shorter duration
        setTimeout(() => {
            startFastExit();
            // Clean up lightning effect
            if (lightning && lightning.parentNode) {
                lightning.parentNode.removeChild(lightning);
            }
        }, 1500); // Reduced from 2800ms
    }
    
    // LIGHTNING-FAST exit sequence with perfect positioning
    function startFastExit() {
        // Instant text fade
        if (companyText) {
            companyText.classList.remove('glow-active');
            companyText.style.animation = 'ultraFastExit 400ms cubic-bezier(0.19, 1, 0.22, 1) forwards';
        }
        
        // Instant progress fade
        setTimeout(() => {
            if (progressBar && progressContainer) {
                progressBar.style.transition = 'opacity 300ms cubic-bezier(0.19, 1, 0.22, 1)';
                progressContainer.style.transition = 'opacity 300ms cubic-bezier(0.19, 1, 0.22, 1)';
                progressBar.style.opacity = '0';
                progressContainer.style.opacity = '0';
            }
        }, 100);
        
        // Fast completion
        setTimeout(() => {
            completeLoadingInstant();
        }, 300);
    }
    
    // INSTANT completion with precise hero positioning
    function completeLoadingInstant() {
        if (isComplete) return;
        isComplete = true;
        
        const loader = document.getElementById('loader');
        const loaderHeroLogo = document.getElementById('loaderHeroLogo');
        
        // PERFECT POSITIONING - Get hero position and apply precise scaling
        if (loaderHeroLogo) {
            const heroPos = getHeroPosition();
            
            // Apply the perfect positioning and scaling
            loaderHeroLogo.style.top = heroPos.top + 'px';
            loaderHeroLogo.style.left = heroPos.left + 'px';
            loaderHeroLogo.style.transform = 'translate(-50%, -50%) scale(1.03)';
            loaderHeroLogo.style.transition = 'all 300ms cubic-bezier(0.19, 1, 0.22, 1)';
            loaderHeroLogo.classList.add('success-transition');
            loaderHeroLogo.classList.add('move-to-position');
        }
        
        // Instant final fade
        setTimeout(() => {
            if (loader) {
                loader.style.transition = 'opacity 600ms cubic-bezier(0.19, 1, 0.22, 1)';
                loader.classList.add('fade-out');
                
                setTimeout(() => {
                    if (loader && loader.parentNode) {
                        loader.parentNode.removeChild(loader);
                    }
                    allowScrolling();
                }, 600);
            }
        }, 150);
    }
    
    // OPTIMIZED initialization - cache elements immediately
    function initializeUltraFast() {
        preventScrolling();
        
        // Cache all elements for performance
        progressBar = document.querySelector('.progress-bar');
        progressRing = document.querySelector('.progress-ring');
        companyText = document.querySelector('.company-name-text');
        progressContainer = document.querySelector('.progress-container');
        const loaderHeroLogo = document.getElementById('loaderHeroLogo');
        
        // Setup progress bar for maximum performance
        if (progressBar) {
            progressBar.style.strokeDasharray = circumference;
            progressBar.style.strokeDashoffset = circumference;
            progressBar.style.willChange = 'stroke-dashoffset';
        }
        
        // Instant logo appearance
        if (loaderHeroLogo) {
            setTimeout(() => {
                loaderHeroLogo.style.transition = 'all 400ms cubic-bezier(0.19, 1, 0.22, 1)';
                loaderHeroLogo.classList.add('animate-in');
            }, 100);
        }
        
        // Start progress ring animation immediately
        if (progressRing) {
            hasStarted = true;
            progressRing.classList.add('animating');
            
            // Add vibrant mode for color cycling
            if (progressBar) {
                progressBar.classList.add('vibrant-mode');
            }
        }
        
        // Show company text during progress - faster timing
        setTimeout(() => {
            if (companyText) {
                companyText.style.animation = 'dramaticReveal 1.8s ease-out forwards';
            }
        }, 300);
        
        // AGGRESSIVE loading sequence - much faster progression
        const fastSteps = [
            { progress: 25, delay: 200 },
            { progress: 50, delay: 400 },
            { progress: 75, delay: 600 },
            { progress: 95, delay: 800 },
            { progress: 100, delay: 1000 }
        ];
        
        fastSteps.forEach(step => {
            setTimeout(() => {
                updateProgressInstant(step.progress);
            }, step.delay);
        });
    }
    
    // Wait for body to exist before initializing
    function waitForBodyAndInit() {
        if (document.body) {
            initializeUltraFast();
        } else {
            setTimeout(waitForBodyAndInit, 10);
        }
    }
    
    // Initialize when ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', waitForBodyAndInit);
    } else {
        waitForBodyAndInit();
    }
    
    // Emergency bailout
    setTimeout(() => {
        if (!isComplete) {
            completeLoadingInstant();
        }
    }, 4000);
    
    // Handle visibility
    document.addEventListener('visibilitychange', () => {
        if (document.hidden && !isComplete) {
            setTimeout(completeLoadingInstant, 50);
        }
    });
    
})();
</script>

<!-- Main Script (keep as module) -->
<!-- Main Script (inlined) -->
<script type="module">
// main.js - Simplified Firebase Authentication (Login Only)
import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js';
import { 
    getAuth, 
    onAuthStateChanged, 
    signInWithEmailAndPassword, 
    signOut
} from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js';
import { 
    getFirestore, 
    collection, 
    addDoc,
    doc,
    updateDoc,
    serverTimestamp 
} from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js';

import { 
    getStorage, 
    ref, 
    uploadBytesResumable, 
    getDownloadURL 
} from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-storage.js';
// Firebase Configuration
const firebaseConfig = {
    apiKey: import.meta.env.VITE_FIREBASE_API_KEY,
    authDomain: import.meta.env.VITE_FIREBASE_AUTH_DOMAIN,
    projectId: import.meta.env.VITE_FIREBASE_PROJECT_ID,
    storageBucket: import.meta.env.VITE_FIREBASE_STORAGE_BUCKET,
    messagingSenderId: import.meta.env.VITE_FIREBASE_MESSAGING_SENDER_ID,
    appId: import.meta.env.VITE_FIREBASE_APP_ID
};

// Validate configuration
if (!firebaseConfig.apiKey || firebaseConfig.apiKey === 'undefined') {
    alert('Firebase not configured. Please check your environment variables.');
}

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);
const storage = getStorage(app); // Add this line


// Global state
window.currentUser = null;
let currentUser = null;
let allGalleryItems = [];

// ==================== AUTHENTICATION FUNCTIONS ====================

// Auth state observer
onAuthStateChanged(auth, (user) => {
    currentUser = user;
    window.currentUser = user; // Add this line
    updateUIForAuthState(user);
    
    if (user) {
        showNotification(`Welcome, ${user.displayName || user.email.split('@')[0]}`);
        showGalleryContent();
    } else {
        hideGalleryContent();
    }
});

// Update UI based on auth state
function updateUIForAuthState(user) {
    const authButtons = document.getElementById('authButtons');
    const userInfo = document.getElementById('userInfo');
    const userName = document.getElementById('userName');
    
    if (user) {
        authButtons?.classList.add('hidden');
        userInfo?.classList.remove('hidden');
        if (userName) userName.textContent = user.displayName || user.email.split('@')[0];
    } else {
        authButtons?.classList.remove('hidden');
        userInfo?.classList.add('hidden');
    }
}

// Sign in with email and password
async function signInWithEmail(email, password) {
    const userCredential = await signInWithEmailAndPassword(auth, email, password);
    closeModal('loginModal');
    return userCredential.user;
}

// Sign out
async function signOutUser() {
    await signOut(auth);
    window.currentUser = null; // Add this line
    showNotification('Signed out successfully');
}
// ==================== SIMPLIFIED CAREER FORM FUNCTIONS (No Email) ====================

// Phone number formatting
function formatPhoneNumber(input) {
    const numbers = input.replace(/\D/g, '');
    
    if (numbers.length <= 3) {
        return numbers;
    } else if (numbers.length <= 6) {
        return `(${numbers.slice(0, 3)}) ${numbers.slice(3)}`;
    } else {
        return `(${numbers.slice(0, 3)}) ${numbers.slice(3, 6)}-${numbers.slice(6, 10)}`;
    }
}

// Validate file upload
function validateResumeFile(file) {
    const maxSize = 5 * 1024 * 1024; // 5MB
    const allowedTypes = [
        'application/pdf',
        'application/msword',
        'application/vnd.openxmlformats-officedocument.wordprocessingml.document'
    ];
    
    if (!file) {
        return { valid: false, error: 'Please upload a resume file' };
    }
    
    if (!allowedTypes.includes(file.type)) {
        return { valid: false, error: 'Only PDF, DOC, and DOCX files are allowed' };
    }
    
    if (file.size > maxSize) {
        return { valid: false, error: 'File size must be less than 5MB' };
    }
    
    return { valid: true };
}

// Upload resume to Firebase Storage
async function uploadResume(file, applicationId) {
    return new Promise((resolve, reject) => {
        const timestamp = Date.now();
        const sanitizedFileName = file.name.replace(/[^a-zA-Z0-9.-]/g, '_');
        const fileName = `resumes/${applicationId}/${timestamp}_${sanitizedFileName}`;
        
        const storageRef = ref(storage, fileName);
        const uploadTask = uploadBytesResumable(storageRef, file);
        
        uploadTask.on('state_changed',
            (snapshot) => {
                const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                updateUploadProgress(progress);
            },
            (error) => {
                console.error('Upload error:', error);
                reject(error);
            },
            async () => {
                try {
                    const downloadURL = await getDownloadURL(uploadTask.snapshot.ref);
                    resolve({
                        url: downloadURL,
                        fileName: file.name,
                        fileSize: file.size,
                        fileType: file.type
                    });
                } catch (error) {
                    reject(error);
                }
            }
        );
    });
}

// Update upload progress UI
function updateUploadProgress(progress) {
    const progressContainer = document.getElementById('uploadProgress');
    const progressFill = document.getElementById('progressFill');
    const progressText = document.getElementById('progressText');
    
    if (progressContainer && progressFill && progressText) {
        progressContainer.classList.remove('hidden');
        progressFill.style.width = `${progress}%`;
        progressText.textContent = `${Math.round(progress)}%`;
    }
}

async function submitCareerForm(formData, resumeFile) {
    try {
        // Create application document with all data
        const careerApplication = {
            ...formData,
            submittedAt: serverTimestamp(),
            status: 'pending',
            resumeUploaded: false  // Default to false
        };
        
        // Add document to Firestore - docRef.id will be auto-generated
        const docRef = await addDoc(collection(db, 'career_applications'), careerApplication);
        console.log('Application created with ID:', docRef.id);
        
        // ‚úÖ CRITICAL FIX: Only upload resume IF file exists
        if (resumeFile) {
            console.log('Resume file provided, uploading...');
            
            // Upload resume to Firebase Storage
            const resumeData = await uploadResume(resumeFile, docRef.id);
            
            // Update document with resume info
            await updateDoc(doc(db, 'career_applications', docRef.id), {
                resumeUploaded: true,
                resumeURL: resumeData.url,
                resumeFileName: resumeData.fileName,
                resumeFileSize: resumeData.fileSize,
                resumeFileType: resumeData.fileType
            });
            
            console.log('Resume uploaded successfully');
        } else {
            console.log('No resume file provided - skipping upload');
        }
        
        // Return the document ID
        return docRef.id;
    } catch (error) {
        console.error('Error submitting application:', error);
        throw error;
    }
}

// Updated validation
function validateCareerForm() {
    const requiredFields = [
        'careerFirstName', 'careerLastName', 'careerEmail', 'careerPhone',
        'positionInterest', 'availability', 'experience', 'education', 'coverLetter'
    ];
    
    let isValid = true;
    const errors = [];
    
    // Check all required fields
    requiredFields.forEach(fieldId => {
        const field = document.getElementById(fieldId);
        if (field && !field.value.trim()) {
            field.style.borderColor = '#f44336';
            errors.push(`${field.previousElementSibling?.textContent.replace(' *', '') || fieldId} is required`);
            isValid = false;
        } else if (field) {
            field.style.borderColor = '#e0e0e0';
        }
    });
    
    // Validate email format
    const emailField = document.getElementById('careerEmail');
    if (emailField?.value) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(emailField.value.trim())) {
            emailField.style.borderColor = '#f44336';
            errors.push('Please enter a valid email address');
            isValid = false;
        }
    }
    
    // Validate phone format
    const phoneField = document.getElementById('careerPhone');
    if (phoneField?.value) {
        const phoneRegex = /^\(\d{3}\)\s\d{3}-\d{4}$/;
        if (!phoneRegex.test(phoneField.value.trim())) {
            phoneField.style.borderColor = '#f44336';
            errors.push('Please enter a valid phone number: (555) 123-4567');
            isValid = false;
        }
    }
    
        // ‚úÖ If no file selected, that's perfectly fine - don't add any error
    
    if (!isValid) {
        showNotification(errors[0], 'error');
    }
    
    return isValid;
}

// Logo loading fix
document.addEventListener('DOMContentLoaded', () => {
    const heroLogoImg = document.querySelector('.hero-logo-image');
    
    if (heroLogoImg) {
        const testImage = new Image();
        testImage.onload = function() {
            heroLogoImg.classList.add('loaded');
        };
        testImage.onerror = function() {
            // Image failed - fallback will show automatically
        };
        testImage.src = heroLogoImg.src;
    }
});

// ==================== MODAL FUNCTIONS ====================

function showModal(modalId) {
    const modal = document.getElementById(modalId);
    if (modal) {
        modal.classList.add('active');
        document.body.classList.add('modal-open');
        document.body.style.overflow = 'hidden';
        document.body.style.height = '100vh';
    }
}

function closeModal(modalId) {
    const modal = document.getElementById(modalId);
    if (modal) {
        modal.classList.remove('active');
        document.body.classList.remove('modal-open');
        document.body.style.overflow = '';
        document.body.style.height = '';
        
        // Reset forms and styling
        modal.querySelectorAll('form').forEach(form => form.reset());
        modal.querySelectorAll('input').forEach(input => {
            input.style.borderColor = '#e0e0e0';
        });
    }
}
// ==================== SUCCESS MODAL FUNCTIONS ====================

function showSuccessModal(applicationId) {
    const successModal = document.getElementById('successModal');
    const applicationIdDisplay = document.getElementById('applicationIdDisplay');
    
    if (!successModal) {
        console.error('Success modal not found');
        showNotification('Application submitted successfully! Your Application ID: ' + applicationId);
        return;
    }
    
    // Set the Application ID
    if (applicationIdDisplay) {
        applicationIdDisplay.textContent = applicationId;
    }
    
    // Show the modal
    successModal.classList.add('active');
    
    // Prevent body scroll
    document.body.style.overflow = 'hidden';
    
    // Add animation class for entry
    const modalContent = successModal.querySelector('.success-modal-content');
    if (modalContent) {
        modalContent.style.animation = 'successModalSlideIn 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards';
    }
}

function closeSuccessModal() {
    const successModal = document.getElementById('successModal');
    
    if (!successModal) return;
    
    // Add exit animation
    const modalContent = successModal.querySelector('.success-modal-content');
    if (modalContent) {
        modalContent.style.animation = 'successModalSlideOut 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards';
    }
    
    // Remove modal after animation
    setTimeout(() => {
        successModal.classList.remove('active');
        
        // Restore body scroll
        document.body.style.overflow = '';
        
        // Reset animation
        if (modalContent) {
            modalContent.style.animation = '';
        }
    }, 300);
}

// ==================== ERROR HANDLING ====================

function handleAuthError(error) {
    const errorMessages = {
        'auth/user-not-found': 'No account found with this email',
        'auth/wrong-password': 'Incorrect password',
        'auth/invalid-email': 'Invalid email address',
        'auth/network-request-failed': 'Network error - check your connection',
        'auth/too-many-requests': 'Too many failed attempts. Please try again later.',
        'auth/user-disabled': 'This account has been disabled'
    };
    
    const message = errorMessages[error.code] || error.message || 'Authentication error occurred';
    showNotification(message, 'error');
}

// ==================== NOTIFICATION SYSTEM ====================

function showNotification(message, type = 'success') {
    const notification = document.getElementById('notification');
    const notificationText = document.getElementById('notificationText');
    
    if (notificationText) notificationText.textContent = message;
    if (notification) {
        notification.className = `notification ${type}`;
        notification.classList.add('show');
        
        setTimeout(() => notification.classList.remove('show'), 5000);
    }
}

// ==================== GALLERY FUNCTIONS ====================

function showGalleryContent() {
    const authRequired = document.getElementById('authRequired');
    const galleryContent = document.getElementById('galleryContent');
    
    if (authRequired) authRequired.style.display = 'none';
    if (galleryContent) {
        galleryContent.classList.remove('hidden');
        setTimeout(initializeGallery, 100);
    }
}

function hideGalleryContent() {
    const authRequired = document.getElementById('authRequired');
    const galleryContent = document.getElementById('galleryContent');
    
    if (authRequired) authRequired.style.display = 'block';
    if (galleryContent) galleryContent.classList.add('hidden');
}

function initializeGallery() {
    allGalleryItems = Array.from(document.querySelectorAll('.gallery-item'));
    updatePhotoCount();
    
    // Add filter event listeners
    ['programFilter', 'locationFilter', 'dateFilter'].forEach(filterId => {
        const filter = document.getElementById(filterId);
        if (filter) filter.addEventListener('change', filterGallery);
    });
    
    const resetBtn = document.getElementById('filterReset');
    if (resetBtn) resetBtn.addEventListener('click', resetFilters);
}

function filterGallery() {
    const filters = {
        program: document.getElementById('programFilter')?.value || 'all',
        location: document.getElementById('locationFilter')?.value || 'all',
        date: document.getElementById('dateFilter')?.value || 'all'
    };
    
    let visibleCount = 0;
    
    allGalleryItems.forEach(item => {
        const matches = Object.entries(filters).every(([key, value]) => 
            value === 'all' || item.dataset[key] === value
        );
        
        if (matches) {
            item.classList.remove('hidden');
            visibleCount++;
        } else {
            item.classList.add('hidden');
        }
    });
    
    const filteredPhotos = document.getElementById('filteredPhotos');
    if (filteredPhotos) filteredPhotos.textContent = visibleCount;
}

function resetFilters() {
    ['programFilter', 'locationFilter', 'dateFilter'].forEach(filterId => {
        const filter = document.getElementById(filterId);
        if (filter) filter.value = 'all';
    });
    
    allGalleryItems.forEach(item => item.classList.remove('hidden'));
    updatePhotoCount();
}

function updatePhotoCount() {
    const total = allGalleryItems.length;
    const visible = allGalleryItems.filter(item => !item.classList.contains('hidden')).length;
    
    const totalEl = document.getElementById('totalPhotos');
    const visibleEl = document.getElementById('filteredPhotos');
    
    if (totalEl) totalEl.textContent = total;
    if (visibleEl) visibleEl.textContent = visible;
}

// ==================== NAVIGATION & UI ====================

// Header scroll effect
let lastScrollY = window.scrollY;

// Function to check if device is mobile
function isMobile() {
    return window.innerWidth <= 768; // Adjust breakpoint as needed
}

window.addEventListener('scroll', () => {
    const currentScrollY = window.scrollY;
    const header = document.getElementById('header');
    
    if (!header) return;
    
    // Always apply scrolled class for styling (works on all devices)
    if (currentScrollY > 50) {
        header.classList.add('scrolled');
    } else {
        header.classList.remove('scrolled');
    }
    
    // Only apply hide/show transform on mobile devices
    if (isMobile()) {
        if (currentScrollY > lastScrollY && currentScrollY > 100) {
            header.style.transform = 'translateY(-100%)';
        } else {
            header.style.transform = 'translateY(0)';
        }
    } else {
        // Ensure header is always visible on desktop
        header.style.transform = 'translateY(0)';
    }
    
    lastScrollY = currentScrollY;
});

// Reset header position on window resize to handle orientation changes
window.addEventListener('resize', () => {
    const header = document.getElementById('header');
    if (!header) return;
    
    if (!isMobile()) {
        header.style.transform = 'translateY(0)';
    }
});

// Mobile navigation
function setupMobileNav() {
    const navToggle = document.getElementById('navToggle');
    const navMenu = document.getElementById('navMenu');
    
    if (!navToggle || !navMenu) return;
    
    navToggle.addEventListener('click', () => {
        navToggle.classList.toggle('active');
        navMenu.classList.toggle('active');
        document.body.style.overflow = navMenu.classList.contains('active') ? 'hidden' : '';
    });
    
    navMenu.addEventListener('click', (e) => {
        if (e.target.classList.contains('nav-link')) {
            navToggle.classList.remove('active');
            navMenu.classList.remove('active');
            document.body.style.overflow = '';
        }
    });
}

// Smooth scrolling
function setupSmoothScrolling() {
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', (e) => {
            e.preventDefault();
            const target = document.querySelector(anchor.getAttribute('href'));
            
            if (target) {
                const header = document.getElementById('header');
                const offset = header ? header.offsetHeight : 0;
                
                window.scrollTo({
                    top: target.offsetTop - offset,
                    behavior: 'smooth'
                });
            }
        });
    });
}

// Program cards
function setupProgramCards() {
    document.querySelectorAll('.program-card').forEach(card => {
        card.addEventListener('click', () => {
            const program = card.dataset.program;
            
            if (currentUser) {
                const filter = document.getElementById('programFilter');
                if (filter) {
                    filter.value = program || 'all';
                    filterGallery();
                    document.getElementById('gallery')?.scrollIntoView({ behavior: 'smooth' });
                }
            } else {
                showModal('loginModal');
                showNotification('Please sign in to view gallery', 'error');
            }
        });
    });
}



// ==================== EVENT LISTENERS ====================

document.addEventListener('DOMContentLoaded', () => {
    // Initialize UI components
    setupMobileNav();
    setupSmoothScrolling();
    setupProgramCards();
        
    // Auth buttons
    const loginBtn = document.getElementById('loginBtn');
    const galleryLoginBtn = document.getElementById('galleryLoginBtn');
    const logoutBtn = document.getElementById('logoutBtn');
    
    if (loginBtn) {
        loginBtn.addEventListener('click', () => {
            showModal('loginModal');
        });
    }
    
    if (galleryLoginBtn) {
        galleryLoginBtn.addEventListener('click', () => showModal('loginModal'));
    }
    
    if (logoutBtn) {
        logoutBtn.addEventListener('click', signOutUser);
    }
    
    // Modal controls
    document.querySelectorAll('.modal-close').forEach(btn => {
        btn.addEventListener('click', (e) => {
            const modal = e.target.closest('.modal-overlay');
            if (modal) closeModal(modal.id);
        });
    });
    
    document.querySelectorAll('.modal-overlay').forEach(overlay => {
        overlay.addEventListener('click', (e) => {
            if (e.target === overlay) closeModal(overlay.id);
        });
    });
    
    // Login form
    const loginForm = document.getElementById('loginForm');
    if (loginForm) {
        loginForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;
            const submitBtn = document.getElementById('loginSubmit');
            
            if (!email || !password) {
                showNotification('Please fill in all fields', 'error');
                return;
            }
            
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'Signing In...';
            submitBtn.disabled = true;
            
            try {
                await signInWithEmail(email, password);
                showNotification('Successfully signed in!');
            } catch (error) {
                handleAuthError(error);
            } finally {
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
            }
        });
    }
    
    // Notification close
    const notificationClose = document.getElementById('notificationClose');
    if (notificationClose) {
        notificationClose.addEventListener('click', () => {
            document.getElementById('notification')?.classList.remove('show');
        });
    }
    
    // ==================== CAREER FORM EVENT LISTENERS ====================
    
    // Career Modal Controls
    const careersBtn = document.getElementById('careersBtn');
    const careerModalClose = document.getElementById('careerModalClose');
    const careerForm = document.getElementById('careerForm');
    
    // Open Career Modal
    if (careersBtn) {
        careersBtn.addEventListener('click', (e) => {
            e.preventDefault();
            showModal('careerModal');
        });
    }
    
    // Close Career Modal
    if (careerModalClose) {
        careerModalClose.addEventListener('click', () => {
            closeModal('careerModal');
        });
    }
    
    // ========== PHONE NUMBER FORMATTING ==========
    const phoneInput = document.getElementById('careerPhone');
    if (phoneInput) {
        phoneInput.addEventListener('input', (e) => {
            const formatted = formatPhoneNumber(e.target.value);
            e.target.value = formatted;
            
            // Clear error styling when user types
            if (e.target.style.borderColor === 'rgb(244, 67, 54)') {
                e.target.style.borderColor = '#e0e0e0';
            }
        });
    }
    
    // ========== FILE UPLOAD HANDLING (OPTIONAL) ==========
    const fileInput = document.getElementById('resumeFile');
    const fileNameDisplay = document.getElementById('fileName');
    
    if (fileInput && fileNameDisplay) {
        // Handle file selection (click or programmatic)
        fileInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            
            if (file) {
                // Validate file
                const validation = validateResumeFile(file);
                
                if (validation.valid) {
                    // Show file name and size
                    const sizeMB = (file.size / (1024 * 1024)).toFixed(2);
                    fileNameDisplay.textContent = `${file.name} (${sizeMB} MB)`;
                    fileNameDisplay.style.color = '#4caf50';
                    
                    // Add success styling to label
                    const fileUploadLabel = document.querySelector('.file-upload-label');
                    if (fileUploadLabel) {
                        fileUploadLabel.classList.add('success');
                    }
                    
                    // Clear error styling
                    fileInput.style.borderColor = '#e0e0e0';
                } else {
                    // Show error
                    fileNameDisplay.textContent = validation.error;
                    fileNameDisplay.style.color = '#f44336';
                    fileInput.style.borderColor = '#f44336';
                    showNotification(validation.error, 'error');
                    
                    // Clear the file input
                    fileInput.value = '';
                }
            } else {
                // No file selected
                fileNameDisplay.textContent = 'No file selected';
                fileNameDisplay.style.color = '#666';
                
                const fileUploadLabel = document.querySelector('.file-upload-label');
                if (fileUploadLabel) {
                    fileUploadLabel.classList.remove('success');
                }
            }
        });
        
        // ========== DRAG AND DROP SUPPORT ==========
        const fileUploadLabel = document.querySelector('.file-upload-label');
        
        if (fileUploadLabel) {
            // Prevent default drag behaviors
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                fileUploadLabel.addEventListener(eventName, (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                }, false);
            });
            
            // Highlight drop area when file is dragged over
            ['dragenter', 'dragover'].forEach(eventName => {
                fileUploadLabel.addEventListener(eventName, () => {
                    fileUploadLabel.classList.add('drag-over');
                }, false);
            });
            
            // Remove highlight when drag leaves
            ['dragleave', 'drop'].forEach(eventName => {
                fileUploadLabel.addEventListener(eventName, () => {
                    fileUploadLabel.classList.remove('drag-over');
                }, false);
            });
            
            // Handle dropped files
            fileUploadLabel.addEventListener('drop', (e) => {
                const droppedFiles = e.dataTransfer.files;
                
                if (droppedFiles.length > 0) {
                    // Only take the first file
                    const dataTransfer = new DataTransfer();
                    dataTransfer.items.add(droppedFiles[0]);
                    fileInput.files = dataTransfer.files;
                    
                    // Trigger change event to validate
                    fileInput.dispatchEvent(new Event('change'));
                }
            }, false);
        }
    }
    
    // ========== REAL-TIME VALIDATION FOR OTHER FIELDS ==========
    if (careerForm) {
        const careerFormFields = careerForm.querySelectorAll('input:not([type="file"]), select, textarea');
        
        careerFormFields.forEach(field => {
            // Validate on blur (when user leaves field)
            field.addEventListener('blur', () => {
                if (field.hasAttribute('required') && !field.value.trim()) {
                    field.style.borderColor = '#f44336';
                } else if (field.type === 'email' && field.value.trim()) {
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    field.style.borderColor = emailRegex.test(field.value.trim()) ? '#e0e0e0' : '#f44336';
                } else {
                    field.style.borderColor = '#e0e0e0';
                }
            });
            
            // Clear error styling when user starts typing
            field.addEventListener('input', () => {
                if (field.style.borderColor === 'rgb(244, 67, 54)') {
                    field.style.borderColor = '#e0e0e0';
                }
            });
        });
    }
    
    // ========== CAREER FORM SUBMISSION (OPTIONAL RESUME) ==========
    if (careerForm) {
        careerForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            // Validate form
            if (!validateCareerForm()) {
                return;
            }
            
            // Get form data
            const formData = new FormData(careerForm);
            const data = Object.fromEntries(formData.entries());
            
            // ‚úÖ Get resume file OR null (OPTIONAL - no error if missing)
            const resumeFile = document.getElementById('resumeFile').files[0] || null;
            
            // Remove file from data object (handled separately)
            delete data.resumeFile;
            
            // Show loading state
            const submitBtn = careerForm.querySelector('button[type="submit"]');
            const originalText = submitBtn.textContent;
            
            // Different loading message based on file presence
            submitBtn.textContent = resumeFile ? 'Uploading Resume...' : 'Submitting Application...';
            submitBtn.disabled = true;
            
            // Disable form fields during submission
            const formFields = careerForm.querySelectorAll('input, select, textarea, button');
            formFields.forEach(field => field.disabled = true);
            
            try {
                // Submit with optional file upload (can be null)
                const applicationId = await submitCareerForm(data, resumeFile);
                
                // Close career modal
                closeModal('careerModal');
                
                // Show success modal with Application ID
                showSuccessModal(applicationId);
                
                // Reset form
                careerForm.reset();
                
                // Reset file upload UI
                const fileNameDisplay = document.getElementById('fileName');
                const uploadProgress = document.getElementById('uploadProgress');
                const fileUploadLabel = document.querySelector('.file-upload-label');
                
                if (fileNameDisplay) {
                    fileNameDisplay.textContent = 'No file selected';
                    fileNameDisplay.style.color = '#666';
                }
                
                if (uploadProgress) {
                    uploadProgress.classList.add('hidden');
                    const progressFill = document.getElementById('progressFill');
                    if (progressFill) {
                        progressFill.style.width = '0%';
                    }
                }
                
                if (fileUploadLabel) {
                    fileUploadLabel.classList.remove('success');
                }
                
                // Clear all error styling
                formFields.forEach(field => {
                    field.style.borderColor = '#e0e0e0';
                });
                
            } catch (error) {
                console.error('Error submitting application:', error);
                
                // Show detailed error message
                let errorMessage = 'Error submitting application. Please try again.';
                
                if (error.code === 'storage/unauthorized') {
                    errorMessage = 'File upload permission denied. Please contact support.';
                } else if (error.code === 'storage/canceled') {
                    errorMessage = 'Upload was canceled. Please try again.';
                } else if (error.code === 'storage/unknown') {
                    errorMessage = 'Unknown error occurred. Please check your connection and try again.';
                }
                
                showNotification(errorMessage, 'error');
                
            } finally {
                // Reset button state
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
                
                // Re-enable form fields
                formFields.forEach(field => field.disabled = false);
            }
        });
    }
    
    // Success modal close button
    const successModalCloseBtn = document.getElementById('successModalClose');
    if (successModalCloseBtn) {
        successModalCloseBtn.addEventListener('click', () => {
            closeSuccessModal();
        });
    }
    
    // Close success modal when clicking outside
    const successModal = document.getElementById('successModal');
    if (successModal) {
        successModal.addEventListener('click', (e) => {
            if (e.target === successModal) {
                closeSuccessModal();
            }
        });
    }

    
    // Keyboard shortcuts
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
            // Close all modals
            document.querySelectorAll('.modal-overlay.active').forEach(modal => {
                closeModal(modal.id);
            });
            
            // Close notification
            document.getElementById('notification')?.classList.remove('show');
        }
    });
});
async function submitContactInquiry(formData) {
    try {
        const contactData = {
            ...formData,
            submittedAt: serverTimestamp(),
            status: 'new',
            viewed: false
        };
        
        const docRef = await addDoc(collection(db, 'contact_inquiries'), contactData);
        console.log('Contact inquiry submitted with ID:', docRef.id);
        
        return docRef.id;
    } catch (error) {
        console.error('Error submitting contact inquiry:', error);
        throw error;
    }
}

window.submitContactInquiry = submitContactInquiry;
// Manual trigger for testing
window.manualStartCounters = function() {
    document.querySelectorAll('.stat-number[data-count]').forEach((element, index) => {
        const target = parseInt(element.dataset.count);
        setTimeout(() => {
            startCounter(element, target);
        }, index * 200);
    });
};
</script>

<!-- Parallax Script -->
<script>
// parallax.js
// Updated parallax.js - Compatible with Video Cycling
// Replace your existing parallax.js content with this

(function() {
    'use strict';
    
    let stickyApplied = false;
    let isNavigatingHome = false;
    
    function startParallax() {
        console.log('Starting parallax animation...');
        
        const hero = document.getElementById('home');
        const programs = document.getElementById('programs');
        
        if (!hero) {
            console.error('Hero section with ID "home" not found');
            return;
        }
        
        if (!programs) {
            console.error('Programs section with ID "programs" not found');
            return;
        }
        
        console.log('Elements found, setting up parallax...');
        
        // Set initial hero positioning
        hero.style.position = 'sticky';
        hero.style.top = '0';
        hero.style.zIndex = '1';
        stickyApplied = true;
        
        // Ensure programs section overlays properly
        programs.style.position = 'relative';
        programs.style.zIndex = '10';
        programs.style.backgroundColor = '#f8f9fa';
        programs.style.borderRadius = '24px 24px 0 0';
        programs.style.boxShadow = '0 -20px 40px rgba(0, 0, 0, 0.1)';
        
        // Ensure all sections after programs are visible
        const sectionsAfterPrograms = ['gallery', 'about', 'testimonials', 'contact'];
        sectionsAfterPrograms.forEach(sectionId => {
            const section = document.getElementById(sectionId);
            if (section) {
                section.style.position = 'relative';
                section.style.zIndex = '10';
            }
        });
        
        const footer = document.querySelector('.footer');
        if (footer) {
            footer.style.position = 'relative';
            footer.style.zIndex = '10';
        }
        
        function resetHeroToNormal() {
            hero.style.position = 'relative';
            hero.style.top = '';
            hero.style.zIndex = '';
            stickyApplied = false;
            
            // Reset all parallax effects
            const elementsToReset = [
                hero.querySelector('.hero-content'),
                hero.querySelector('.video-container'), // Updated: target video-container instead of individual videos
                hero.querySelector('.hero-logo'),
                hero.querySelector('.hero-actions'),
                hero.querySelector('.hero-text-container'),
                hero.querySelector('.scroll-indicator'),
                hero.querySelector('.hero-overlay')
            ];
            
            elementsToReset.forEach(element => {
                if (element) {
                    element.style.opacity = '';
                    element.style.transform = '';
                    element.style.filter = '';
                    element.style.backgroundColor = '';
                    element.style.transition = '';
                }
            });
        }
        
        function applyParallax() {
            const scrollY = window.pageYOffset || (document.documentElement ? document.documentElement.scrollTop : 0);
            const windowHeight = window.innerHeight;
            
            // Don't do anything if we're navigating home
            if (isNavigatingHome) {
                return;
            }
            
            // Only reset to relative when at the very top
            if (scrollY <= 2 && stickyApplied) {
                hero.style.position = 'relative';
                hero.style.top = '';
                stickyApplied = false;
                console.log('At top - reset to relative positioning');
                return;
            }
            
            // Apply sticky positioning when scrolling
            if (scrollY > 2 && !stickyApplied) {
                hero.style.position = 'sticky';
                hero.style.top = '0';
                hero.style.zIndex = '1';
                stickyApplied = true;
                console.log('Sticky positioning applied at scroll:', scrollY);
            }
            
            // Apply parallax effects only if sticky is active and we have some scroll
            if (stickyApplied && scrollY > 10) {
                const startTrigger = windowHeight * 0.1;
                const endTrigger = windowHeight * 1.2;
                const progress = Math.max(0, Math.min(1, (scrollY - startTrigger) / (endTrigger - startTrigger)));
                const easedProgress = easeOutCubic(progress);
                
                if (progress > 0) {
                    // Get hero elements
                    const heroContent = hero.querySelector('.hero-content');
                    const videoContainer = hero.querySelector('.video-container'); // Updated: target container
                    const heroLogo = hero.querySelector('.hero-logo');
                    const heroActions = hero.querySelector('.hero-actions');
                    const heroTextContainer = hero.querySelector('.hero-text-container');
                    const scrollIndicator = hero.querySelector('.scroll-indicator');
                    const heroOverlay = hero.querySelector('.hero-overlay');
                    
                    if (heroContent) {
                        const scale = 1 - (easedProgress * 0.02);
                        heroContent.style.transform = `scale(${scale})`;
                        heroContent.style.transition = 'none';
                    }
                    
                    // Updated: Apply effects to video container instead of individual videos
                    if (videoContainer) {
                        const scale = 1 + (easedProgress * 0.03);
                        const opacity = 1 - (easedProgress * 0.3);
                        videoContainer.style.transform = `scale(${scale})`;
                        videoContainer.style.opacity = opacity;
                        videoContainer.style.transition = 'none';
                    }
                    
                    if (heroLogo) {
                        const opacity = 1 - easedProgress;
                        const scale = 1 - (easedProgress * 0.03);
                        heroLogo.style.opacity = opacity;
                        heroLogo.style.transform = `scale(${scale})`;
                        heroLogo.style.transition = 'none';
                    }
                    
                    if (heroActions) {
                        const opacity = 1 - easedProgress;
                        const scale = 1 - (easedProgress * 0.02);
                        heroActions.style.opacity = opacity;
                        heroActions.style.transform = `scale(${scale})`;
                        heroActions.style.transition = 'none';
                    }
                    
                    if (heroTextContainer) {
    const scale = 1 - (easedProgress * 0.02); // Slightly more pronounced scaling
    const opacity = 1 - (easedProgress * 0.8); // Fade out effect
    heroTextContainer.style.transform = `scale(${scale})`;
    heroTextContainer.style.opacity = Math.max(0, opacity);
    heroTextContainer.style.transition = 'none';
}
                    
                    if (scrollIndicator) {
                        const opacity = 1 - (easedProgress * 1.5);
                        const scale = 1 - (easedProgress * 0.05);
                        scrollIndicator.style.opacity = Math.max(0, opacity);
                        scrollIndicator.style.transform = `translateX(-50%) scale(${scale})`;
                        scrollIndicator.style.transition = 'none';
                    }
                    
                    if (heroOverlay) {
                        const overlayOpacity = 0.5 + (easedProgress * 0.3);
                        heroOverlay.style.backgroundColor = `rgba(0, 0, 0, ${overlayOpacity})`;
                        heroOverlay.style.transition = 'none';
                    }
                }
            }
        }
        
        function easeOutCubic(t) {
            return 1 - Math.pow(1 - t, 3);
        }
        
        let ticking = false;
        
        function onScroll() {
            if (!ticking) {
                requestAnimationFrame(() => {
                    applyParallax();
                    ticking = false;
                });
                ticking = true;
            }
        }
        
        window.addEventListener('scroll', onScroll, { passive: true });
        
        // Handle Home navigation specially
        document.addEventListener('click', (e) => {
            const navLink = e.target.closest('a[href^="#"]');
            if (navLink) {
                const targetId = navLink.getAttribute('href');
                
                if (targetId === '#home') {
                    console.log('Home navigation clicked');
                    isNavigatingHome = true;
                    
                    // Immediately reset everything
                    resetHeroToNormal();
                    
                    // Override the smooth scroll behavior for home
                    e.preventDefault();
                    
                    // Scroll to top immediately
                    window.scrollTo({
                        top: 0,
                        behavior: 'smooth'
                    });
                    
                    // Re-enable parallax after scroll completes
                    setTimeout(() => {
                        isNavigatingHome = false;
                        console.log('Home navigation complete - parallax re-enabled');
                        // Force immediate check
                        applyParallax();
                    }, 1000);
                }
            }
        });
        
        // Initial call
        applyParallax();
        
        console.log('Parallax animation setup complete');
    }
    
    // Wait for elements to exist before initializing
    function waitForElementsAndInit() {
        const hero = document.getElementById('home');
        const programs = document.getElementById('programs');
        
        if (hero && programs) {
            startParallax();
        } else {
            setTimeout(waitForElementsAndInit, 100);
        }
    }
    
    // Initialize when DOM is ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', waitForElementsAndInit);
    } else {
        waitForElementsAndInit();
    }
    
    // Backup initialization
    setTimeout(waitForElementsAndInit, 1000);
    
})();
</script>
<!-- Contact Form Script (add this after the parallax script) -->
<script>
// Contact Form Functionality - DYNAMIC ROLE-BASED FORMS WITH CHECKBOX SUPPORT
document.addEventListener('DOMContentLoaded', () => {
    const educatorRole = document.getElementById('educatorRole');
    const educatorFormFields = document.getElementById('educatorFormFields');
    const parentFormFields = document.getElementById('parentFormFields');
    const roleSelectPrompt = document.getElementById('roleSelectPrompt');
    const contactForm = document.getElementById('contactForm');

    // Role selection - Show appropriate form
    if (educatorRole) {
        educatorRole.addEventListener('change', (e) => {
            const value = e.target.value;
            
            // Hide all forms first
            if (educatorFormFields) educatorFormFields.style.display = 'none';
            if (parentFormFields) parentFormFields.style.display = 'none';
            if (roleSelectPrompt) roleSelectPrompt.style.display = 'none';
            
            // Clear required attributes from hidden forms
            clearFormRequirements();
            
            // Clear any previous checkbox selections
            clearAllCheckboxes();
            
            if (value === 'education-professional') {
                if (educatorFormFields) {
                    educatorFormFields.style.display = 'block';
                    educatorFormFields.classList.add('active');
                    setEducatorFieldsRequired(true);
                }
            } else if (value === 'parent') {
                if (parentFormFields) {
                    parentFormFields.style.display = 'block';
                    parentFormFields.classList.add('active');
                    setParentFieldsRequired(true);
                }
            } else {
                // Show prompt if nothing selected
                if (roleSelectPrompt) roleSelectPrompt.style.display = 'block';
            }
        });
    }
    
    // Clear all checkbox selections
    function clearAllCheckboxes() {
        document.querySelectorAll('input[name="eduPrograms"]').forEach(cb => cb.checked = false);
        document.querySelectorAll('input[name="parentPrograms"]').forEach(cb => cb.checked = false);
        
        // Hide any error messages
        const eduError = document.getElementById('eduProgramsError');
        if (eduError) eduError.style.display = 'none';
    }
    
    // Clear all required attributes
    function clearFormRequirements() {
        // Educator fields
        const eduFields = ['eduFirstName', 'eduLastName', 'eduEmail', 'organizationName', 'organizationType', 'eduPosition'];
        eduFields.forEach(id => {
            const field = document.getElementById(id);
            if (field) field.removeAttribute('required');
        });
        
        // Parent fields
        const parentFields = ['parentFirstName', 'parentLastName', 'parentEmail', 'childSchool', 'inquiryType'];
        parentFields.forEach(id => {
            const field = document.getElementById(id);
            if (field) field.removeAttribute('required');
        });
    }
    
    // Set educator fields as required
    function setEducatorFieldsRequired(required) {
        const fields = ['eduFirstName', 'eduLastName', 'eduEmail', 'organizationName', 'organizationType', 'eduPosition'];
        fields.forEach(id => {
            const field = document.getElementById(id);
            if (field) {
                if (required) {
                    field.setAttribute('required', 'required');
                } else {
                    field.removeAttribute('required');
                }
            }
        });
        // Note: eduPrograms is now checkboxes, handled separately in validation
    }
    
    // Set parent fields as required
    function setParentFieldsRequired(required) {
        const fields = ['parentFirstName', 'parentLastName', 'parentEmail', 'childSchool', 'inquiryType'];
        fields.forEach(id => {
            const field = document.getElementById(id);
            if (field) {
                if (required) {
                    field.setAttribute('required', 'required');
                } else {
                    field.removeAttribute('required');
                }
            }
        });
    }

    // Form validation
    function validateForm() {
        const role = educatorRole ? educatorRole.value : '';
        
        if (!role) {
            showNotification('Please select your role to continue.', 'error');
            return false;
        }
        
        let requiredFields = [];
        let isValid = true;
        const errors = [];
        
        if (role === 'education-professional') {
            requiredFields = [
                { id: 'eduFirstName', label: 'First Name' },
                { id: 'eduLastName', label: 'Last Name' },
                { id: 'eduEmail', label: 'Email Address' },
                { id: 'organizationName', label: 'School/District Name' },
                { id: 'organizationType', label: 'Organization Type' },
                { id: 'eduPosition', label: 'Your Position' }
            ];
            
            // Check if at least one program is selected (checkboxes)
            const eduProgramsChecked = document.querySelectorAll('input[name="eduPrograms"]:checked');
            const eduProgramsGrid = document.getElementById('eduProgramsGrid');
            const eduProgramsError = document.getElementById('eduProgramsError');
            
            if (eduProgramsChecked.length === 0) {
                if (eduProgramsError) eduProgramsError.style.display = 'block';
                if (eduProgramsGrid) eduProgramsGrid.style.borderColor = '#f44336';
                errors.push('Please select at least one program of interest');
                isValid = false;
            } else {
                if (eduProgramsError) eduProgramsError.style.display = 'none';
                if (eduProgramsGrid) eduProgramsGrid.style.borderColor = '#e0e0e0';
            }
            
        } else if (role === 'parent') {
            requiredFields = [
                { id: 'parentFirstName', label: 'First Name' },
                { id: 'parentLastName', label: 'Last Name' },
                { id: 'parentEmail', label: 'Email Address' },
                { id: 'childSchool', label: "Child's School Name" },
                { id: 'inquiryType', label: 'How Can We Help You' }
            ];
            // Parent programs are optional, no validation needed
        }
        
        // Validate required text/select fields
        requiredFields.forEach(fieldInfo => {
            const field = document.getElementById(fieldInfo.id);
            if (field) {
                const value = field.value.trim();
                
                if (!value) {
                    field.style.borderColor = '#f44336';
                    errors.push(`${fieldInfo.label} is required`);
                    isValid = false;
                } else {
                    field.style.borderColor = '#e0e0e0';
                }
            }
        });
        
        // Validate email format
        const emailFieldId = role === 'education-professional' ? 'eduEmail' : 'parentEmail';
        const emailField = document.getElementById(emailFieldId);
        if (emailField) {
            const emailValue = emailField.value.trim();
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            
            if (emailValue && !emailRegex.test(emailValue)) {
                emailField.style.borderColor = '#f44336';
                errors.push('Please enter a valid email address');
                isValid = false;
            }
        }
        
        // Show validation errors
        if (!isValid) {
            showNotification(errors[0], 'error');
        }
        
        return isValid;
    }

    // Form submission
    if (contactForm) {
        contactForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            if (!validateForm()) {
                return;
            }
            
            const role = educatorRole.value;
            
            // Collect form data based on role
            let formData = {
                role: role,
                submittedAt: new Date().toISOString()
            };
            
            if (role === 'education-professional') {
                // Collect selected programs as array (checkboxes)
                const selectedEduPrograms = Array.from(
                    document.querySelectorAll('input[name="eduPrograms"]:checked')
                ).map(cb => cb.value);
                
                formData = {
                    ...formData,
                    firstName: document.getElementById('eduFirstName')?.value || '',
                    lastName: document.getElementById('eduLastName')?.value || '',
                    email: document.getElementById('eduEmail')?.value || '',
                    phone: document.getElementById('eduPhone')?.value || '',
                    organization: document.getElementById('organizationName')?.value || '',
                    organizationType: document.getElementById('organizationType')?.value || '',
                    position: document.getElementById('eduPosition')?.value || '',
                    studentCount: document.getElementById('studentCount')?.value || '',
                    gradeLevel: document.getElementById('gradeLevel')?.value || '',
                    programs: selectedEduPrograms, // Now an array
                    timeline: document.getElementById('implementationTimeline')?.value || '',
                    message: document.getElementById('eduMessage')?.value || '',
                    howHeard: document.getElementById('howHeard')?.value || ''
                };
            } else if (role === 'parent') {
                // Collect selected programs as array (checkboxes)
                const selectedParentPrograms = Array.from(
                    document.querySelectorAll('input[name="parentPrograms"]:checked')
                ).map(cb => cb.value);
                
                formData = {
                    ...formData,
                    firstName: document.getElementById('parentFirstName')?.value || '',
                    lastName: document.getElementById('parentLastName')?.value || '',
                    email: document.getElementById('parentEmail')?.value || '',
                    phone: document.getElementById('parentPhone')?.value || '',
                    childSchool: document.getElementById('childSchool')?.value || '',
                    childGrade: document.getElementById('childGrade')?.value || '',
                    schoolDistrict: document.getElementById('schoolDistrict')?.value || '',
                    parentRole: document.getElementById('parentRole')?.value || '',
                    programs: selectedParentPrograms, // Now an array
                    inquiryType: document.getElementById('inquiryType')?.value || '',
                    message: document.getElementById('parentMessage')?.value || ''
                };
            }
            
            // Show loading state
            const submitBtn = contactForm.querySelector('button[type="submit"]');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'Sending...';
            submitBtn.disabled = true;
            
            try {
                // Submit to Firebase contact_inquiries collection
                const inquiryId = await window.submitContactInquiry(formData);
                
                // Show success message based on role
                if (role === 'education-professional') {
                    showNotification('Thank you! A CSA representative will contact you within 24-48 hours. Ref: ' + inquiryId.slice(-6).toUpperCase());
                } else {
                    showNotification('Thank you for your inquiry! We\'ll be in touch soon. Ref: ' + inquiryId.slice(-6).toUpperCase());
                }
                
                // Reset form
                contactForm.reset();
                clearAllCheckboxes();
                if (educatorFormFields) educatorFormFields.style.display = 'none';
                if (parentFormFields) parentFormFields.style.display = 'none';
                if (roleSelectPrompt) roleSelectPrompt.style.display = 'block';
                
                // Clear any error styling
                contactForm.querySelectorAll('input, select, textarea').forEach(field => {
                    field.style.borderColor = '#e0e0e0';
                });
                
                // Reset checkbox grid borders
                const eduGrid = document.getElementById('eduProgramsGrid');
                const parentGrid = document.getElementById('parentProgramsGrid');
                if (eduGrid) eduGrid.style.borderColor = '#e0e0e0';
                if (parentGrid) parentGrid.style.borderColor = '#e0e0e0';
                
            } catch (error) {
                console.error('Form submission error:', error);
                showNotification('There was an error sending your message. Please try again.', 'error');
            } finally {
                // Reset button state
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
            }
        });
    }

    // Real-time form field validation
    contactForm?.querySelectorAll('input:not([type="checkbox"]), select, textarea').forEach(field => {
        field.addEventListener('blur', () => {
            if (field.hasAttribute('required') && !field.value.trim()) {
                field.style.borderColor = '#f44336';
            } else if (field.type === 'email' && field.value.trim()) {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                field.style.borderColor = emailRegex.test(field.value.trim()) ? '#e0e0e0' : '#f44336';
            } else {
                field.style.borderColor = '#e0e0e0';
            }
        });
        
        field.addEventListener('input', () => {
            if (field.style.borderColor === 'rgb(244, 67, 54)') {
                field.style.borderColor = '#e0e0e0';
            }
        });
    });
    
    // Clear error styling when checkbox is selected (for educator programs)
    document.querySelectorAll('input[name="eduPrograms"]').forEach(checkbox => {
        checkbox.addEventListener('change', () => {
            const checkedCount = document.querySelectorAll('input[name="eduPrograms"]:checked').length;
            const eduProgramsGrid = document.getElementById('eduProgramsGrid');
            const eduProgramsError = document.getElementById('eduProgramsError');
            
            if (checkedCount > 0) {
                if (eduProgramsError) eduProgramsError.style.display = 'none';
                if (eduProgramsGrid) eduProgramsGrid.style.borderColor = '#e0e0e0';
            }
        });
    });

    // Set initial state - show prompt
    if (roleSelectPrompt) roleSelectPrompt.style.display = 'block';
    if (educatorFormFields) educatorFormFields.style.display = 'none';
    if (parentFormFields) parentFormFields.style.display = 'none';
});

// Select/Clear all helper functions for checkboxes
function selectAllPrograms(name) {
    document.querySelectorAll(`input[name="${name}"]`).forEach(cb => {
        cb.checked = true;
    });
    
    // Clear error if educator programs
    if (name === 'eduPrograms') {
        const eduProgramsGrid = document.getElementById('eduProgramsGrid');
        const eduProgramsError = document.getElementById('eduProgramsError');
        if (eduProgramsError) eduProgramsError.style.display = 'none';
        if (eduProgramsGrid) eduProgramsGrid.style.borderColor = '#e0e0e0';
    }
}

function clearAllPrograms(name) {
    document.querySelectorAll(`input[name="${name}"]`).forEach(cb => {
        cb.checked = false;
    });
}

// Notification function (if not already defined)
if (typeof showNotification === 'undefined') {
    function showNotification(message, type = 'success') {
        const notification = document.getElementById('notification');
        const notificationText = document.getElementById('notificationText');
        
        if (notificationText) notificationText.textContent = message;
        if (notification) {
            notification.className = `notification ${type}`;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 5000);
        }
    }
}

// Professional Active Section Tracking
(function() {
    'use strict';
    
    let isInitialized = false;
    let currentSection = null;
    
    function initSectionTracking() {
        if (isInitialized) return;
        
        const navLinks = document.querySelectorAll('.nav-link[href^="#"]');
        const sections = document.querySelectorAll('section[id]');
        
        if (!navLinks.length || !sections.length) {
            setTimeout(initSectionTracking, 200);
            return;
        }
        
        isInitialized = true;
        
        function setActiveSection(sectionId) {
            if (currentSection === sectionId) return;
            
            navLinks.forEach(link => link.classList.remove('active'));
            
            const activeLink = document.querySelector(`.nav-link[href="#${sectionId}"]`);
            if (activeLink) {
                activeLink.classList.add('active');
                currentSection = sectionId;
            }
        }
        
        function getCurrentSection() {
            const scrollPos = window.pageYOffset + 100;
            
            if (scrollPos < 200) return 'home';
            
            for (let i = sections.length - 1; i >= 0; i--) {
                const section = sections[i];
                if (section.offsetTop <= scrollPos) {
                    return section.id;
                }
            }
            return 'home';
        }
        
        let scrollTimer;
        function handleScroll() {
            if (scrollTimer) clearTimeout(scrollTimer);
            scrollTimer = setTimeout(() => {
                const activeSection = getCurrentSection();
                setActiveSection(activeSection);
            }, 10);
        }
        
        navLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                const href = this.getAttribute('href');
                if (!href.startsWith('#')) return;
                
                e.preventDefault();
                const targetId = href.substring(1);
                const targetSection = document.getElementById(targetId);
                
                if (targetSection) {
                    setActiveSection(targetId);
                    
                    // Close mobile menu
                    const navMenu = document.getElementById('navMenu');
                    const navToggle = document.getElementById('navToggle');
                    if (navMenu && navMenu.classList.contains('active')) {
                        navMenu.classList.remove('active');
                        if (navToggle) navToggle.classList.remove('active');
                        document.body.style.overflow = '';
                    }
                    
                    const header = document.getElementById('header');
                    const offset = header ? header.offsetHeight + 20 : 80;
                    const targetTop = targetId === 'home' ? 0 : targetSection.offsetTop - offset;
                    
                    window.scrollTo({
                        top: Math.max(0, targetTop),
                        behavior: 'smooth'
                    });
                }
            });
        });
        
        window.addEventListener('scroll', handleScroll, { passive: true });
        
        // Initial setup
        setTimeout(() => {
            const initialSection = getCurrentSection();
            setActiveSection(initialSection);
        }, 100);
    }
    
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initSectionTracking);
    } else {
        initSectionTracking();
    }
    
    setTimeout(initSectionTracking, 500);
})();
</script>
<script>
// MOBILE VIDEO CYCLING FIX - Replace the video cycling script in your index.html

// MOBILE-OPTIMIZED VIDEO CONTROLLER - Fixes Last Video Crash
(function() {
    'use strict';
    
    const CONFIG = {
        videoFiles: [
            './videos/herobackground.mp4',
            './videos/video2.mp4',
            './videos/video3.mp4',
            './videos/video4.mp4',
            './videos/video5.mp4',
            './videos/video6.mp4',
            './videos/video7.mp4'
        ],
        videoDuration: 8000,
        fadeTransitionTime: 1200,
        autoPlay: true,
        preloadNext: true
    };
    
    let currentVideoIndex = 0;
    let videos = [];
    let videoContainer = null;
    let videoControls = null;
    let indicators = [];
    let autoPlayTimer = null;
    let isPaused = false;
    let validVideos = [];
    let isInitialized = false;
    let switchQueue = [];
    let isProcessingSwitch = false;
    let isMobileDevice = false;
    let videoLoadStates = new Map();
    
    function isMobile() {
        isMobileDevice = window.innerWidth <= 768 || /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        return isMobileDevice;
    }
    
    function initVideoCycling() {
        if (isInitialized) return;
        
        videoContainer = document.getElementById('videoContainer');
        videoControls = document.getElementById('videoControls');
        
        if (!videoContainer) return;
        
        isMobile();
        
        // CRITICAL: Ensure container doesn't interfere with videos
        videoContainer.style.position = 'absolute';
        videoContainer.style.top = '0';
        videoContainer.style.left = '0';
        videoContainer.style.width = '100%';
        videoContainer.style.height = '100%';
        videoContainer.style.overflow = 'hidden';
        
        testVideoFiles().then(() => {
            if (validVideos.length === 0) {
                createFallbackVideo();
                return;
            }
            
            videoContainer.innerHTML = '';
            createVideoElements();
            
            if (validVideos.length > 1) {
                createIndicators();
                setupEventListeners();
                startVideoCycle();
            } else {
                if (videoControls) videoControls.style.display = 'none';
            }
            
            isInitialized = true;
        });
    }
    
    async function testVideoFiles() {
        validVideos = [];
        
        for (const videoFile of CONFIG.videoFiles) {
            const isValid = await testVideoFile(videoFile);
            if (isValid) {
                validVideos.push(videoFile);
                console.log(`‚úì Video loaded: ${videoFile}`);
            }
        }
        
        console.log(`Total valid videos: ${validVideos.length}`);
    }
    
    function testVideoFile(url) {
        return new Promise((resolve) => {
            const video = document.createElement('video');
            video.preload = 'metadata';
            video.muted = true;
            
            const timeout = setTimeout(() => resolve(false), 3000);
            
            video.onloadedmetadata = () => {
                clearTimeout(timeout);
                resolve(true);
            };
            
            video.onerror = () => {
                clearTimeout(timeout);
                resolve(false);
            };
            
            video.src = url;
            video.load();
        });
    }
    
    function createFallbackVideo() {
        const video = document.createElement('video');
        video.className = 'hero-video active';
        video.autoplay = true;
        video.muted = true;
        video.loop = true;
        video.playsInline = true;
        
        applyVideoStyles(video, true);
        
        const source = document.createElement('source');
        source.src = 'videos/herobackground.mp4';
        source.type = 'video/mp4';
        
        video.appendChild(source);
        videoContainer.appendChild(video);
        
        if (videoControls) videoControls.style.display = 'none';
        video.play().catch(() => {});
    }
    
    function applyVideoStyles(video, isActive = false) {
    // FIXED: Proper centering for full screen coverage
    video.style.position = 'absolute';
    video.style.top = '50%';
    video.style.left = '50%';
    video.style.transform = 'translate(-50%, -50%)';
    video.style.minWidth = '100%';
    video.style.minHeight = '100%';
    video.style.width = 'auto';
    video.style.height = 'auto';
    video.style.objectFit = 'cover';
    video.style.opacity = isActive ? '1' : '0';
    video.style.transition = 'opacity 1.2s ease-in-out';
    video.style.zIndex = isActive ? '2' : '1';
    video.style.willChange = 'opacity';
    video.style.backfaceVisibility = 'hidden';
    video.style.webkitBackfaceVisibility = 'hidden';
}
    
    function createVideoElements() {
        videos = [];
        videoLoadStates.clear();
        
        validVideos.forEach((videoFile, index) => {
            const video = document.createElement('video');
            video.className = 'hero-video';
            video.muted = true;
            video.playsInline = true;
            video.preload = 'auto';
            video.loop = false;
            
            if (isMobileDevice) {
                video.setAttribute('webkit-playsinline', 'true');
                video.setAttribute('playsinline', 'true');
                video.controls = false;
                video.disablePictureInPicture = true;
            }
            
            const isActive = index === 0;
            applyVideoStyles(video, isActive);
            
            if (isActive) {
                video.classList.add('active');
                video.autoplay = true;
            }
            
            const source = document.createElement('source');
            source.src = videoFile;
            source.type = 'video/mp4';
            
            video.appendChild(source);
            videoContainer.appendChild(video);
            videos.push(video);
            
            videoLoadStates.set(index, {
                loaded: false,
                playing: false,
                error: false
            });
            
            // Enhanced event handlers
            video.addEventListener('loadedmetadata', () => {
                console.log(`Video ${index} metadata loaded`);
                videoLoadStates.get(index).loaded = true;
            });
            
            video.addEventListener('canplay', () => {
                if (video.classList.contains('active') && !videoLoadStates.get(index).playing) {
                    video.play().catch(handleVideoError);
                }
            });
            
            video.addEventListener('playing', () => {
                videoLoadStates.get(index).playing = true;
            });
            
            video.addEventListener('pause', () => {
                videoLoadStates.get(index).playing = false;
            });
            
            // CRITICAL FIX: Better ended event handling
            video.addEventListener('ended', () => {
                console.log(`Video ${index} ended, current: ${currentVideoIndex}`);
                
                // Only handle if this is the active video
                if (index === currentVideoIndex && video.classList.contains('active')) {
                    // Use requestAnimationFrame for smooth handling
                    requestAnimationFrame(() => {
                        try {
                            // Reset the video
                            video.currentTime = 0;
                            video.load();
                            
                            // Wait a bit before replaying
                            setTimeout(() => {
                                if (video.classList.contains('active') && index === currentVideoIndex) {
                                    const playPromise = video.play();
                                    if (playPromise !== undefined) {
                                        playPromise.catch(err => {
                                            console.warn(`Replay failed for video ${index}:`, err);
                                            // If replay fails, advance to next
                                            if (validVideos.length > 1 && !isProcessingSwitch) {
                                                queueVideoSwitch(getNextIndex());
                                            }
                                        });
                                    }
                                }
                            }, 150);
                        } catch (err) {
                            console.error(`Error handling video end:`, err);
                            // Fallback: advance to next video
                            if (validVideos.length > 1 && !isProcessingSwitch) {
                                queueVideoSwitch(getNextIndex());
                            }
                        }
                    });
                }
            });
            
            video.addEventListener('error', (e) => {
                console.error(`Video ${index} error:`, e);
                videoLoadStates.get(index).error = true;
            });
            
            video.addEventListener('stalled', () => {
                if (video.classList.contains('active')) {
                    setTimeout(() => {
                        if (video.readyState < 2) {
                            video.load();
                            video.play().catch(handleVideoError);
                        }
                    }, 1000);
                }
            });
            
            video.load();
        });
        
        if (videos[0]) {
            startFirstVideo();
        }
    }
    
    function startFirstVideo() {
        const firstVideo = videos[0];
        if (!firstVideo) return;
        
        const playPromise = firstVideo.play();
        if (playPromise !== undefined) {
            playPromise.catch((error) => {
                console.warn('First video autoplay failed:', error);
                const playOnInteraction = () => {
                    firstVideo.play().catch(handleVideoError);
                    document.removeEventListener('click', playOnInteraction);
                    document.removeEventListener('touchstart', playOnInteraction);
                };
                document.addEventListener('click', playOnInteraction);
                document.addEventListener('touchstart', playOnInteraction);
            });
        }
    }
    
    function handleVideoError(error) {
        console.error('Video error:', error);
        if (CONFIG.autoPlay && !isPaused) {
            setTimeout(scheduleNextTransition, 2000);
        }
    }
    
    function createIndicators() {
        if (!videoControls || validVideos.length <= 1) return;
        
        videoControls.innerHTML = '';
        indicators = [];
        
        validVideos.forEach((_, index) => {
            const indicator = document.createElement('div');
            indicator.className = 'video-indicator';
            if (index === 0) indicator.classList.add('active');
            
            indicator.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                queueVideoSwitch(index);
            });
            
            indicator.addEventListener('touchend', (e) => {
                e.preventDefault();
                e.stopPropagation();
                queueVideoSwitch(index);
            }, { passive: false });
            
            videoControls.appendChild(indicator);
            indicators.push(indicator);
        });
    }
    
    function setupEventListeners() {
        document.addEventListener('keydown', (e) => {
            if (e.target.tagName.toLowerCase() === 'input' || isMobileDevice) return;
            
            switch(e.key) {
                case 'ArrowRight':
                    e.preventDefault();
                    queueVideoSwitch(getNextIndex());
                    break;
                case 'ArrowLeft':
                    e.preventDefault();
                    queueVideoSwitch(getPreviousIndex());
                    break;
                case ' ':
                    e.preventDefault();
                    toggleAutoPlay();
                    break;
            }
        });
        
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                pauseAutoPlay();
            } else if (CONFIG.autoPlay) {
                resumeAutoPlay();
            }
        });
        
        window.addEventListener('resize', () => {
            isMobile();
        });
        
        setInterval(processSwitchQueue, 16);
    }
    
    function getNextIndex() {
        const nextIndex = currentVideoIndex + 1;
        return nextIndex >= validVideos.length ? 0 : nextIndex;
    }
    
    function getPreviousIndex() {
        const prevIndex = currentVideoIndex - 1;
        return prevIndex < 0 ? validVideos.length - 1 : prevIndex;
    }
    
    function startVideoCycle() {
        if (!CONFIG.autoPlay || validVideos.length <= 1) return;
        
        if (CONFIG.preloadNext && videos[1]) {
            videos[1].load();
            videos[1].currentTime = 0;
        }
        
        scheduleNextTransition();
    }
    
    function scheduleNextTransition() {
        if (isPaused) return;
        
        clearTimeout(autoPlayTimer);
        autoPlayTimer = setTimeout(() => {
            if (!isPaused) {
                queueVideoSwitch(getNextIndex());
            }
        }, CONFIG.videoDuration);
    }
    
    function queueVideoSwitch(newIndex) {
        if (newIndex === currentVideoIndex || newIndex >= validVideos.length || newIndex < 0) {
            return;
        }
        
        switchQueue = [newIndex];
    }
    
    function processSwitchQueue() {
        if (switchQueue.length === 0 || isProcessingSwitch) return;
        
        const targetIndex = switchQueue.pop();
        switchQueue = [];
        
        executeVideoSwitch(targetIndex);
    }
    
    function executeVideoSwitch(newIndex) {
        if (newIndex === currentVideoIndex || isProcessingSwitch) return;
        if (newIndex >= validVideos.length || newIndex < 0) return;
        
        isProcessingSwitch = true;
        console.log(`Switching from video ${currentVideoIndex} to video ${newIndex}`);
        
        const currentVideo = videos[currentVideoIndex];
        const nextVideo = videos[newIndex];
        
        if (!currentVideo || !nextVideo) {
            isProcessingSwitch = false;
            return;
        }
        
        clearTimeout(autoPlayTimer);
        updateIndicators(newIndex);
        
        // Ensure styling
        applyVideoStyles(nextVideo, false);
        applyVideoStyles(currentVideo, true);
        
        nextVideo.currentTime = 0;
        
        const playPromise = nextVideo.play();
        
        if (playPromise !== undefined) {
            playPromise.then(() => {
                nextVideo.classList.add('active');
                nextVideo.style.opacity = '1';
                nextVideo.style.zIndex = '2';
                currentVideo.style.opacity = '0';
                currentVideo.style.zIndex = '1';
                
                setTimeout(() => {
                    currentVideo.classList.remove('active');
                    
                    try {
                        currentVideo.pause();
                        currentVideo.currentTime = 0;
                    } catch (e) {
                        console.warn('Error resetting previous video:', e);
                    }
                    
                    applyVideoStyles(currentVideo, false);
                    applyVideoStyles(nextVideo, true);
                    
                    currentVideoIndex = newIndex;
                    isProcessingSwitch = false;
                    
                    if (CONFIG.preloadNext) {
                        const nextIndex = getNextIndex();
                        if (videos[nextIndex] && videos[nextIndex].readyState < 2) {
                            videos[nextIndex].load();
                            videos[nextIndex].currentTime = 0;
                        }
                    }
                    
                    if (CONFIG.autoPlay && !isPaused) {
                        scheduleNextTransition();
                    }
                    
                }, CONFIG.fadeTransitionTime);
                
            }).catch((error) => {
                console.error('Video play error during switch:', error);
                isProcessingSwitch = false;
                nextVideo.classList.remove('active');
                currentVideo.style.opacity = '1';
                
                try {
                    currentVideo.currentTime = 0;
                    currentVideo.play().catch(() => {});
                } catch (e) {
                    console.warn('Recovery attempt failed:', e);
                }
                
                if (CONFIG.autoPlay && !isPaused) {
                    scheduleNextTransition();
                }
            });
        }
    }
    
    function updateIndicators(activeIndex) {
        indicators.forEach((indicator, index) => {
            if (index === activeIndex) {
                indicator.classList.add('active');
                indicator.style.opacity = '1';
            } else {
                indicator.classList.remove('active');
                indicator.style.opacity = '0.6';
            }
        });
    }
    
    function pauseAutoPlay() {
        isPaused = true;
        clearTimeout(autoPlayTimer);
    }
    
    function resumeAutoPlay() {
        if (CONFIG.autoPlay && validVideos.length > 1) {
            isPaused = false;
            scheduleNextTransition();
        }
    }
    
    function toggleAutoPlay() {
        CONFIG.autoPlay = !CONFIG.autoPlay;
        if (CONFIG.autoPlay) {
            resumeAutoPlay();
        } else {
            pauseAutoPlay();
        }
    }
    
    function forceReset() {
        console.log('Force resetting video system');
        isProcessingSwitch = false;
        switchQueue = [];
        clearTimeout(autoPlayTimer);
        
        if (currentVideoIndex >= validVideos.length) {
            currentVideoIndex = 0;
        }
        
        videos.forEach((video, index) => {
            try {
                if (index === currentVideoIndex) {
                    video.classList.add('active');
                    video.style.opacity = '1';
                    applyVideoStyles(video, true);
                    video.currentTime = 0;
                    video.play().catch(() => {});
                } else {
                    video.classList.remove('active');
                    video.style.opacity = '0';
                    applyVideoStyles(video, false);
                    video.pause();
                    video.currentTime = 0;
                }
            } catch (e) {
                console.warn(`Error resetting video ${index}:`, e);
            }
        });
        
        updateIndicators(currentVideoIndex);
        
        if (CONFIG.autoPlay && !isPaused) {
            scheduleNextTransition();
        }
    }
    
    function init() {
        setTimeout(() => {
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initVideoCycling);
            } else {
                initVideoCycling();
            }
        }, 100);
    }
    
    window.VideoCycling = {
        next: () => queueVideoSwitch(getNextIndex()),
        previous: () => queueVideoSwitch(getPreviousIndex()),
        switchTo: queueVideoSwitch,
        pause: pauseAutoPlay,
        resume: resumeAutoPlay,
        toggle: toggleAutoPlay,
        reset: forceReset,
        getCurrentIndex: () => currentVideoIndex,
        isTransitioning: () => isProcessingSwitch,
        getVideoCount: () => validVideos.length
    };
    
    init();
    
})();
// Mobile Video Position Fix - Add this after your video cycling script
(function() {
    'use strict';
    
    function isMobile() {
        return window.innerWidth <= 768 || /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    }
    
    function fixMobileVideoPosition() {
        const videos = document.querySelectorAll('.hero-video');
        const hero = document.querySelector('.hero');
        
        if (isMobile()) {
            // Fix video positioning on mobile
            videos.forEach(video => {
                video.style.position = 'fixed';
                video.style.top = '0';
                video.style.left = '0';
                video.style.transform = 'none';
                video.style.width = '100vw';
                video.style.height = '100vh';
                video.style.zIndex = '-1';
                video.style.objectFit = 'cover';
            });
            
            // Ensure hero doesn't interfere
            if (hero) {
                hero.style.position = 'relative';
                hero.style.zIndex = '1';
            }
            
            // Force repaint to fix disappearing elements
            const contact = document.querySelector('.contact');
            const footer = document.querySelector('.footer');
            
            if (contact) {
                contact.style.transform = 'translateZ(0)';
                contact.style.isolation = 'isolate';
            }
            
            if (footer) {
                footer.style.transform = 'translateZ(0)';
                footer.style.isolation = 'isolate';
            }
            
        } else {
            // Desktop behavior - allow controlled bleed through
            videos.forEach(video => {
                video.style.position = 'absolute';
                video.style.top = '50%';
                video.style.left = '50%';
                video.style.transform = 'translate(-50%, -50%)';
                video.style.width = 'auto';
                video.style.height = 'auto';
                video.style.minWidth = '100%';
                video.style.minHeight = '100%';
                video.style.zIndex = '1';
            });
            
            if (hero) {
                hero.style.position = 'sticky';
                hero.style.zIndex = '1';
            }
        }
    }
    
    // Fix video positioning when videos are created
    function observeVideoChanges() {
        const videoContainer = document.getElementById('videoContainer');
        if (!videoContainer) return;
        
        const observer = new MutationObserver((mutations) => {
            mutations.forEach((mutation) => {
                if (mutation.type === 'childList') {
                    mutation.addedNodes.forEach((node) => {
                        if (node.nodeType === 1 && (node.tagName === 'VIDEO' || node.classList.contains('hero-video'))) {
                            setTimeout(fixMobileVideoPosition, 100);
                        }
                    });
                }
            });
        });
        
        observer.observe(videoContainer, {
            childList: true,
            subtree: true
        });
    }
    
    // Initialize fixes
    function initMobileFixes() {
        fixMobileVideoPosition();
        observeVideoChanges();
        
        // Fix on resize
        window.addEventListener('resize', () => {
            setTimeout(fixMobileVideoPosition, 100);
        });
        
        // Fix on orientation change
        window.addEventListener('orientationchange', () => {
            setTimeout(fixMobileVideoPosition, 500);
        });
        
        // Periodic fix for mobile issues
        if (isMobile()) {
            setInterval(() => {
                const contact = document.querySelector('.contact');
                const footer = document.querySelector('.footer');
                
                // Check if elements are disappearing and force visibility
                if (contact && contact.style.display === 'none') {
                    contact.style.display = 'block';
                    contact.style.visibility = 'visible';
                }
                
                if (footer && footer.style.display === 'none') {
                    footer.style.display = 'block';
                    footer.style.visibility = 'visible';
                }
            }, 1000);
        }
    }
    
    // Wait for video system to initialize
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(initMobileFixes, 500);
        });
    } else {
        setTimeout(initMobileFixes, 500);
    }
    
    // Backup initialization
    setTimeout(initMobileFixes, 2000);
    
})();
</script>
<!-- ULTIMATE SCROLL-TRIGGERED STATS COUNTER -->
<script>
(function() {
    'use strict';
    
    // Configuration
    const CONFIG = {
        visibilityThreshold: 0.35, // 30% of element must be visible (lowered for earlier trigger)
        scrollThrottle: 100,       // Check scroll every 100ms
        staggerDelay: 300,         // 300ms between each counter
    };
    
    function startCounter(element, target, duration = null) {
        // Smart duration based on target value
        if (!duration) {
            if (target <= 10) duration = 1500;
            else if (target <= 100) duration = 2000;
            else if (target <= 1000) duration = 2500;
            else duration = 3000;
        }
        
        let current = 0;
        const startTime = Date.now();
        
        element.textContent = '0';
        element.style.opacity = '1'; // Ensure visibility
        
        function updateCounter() {
            const elapsed = Date.now() - startTime;
            const progress = Math.min(elapsed / duration, 1);
            
            // Smooth ease-out cubic curve
            const easeOutCubic = 1 - Math.pow(1 - progress, 3);
            
            current = Math.floor(target * easeOutCubic);
            element.textContent = current;
            
            if (progress < 1) {
                requestAnimationFrame(updateCounter);
            } else {
                element.textContent = target;
                console.log(`‚úì Counter completed: ${target}`);
            }
        }
        
        requestAnimationFrame(updateCounter);
    }
    
    function getElementVisibility(element) {
        const rect = element.getBoundingClientRect();
        const windowHeight = window.innerHeight || document.documentElement.clientHeight;
        
        // Calculate what percentage of the element is visible
        const elementHeight = rect.height;
        const visibleTop = Math.max(0, rect.top);
        const visibleBottom = Math.min(windowHeight, rect.bottom);
        const visibleHeight = Math.max(0, visibleBottom - visibleTop);
        
        return {
            ratio: elementHeight > 0 ? visibleHeight / elementHeight : 0,
            isVisible: visibleHeight > 0,
            rect: rect,
            elementHeight: elementHeight,
            visibleHeight: visibleHeight
        };
    }
    
    function findStatsSection() {
        // Try multiple selectors to find the stats section
        const selectors = [
            '.stats-grid',
            '.about .stats-grid', 
            '.about',
            '[class*="stat"]',
            '.stat-item:first-child'
        ];
        
        for (const selector of selectors) {
            const element = document.querySelector(selector);
            if (element) {
                console.log(`Stats section found using selector: ${selector}`);
                return element;
            }
        }
        
        console.warn('Stats section not found with any selector');
        return null;
    }
    
    function initStatsCounters() {
        const statNumbers = document.querySelectorAll('.stat-number[data-count]');
        const statsSection = findStatsSection();
        
        console.log('=== STATS COUNTER INITIALIZATION ===');
        console.log(`Found ${statNumbers.length} stat numbers`);
        console.log('Stats section found:', !!statsSection);
        
        if (statNumbers.length === 0) {
            console.error('‚ùå No stat numbers found with data-count attribute');
            return;
        }
        
        if (!statsSection) {
            console.error('‚ùå Stats section not found');
            return;
        }
        
        // Log all stat numbers for debugging
        statNumbers.forEach((el, i) => {
            const target = parseInt(el.dataset.count);
            console.log(`  Stat ${i}: target=${target}, current="${el.textContent}"`);
        });
        
        let hasAnimated = false;
        
        function checkScrollPosition() {
            if (hasAnimated) return;
            
            const visibility = getElementVisibility(statsSection);
            
            // Only log periodically to avoid console spam
            if (Math.random() < 0.1) { // Log ~10% of checks
                console.log(`üìä Scroll check: visible=${visibility.ratio.toFixed(2)} (${Math.round(visibility.ratio * 100)}%)`);
            }
            
            if (visibility.ratio >= CONFIG.visibilityThreshold) {
                hasAnimated = true;
                console.log('üéØ TRIGGERING STATS ANIMATION!');
                console.log(`Stats section is ${Math.round(visibility.ratio * 100)}% visible (threshold: ${CONFIG.visibilityThreshold * 100}%)`);
                
                // Start animations with staggered timing
                statNumbers.forEach((element, index) => {
                    const target = parseInt(element.dataset.count);
                    
                    if (isNaN(target)) {
                        console.warn(`‚ö†Ô∏è Invalid data-count: "${element.dataset.count}"`);
                        return;
                    }
                    
                    setTimeout(() => {
                        console.log(`üöÄ Starting counter ${index}: 0 ‚Üí ${target}`);
                        startCounter(element, target);
                    }, index * CONFIG.staggerDelay);
                });
                
                // Remove scroll listener to prevent re-triggering
                window.removeEventListener('scroll', throttledScrollCheck);
                console.log('Scroll listener removed - animation complete');
            }
        }
        
        // Throttled scroll handler
        let scrollTimeout;
        function throttledScrollCheck() {
            if (scrollTimeout) clearTimeout(scrollTimeout);
            scrollTimeout = setTimeout(checkScrollPosition, CONFIG.scrollThrottle);
        }
        
        // Add scroll listener
        window.addEventListener('scroll', throttledScrollCheck, { passive: true });
        console.log('Scroll listener added - waiting for user to scroll to stats section');
        
        // Check immediately in case already in view (but only once after short delay)
        setTimeout(() => {
            console.log('Initial visibility check...');
            checkScrollPosition();
        }, 1000);
    }
    
    // Initialize
    function init() {
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initStatsCounters);
        } else {
            setTimeout(initStatsCounters, 100);
        }
        
        // Backup initialization
        window.addEventListener('load', () => {
            setTimeout(initStatsCounters, 300);
        });
    }
    
    // Testing and debugging functions
    window.statsDebug = {
        // Manually trigger all counters
        start: function() {
            console.log('üîß Manual trigger activated');
            const statNumbers = document.querySelectorAll('.stat-number[data-count]');
            statNumbers.forEach((element, index) => {
                const target = parseInt(element.dataset.count);
                if (!isNaN(target)) {
                    setTimeout(() => {
                        startCounter(element, target);
                    }, index * 300);
                }
            });
        },
        
        // Check current visibility
        checkVisibility: function() {
            const statsSection = findStatsSection();
            if (statsSection) {
                const visibility = getElementVisibility(statsSection);
                console.log('=== VISIBILITY CHECK ===');
                console.log(`Visibility ratio: ${Math.round(visibility.ratio * 100)}%`);
                console.log(`Threshold needed: ${CONFIG.visibilityThreshold * 100}%`);
                console.log(`Will trigger: ${visibility.ratio >= CONFIG.visibilityThreshold}`);
                console.log('Element rect:', visibility.rect);
            }
        },
        
        // Monitor scroll in real-time
        monitor: function() {
            let count = 0;
            const interval = setInterval(() => {
                this.checkVisibility();
                count++;
                if (count >= 20) { // Stop after 20 checks
                    clearInterval(interval);
                    console.log('Monitoring stopped');
                }
            }, 1000);
            console.log('Started scroll monitoring (20 seconds)');
        },
        
        // Reset all counters to 0
        reset: function() {
            document.querySelectorAll('.stat-number[data-count]').forEach(el => {
                el.textContent = '0';
            });
            console.log('All counters reset to 0');
        }
    };
    
    init();
    
})();
</script>
<!-- EmailJS SDK -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
<script type="text/javascript">
    (function(){
        emailjs.init("YOUR_PUBLIC_KEY_HERE"); // ‚ö†Ô∏è Replace after setting up EmailJS
    })();
</script>
<script type="module" src="/script.js"></script>
</body>
</html>